<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Fabian Köhler</title><link href="https://fkoehler.org/" rel="alternate"></link><link href="https://fkoehler.org/feeds/all.atom.xml" rel="self"></link><id>https://fkoehler.org/</id><updated>2023-05-30T00:00:00+02:00</updated><entry><title>Exploring disordered quantum spin models with a multilayer multiconfigurational approach</title><link href="https://fkoehler.org/publications/2023-mlmctdh-spins.html" rel="alternate"></link><published>2023-05-30T00:00:00+02:00</published><updated>2023-05-30T00:00:00+02:00</updated><author><name>F. Köhler</name></author><id>tag:fkoehler.org,2023-05-30:/publications/2023-mlmctdh-spins.html</id><summary type="html">&lt;p&gt;We study the ground states of disordered quantum spin models using the ML-MCTDH method and benchmark it against exact diagonalization and DMRG.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Numerical simulations of quantum spin models are crucial for a profound understanding of many-body phenomena in a variety of research areas in physics. An outstanding problem is the availability of methods to tackle systems that violate area-laws of entanglement entropy. Such scenarios cover a wide range of compelling physical situations including disordered quantum spin systems among others. In this work, we employ a numerical technique referred to as multi-layer multi-configuration time-dependent Hartree (ML-MCTDH) to evaluate the ground state of several disordered spin models. ML-MCTDH has previously been used to study problems of high-dimensional quantum dynamics in molecular and ultracold physics but is here applied to study spin systems for the first time. We exploit the inherent flexibility of the method to present results in one and two spatial dimensions and treat challenging setups that incorporate long-range interactions as well as disorder. Our results suggest that the hierarchical multi-layering inherent to ML-MCTDH allows to tackle a wide range of quantum many-body problems such as spin dynamics of varying dimensionality. &lt;/p&gt;</content><category term="Publications"></category></entry><entry><title>KTailctl</title><link href="https://fkoehler.org/projects/KTailctl.html" rel="alternate"></link><published>2023-03-10T21:14:02+01:00</published><updated>2023-03-10T21:14:02+01:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2023-03-10:/projects/KTailctl.html</id><summary type="html">&lt;p&gt;A GUI to monitor and manage Tailscale on your Linux desktop.&lt;/p&gt;</summary><content type="html">&lt;h1&gt;KTailctl&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://github.com/f-koehler/KTailctl/actions/workflows/ci.yml"&gt;&lt;img alt="GitHub Workflow Status" src="https://img.shields.io/github/actions/workflow/status/f-koehler/KTailctl/ci.yml"/&gt;&lt;/a&gt;
&lt;a href="https://github.com/f-koehler/KTailctl"&gt;&lt;img alt="GitHub" src="https://img.shields.io/github/license/f-koehler/KTailctl"/&gt;&lt;/a&gt;
&lt;a href="https://results.pre-commit.ci/latest/github/f-koehler/KTailctl/main"&gt;&lt;img alt="pre-commit.ci status" src="https://results.pre-commit.ci/badge/github/f-koehler/KTailctl/main.svg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A GUI to monitor and manage Tailscale on your Linux desktop, built using KDE Frameworks and Kirigami2.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;:warning: To get the most out of KTailctl (sending/receiving files, changing Tailscale settings, …) make sure you are the operator &lt;code&gt;tailscale up --operator=$USER&lt;/code&gt;!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://flathub.org/apps/org.fkoehler.KTailctl"&gt;&lt;img alt="Flathub" src="https://dl.flathub.org/assets/badges/flathub-badge-en.svg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Main Window" src="https://github.com/f-koehler/KTailctl/blob/main/screenshots/main.png"/&gt;&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;[x] Monitoring of tailscale status&lt;/li&gt;
&lt;li&gt;[x] Monitoring of total traffic&lt;/li&gt;
&lt;li&gt;[x] Monitoring of traffic per peer&lt;/li&gt;
&lt;li&gt;[x] Detailed peer information&lt;/li&gt;
&lt;li&gt;[x] Tray menu for quick access&lt;/li&gt;
&lt;li&gt;[x] Copying of IP addresses/DNS name&lt;/li&gt;
&lt;li&gt;[ ] Speed graphs&lt;/li&gt;
&lt;li&gt;[ ] Pinging of peers&lt;/li&gt;
&lt;li&gt;[ ] Exit node management&lt;/li&gt;
&lt;li&gt;[x] Toggle tailscale status&lt;/li&gt;
&lt;li&gt;[x] Sending files&lt;/li&gt;
&lt;li&gt;[x] Receiving files&lt;/li&gt;
&lt;li&gt;[ ] Notification on tailscale status change&lt;/li&gt;
&lt;li&gt;[ ] Notification on peer addition/removal&lt;/li&gt;
&lt;li&gt;[x] Flatpak&lt;/li&gt;
&lt;li&gt;[ ] Localization&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Developing&lt;/h2&gt;
&lt;h3&gt;Create a release&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Create a changelog file &lt;code&gt;changelog/vX.Y.Z.md&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Add a new release to &lt;code&gt;org.fkoehler.ktailctl.metainfo.xml&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Create a commit called &lt;code&gt;Release vX.Y.Z.&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Create a tag from changelog: &lt;code&gt;git tag -s -F changelog/vX.Y.Z.md vX.Y.Z&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Push tag: &lt;code&gt;git push origin vX.Y.Z&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Create GitHub release: &lt;code&gt;gh release create -F changelog/vX.Y.Z.md --verify-tag vX.Y.Z&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Vendor go dependencies: &lt;code&gt;./vendor.sh&lt;/code&gt; (when go deps change)&lt;/li&gt;
&lt;li&gt;Upload vendor tarball: &lt;code&gt;gh release upload vX.Y.Z tailctlpp-vX.Y.Z.tar.gz&lt;/code&gt; (when go deps change)&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Install Dependencies using craft&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;craft kirigami ki18n kconfig knotifications kcoreaddons qtquickcontrols qqc2-desktop-style&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;</content><category term="projects"></category><category term="gui"></category><category term="kde"></category><category term="kirigami2"></category><category term="mesh-networks"></category><category term="tailscale"></category><category term="vpn"></category><category term="wireguard"></category></entry><entry><title>mpskit</title><link href="https://fkoehler.org/projects/mpskit.html" rel="alternate"></link><published>2021-12-14T12:42:47+01:00</published><updated>2021-12-14T12:42:47+01:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2021-12-14:/projects/mpskit.html</id><summary type="html">&lt;p&gt;C++17 toolkit to study the static properties of discrete quantum systems.&lt;/p&gt;</summary><content type="html">&lt;h1&gt;mpskit&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://github.com/f-koehler/mpskit"&gt;&lt;img alt="Repository on GitHub" src="https://img.shields.io/badge/Repo-Github-brightgreen?logo=github"/&gt;&lt;/a&gt;
&lt;a href="https://github.com/f-koehler/mpskit/actions/workflows/ci.yml"&gt;&lt;img alt="CI" src="https://github.com/f-koehler/mpskit/actions/workflows/ci.yml/badge.svg"/&gt;&lt;/a&gt;
&lt;a href="https://github.com/f-koehler/mpskit/blob/main/LICENSE.md"&gt;&lt;img alt="GitHub" src="https://img.shields.io/github/license/f-koehler/mpskit"/&gt;&lt;/a&gt;
&lt;img alt="GitHub top language" src="https://img.shields.io/github/languages/top/f-koehler/mpskit"/&gt;&lt;/p&gt;
&lt;p&gt;mpskit is a toolkit to facilitate the investigation of discrete quantum systems (e.g. lattice models of spins and bosons) in one and two dimensions.
It employs the &lt;a href="https://github.com/ITensor/ITensor"&gt;ITensor&lt;/a&gt; library for matrix product and tensor network states as well as the &lt;a href="https://en.wikipedia.org/wiki/Density_matrix_renormalization_group"&gt;density matrix renormalization group (DMRG) algorithm&lt;/a&gt; to compute eigenstates.
The library allows to easily implement new systems and to compute relevant observables (expectation values, local operators, correlations, …).
Results are stored in an efficient and portable &lt;a href="https://www.hdfgroup.org/solutions/hdf5/"&gt;HDF5&lt;/a&gt; file format that can be read by many programming languages/tools for further analysis.
Input parameters are passed via &lt;a href="https://en.wikipedia.org/wiki/JSON"&gt;JSON&lt;/a&gt; files which are human-readable plain text files.&lt;/p&gt;
&lt;p&gt;I tried to implement &lt;a href="https://en.wikipedia.org/wiki/Time-evolving_block_decimation"&gt;time-evolving block decimation (TEBD)&lt;/a&gt; to compute the time-evolution but could not quite get it to work with the C++ version of ITensor.
However, I got it to work with the Julia version of ITensor, &lt;a href="https://github.com/ITensor/ITensors.jl"&gt;ITensor.jl&lt;/a&gt; and you can use my project &lt;a href="https://github.com/f-koehler/MPSToolkit.jl"&gt;MPSToolkit.jl&lt;/a&gt; for that.&lt;/p&gt;
&lt;h2&gt;Available Models&lt;/h2&gt;
&lt;h3&gt;1D Spin Systems&lt;/h3&gt;
&lt;h4&gt;Transverse-Field Ising Model&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/Transverse-field_Ising_model"&gt;Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="examples/transverse_ising_1d.json"&gt;example input&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="math"&gt;&lt;svg height="46.152" viewbox="0 0 259.69 34.614" width="259.69pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M4.13 11.49c0-.04-.02-.06-.04-.09-.46-.49-1.14-1.3-1.56-2.93-.23-.91-.32-1.94-.32-2.87 0-2.63.63-4.47 1.83-5.77.09-.09.09-.11.09-.13 0-.1-.08-.1-.12-.1-.15 0-.69.6-.82.75-1.02 1.21-1.67 3.01-1.67 5.24 0 1.42.25 3.43 1.56 5.12.1.12.75.88.93.88.04 0 .12 0 .12-.1z" id="j"&gt;&lt;/path&gt;&lt;path d="M3.05 5.6c0-1.42-.25-3.43-1.56-5.12C1.39.36.74-.4.56-.4c-.05 0-.12.02-.12.1 0 .04.02.07.06.1.48.52 1.13 1.33 1.54 2.92.23.91.32 1.94.32 2.87 0 1.01-.09 2.03-.35 3.01-.38 1.4-.97 2.2-1.48 2.76-.09.09-.09.11-.09.13 0 .08.07.1.12.1.15 0 .7-.61.82-.75C2.4 9.63 3.05 7.83 3.05 5.6Z" id="o"&gt;&lt;/path&gt;&lt;path d="M4.21 5.34.66 9.73c-.08.1-.09.12-.09.16 0 .11.09.11.27.11h8.29l.86-2.49h-.25c-.25.75-.92 1.36-1.77 1.65-.16.05-.85.29-2.32.29H1.4l3.47-4.29c.07-.09.09-.12.09-.16s-.01-.05-.07-.14L1.64.4H5.6c1.14 0 3.44.07 4.14 1.94h.25L9.13 0H.84C.57 0 .56.01.56.32l3.65 5.02Z" id="g"&gt;&lt;/path&gt;&lt;path d="M3.241-1.582h2.142c.091 0 .259 0 .259-.168 0-.175-.161-.175-.259-.175H3.241v-2.149c0-.091 0-.259-.168-.259-.175 0-.175.161-.175.259v2.149H.749c-.091 0-.259 0-.259.168 0 .175.161.175.259.175h2.149V.567c0 .091 0 .259.168.259.175 0 .175-.161.175-.259v-2.149z" id="n"&gt;&lt;/path&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="f"&gt;&lt;/path&gt;&lt;path d="M5.376-2.352c.105 0 .266 0 .266-.175 0-.168-.168-.168-.259-.168H.749c-.091 0-.259 0-.259.168 0 .175.161.175.266.175h4.62zm.007 1.54c.091 0 .259 0 .259-.168 0-.175-.161-.175-.266-.175H.756c-.105 0-.266 0-.266.175 0 .168.168.168.259.168h4.634z" id="i"&gt;&lt;/path&gt;&lt;path d="M5.208-1.582c.112 0 .28 0 .28-.168 0-.175-.161-.175-.28-.175H1.036c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h4.172z" id="e"&gt;&lt;/path&gt;&lt;path d="M2.884-4.207c.063-.252.084-.322.728-.322.217 0 .287 0 .287-.154 0-.007-.007-.098-.119-.098-.161 0-.35.014-.518.021-.175.007-.385.007-.56.007-.147 0-.336-.007-.483-.007s-.315-.021-.455-.021c-.042 0-.147 0-.147.154 0 .098.084.098.224.098.007 0 .14 0 .266.014.147.014.161.028.161.098 0 .014 0 .049-.028.154L1.309-.546c-.063.238-.077.294-.616.294-.119 0-.21 0-.21.147C.483 0 .567 0 .693 0h3.521c.175 0 .182-.007.238-.14.07-.189.595-1.547.595-1.603 0-.021-.014-.098-.119-.098-.084 0-.098.035-.14.147-.266.665-.574 1.442-1.855 1.442h-.791c-.217 0-.224-.007-.224-.07 0-.007 0-.042.028-.147l.938-3.738z" id="d"&gt;&lt;/path&gt;&lt;path d="M2.268-4.375c0-.112-.084-.266-.28-.266-.189 0-.392.182-.392.385 0 .119.091.266.28.266.203 0 .392-.196.392-.385zM.84-.819c-.028.091-.063.175-.063.294 0 .329.28.595.665.595.7 0 1.008-.966 1.008-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.042-.133.119-.161.56-.469.847-.742.847-.14 0-.175-.091-.175-.245 0-.161.049-.294.112-.448.07-.189.147-.378.224-.56.063-.168.315-.805.343-.889.021-.07.042-.154.042-.224 0-.329-.28-.595-.665-.595-.693 0-1.015.952-1.015 1.071 0 .091.098.091.119.091.098 0 .105-.035.126-.112.182-.602.49-.854.749-.854.112 0 .175.056.175.245 0 .161-.042.266-.217.7L.84-.819z" id="h"&gt;&lt;/path&gt;&lt;path d="M1.743-.742c-.07.238-.301.616-.658.616-.021 0-.231 0-.378-.098.287-.091.308-.343.308-.385 0-.154-.119-.259-.28-.259-.196 0-.399.168-.399.427 0 .35.392.511.735.511.322 0 .609-.203.784-.497.168.371.553.497.833.497.805 0 1.232-.875 1.232-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.035-.133.119-.147.483-.567.847-.959.847-.28 0-.427-.189-.427-.455 0-.182.168-.819.364-1.596.14-.539.455-.714.686-.714.014 0 .231 0 .378.098-.224.063-.308.259-.308.385 0 .154.119.259.28.259s.392-.133.392-.427c0-.392-.448-.511-.728-.511-.35 0-.63.231-.784.497-.126-.287-.448-.497-.84-.497-.784 0-1.232.861-1.232 1.071 0 .091.098.091.119.091.091 0 .098-.028.133-.119.175-.546.616-.847.959-.847.231 0 .42.126.42.462 0 .14-.084.49-.147.728l-.238.959z" id="s"&gt;&lt;/path&gt;&lt;path d="M1.176-.616c.182-.182.308-.315.903-.791.147-.119.672-.539.875-.735.427-.42.693-.777.693-.861s-.091-.084-.119-.084c-.063 0-.084.014-.119.07-.217.322-.364.427-.532.427-.084 0-.189-.007-.399-.21-.238-.238-.392-.287-.553-.287-.56 0-.938.609-.938.819 0 .063.07.084.119.084.084 0 .098-.021.126-.098.105-.245.497-.259.609-.259.161 0 .343.042.441.063.385.084.434.084.609.084-.182.189-.308.315-.973.847-.546.434-.735.609-.868.749-.42.413-.623.721-.623.784C.427.07.518.07.546.07.616.07.63.056.665 0c.189-.266.406-.427.644-.427.084 0 .189.007.378.182.217.21.357.315.581.315.749 0 1.218-.847 1.218-1.085 0-.084-.077-.091-.119-.091-.084 0-.098.035-.126.112-.133.35-.546.518-.889.518-.161 0-.336-.035-.511-.077-.322-.07-.378-.07-.504-.07-.014 0-.119 0-.161.007z" id="m"&gt;&lt;/path&gt;&lt;path d="M3.31 2.4c0-.03 0-.05-.17-.22C1.89.92 1.57-.97 1.57-2.5c0-1.74.38-3.48 1.61-4.73.13-.12.13-.14.13-.17 0-.07-.04-.1-.1-.1-.1 0-1 .68-1.59 1.95C1.11-4.45.99-3.34.99-2.5c0 .78.11 1.99.66 3.12.6 1.23 1.46 1.88 1.56 1.88.06 0 .1-.03.1-.1z" id="q"&gt;&lt;/path&gt;&lt;path d="M2.89-2.5c0-.78-.11-1.99-.66-3.12C1.63-6.85.77-7.5.67-7.5c-.06 0-.1.04-.1.1 0 .03 0 .05.19.23.98.99 1.55 2.58 1.55 4.67C2.31-.79 1.94.97.7 2.23c-.13.12-.13.14-.13.17 0 .06.04.1.1.1.1 0 1-.68 1.59-1.95.51-1.1.63-2.21.63-3.05z" id="t"&gt;&lt;/path&gt;&lt;path d="M4.09-2.3h2.79c.14 0 .33 0 .33-.2s-.19-.2-.33-.2H4.09v-2.8c0-.14 0-.33-.2-.33s-.2.19-.2.33v2.8H.89c-.14 0-.33 0-.33.2s.19.2.33.2h2.8V.5c0 .14 0 .33.2.33s.2-.19.2-.33v-2.8z" id="p"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="c"&gt;&lt;/path&gt;&lt;path d="M5.18-3.73c.13 0 .49 0 .49-.34 0-.24-.21-.24-.39-.24H3C1.49-4.31.38-2.66.38-1.47.38-.59.97.11 1.88.11c1.18 0 2.51-1.21 2.51-2.75 0-.17 0-.65-.31-1.09h1.1zM1.89-.11C1.4-.11 1-.47 1-1.19c0-.3.12-1.12.47-1.71.42-.69 1.02-.83 1.36-.83.84 0 .92.66.92.97 0 .47-.2 1.29-.54 1.8-.39.59-.93.85-1.32.85z" id="l"&gt;&lt;/path&gt;&lt;path d="M7.63-6.06c.09-.36.11-.46.84-.46.26 0 .34 0 .34-.2 0-.11-.11-.11-.14-.11-.28 0-1 .03-1.28.03-.29 0-1-.03-1.29-.03-.08 0-.19 0-.19.2 0 .11.09.11.28.11.02 0 .21 0 .38.02.18.02.27.03.27.16 0 .04-.01.06-.04.19l-.6 2.44H3.15l.59-2.35c.09-.36.12-.46.84-.46.26 0 .34 0 .34-.2 0-.11-.11-.11-.14-.11-.28 0-1 .03-1.28.03-.29 0-1-.03-1.29-.03-.08 0-.19 0-.19.2 0 .11.09.11.28.11.02 0 .21 0 .38.02.18.02.27.03.27.16 0 .04-.01.07-.04.19L1.57-.78c-.1.39-.12.47-.91.47-.18 0-.27 0-.27.2 0 .11.12.11.14.11.28 0 .99-.03 1.27-.03.21 0 .43.01.64.01.22 0 .44.02.65.02.08 0 .2 0 .2-.2 0-.11-.09-.11-.28-.11-.37 0-.65 0-.65-.18 0-.06.02-.11.03-.17l.68-2.74h3.05C5.7-1.74 5.47-.79 5.43-.64c-.1.32-.29.33-.91.33-.15 0-.24 0-.24.2 0 .11.12.11.14.11.28 0 .99-.03 1.27-.03.21 0 .43.01.64.01.22 0 .44.02.65.02.08 0 .2 0 .2-.2 0-.11-.09-.11-.28-.11-.37 0-.65 0-.65-.18 0-.06.02-.11.03-.17l1.35-5.4z" id="b"&gt;&lt;/path&gt;&lt;path d="M5.41-6.1c.08-.33.1-.42.65-.42.16 0 .27 0 .27-.19 0-.09-.06-.12-.14-.12-.25 0-.86.03-1.11.03-.33 0-1.14-.03-1.47-.03-.09 0-.21 0-.21.2 0 .11.08.11.34.11.23 0 .33 0 .58.02.24.03.31.06.31.2 0 .06-.02.13-.04.21L3.44-1.5C3.2-.53 2.52 0 2 0c-.26 0-.79-.1-.95-.62.03.01.1.01.12.01.39 0 .65-.34.65-.64 0-.32-.27-.42-.44-.42-.18 0-.67.12-.67.8 0 .62.53 1.09 1.32 1.09.92 0 1.96-.66 2.21-1.65L5.41-6.1z" id="k"&gt;&lt;/path&gt;&lt;path d="M2.87-6.83c0-.01 0-.11-.13-.11-.23 0-.96.08-1.22.1-.08.01-.19.02-.19.2 0 .12.09.12.24.12.48 0 .5.07.5.17l-.03.2L.59-.39c-.04.14-.04.16-.04.22 0 .23.2.28.29.28.16 0 .32-.12.37-.26l.19-.76.22-.9c.06-.22.12-.44.17-.67.02-.06.1-.39.11-.45.03-.09.34-.65.68-.92.22-.16.53-.35.96-.35s.54.34.54.7c0 .54-.38 1.63-.62 2.24-.08.23-.13.35-.13.55 0 .47.35.82.82.82.94 0 1.31-1.46 1.31-1.54 0-.1-.09-.1-.12-.1-.1 0-.1.03-.15.18-.15.53-.47 1.24-1.02 1.24-.17 0-.24-.1-.24-.33 0-.25.09-.49.18-.71.16-.43.61-1.62.61-2.2 0-.65-.4-1.07-1.15-1.07-.63 0-1.11.31-1.48.77l.78-3.18z" id="r"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 23.994h178.5V-.994h-178.5z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 23.994) scale(1.00375)"&gt;&lt;use x="2.00047" xlink:href="#b" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="13.90294" xlink:href="#c" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="24.45837" xlink:href="#d" y="-19.2991"&gt;&lt;/use&gt;&lt;use x="29.94386" xlink:href="#e" y="-19.2991"&gt;&lt;/use&gt;&lt;use x="36.19421" xlink:href="#f" y="-19.2991"&gt;&lt;/use&gt;&lt;use x="27.04203" xlink:href="#g" y="-17.29863"&gt;&lt;/use&gt;&lt;use x="25.84254" xlink:href="#h" y="-.99974"&gt;&lt;/use&gt;&lt;use x="28.67111" xlink:href="#i" y="-.99974"&gt;&lt;/use&gt;&lt;use x="34.81011" xlink:href="#f" y="-.99974"&gt;&lt;/use&gt;&lt;use x="41.84734" xlink:href="#j" y="-17.89887"&gt;&lt;/use&gt;&lt;use x="46.43046" xlink:href="#k" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="52.94047" xlink:href="#l" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="59.01045" xlink:href="#m" y="-13.42716"&gt;&lt;/use&gt;&lt;use x="58.6511" xlink:href="#h" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="63.61768" xlink:href="#l" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="69.69135" xlink:href="#m" y="-13.42716"&gt;&lt;/use&gt;&lt;use x="69.332" xlink:href="#h" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="72.16157" xlink:href="#n" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="78.30058" xlink:href="#f" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="82.78629" xlink:href="#o" y="-17.89887"&gt;&lt;/use&gt;&lt;use x="89.59171" xlink:href="#p" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="103.326" xlink:href="#d" y="-19.2991"&gt;&lt;/use&gt;&lt;use x="100.79156" xlink:href="#g" y="-17.29863"&gt;&lt;/use&gt;&lt;use x="99.59205" xlink:href="#h" y="-.99974"&gt;&lt;/use&gt;&lt;use x="102.42162" xlink:href="#i" y="-.99974"&gt;&lt;/use&gt;&lt;use x="108.56062" xlink:href="#f" y="-.99974"&gt;&lt;/use&gt;&lt;use x="114.2127" xlink:href="#q" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="118.10223" xlink:href="#r" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="123.86372" xlink:href="#s" y="-8.299"&gt;&lt;/use&gt;&lt;use x="128.89856" xlink:href="#l" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="134.97121" xlink:href="#s" y="-13.42716"&gt;&lt;/use&gt;&lt;use x="134.61187" xlink:href="#h" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="142.22836" xlink:href="#p" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="152.22772" xlink:href="#r" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="157.9892" xlink:href="#m" y="-8.299"&gt;&lt;/use&gt;&lt;use x="162.59746" xlink:href="#l" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="168.6701" xlink:href="#m" y="-13.42716"&gt;&lt;/use&gt;&lt;use x="168.31076" xlink:href="#h" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="173.27736" xlink:href="#t" y="-9.79861"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$H=\sum\limits_{i=1}^{L-1}\left(
  J\sigma_{i}^{z}\sigma_{i+1}^{z}
  \right)
  +\sum\limits_{i=1}^{L}\left(
    h_x\sigma_{i}^{x}
    +h_z\sigma_{i}^{z}
  \right)$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;h4&gt;Long-Range Transverse-Field Ising Model&lt;/h4&gt;
&lt;div class="math"&gt;&lt;svg height="48.852" viewbox="0 0 314.66 36.639" width="314.66pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M3.27-.705c.445-.395.685-1.08.685-1.19 0-.07-.07-.07-.1-.07-.09 0-.095.015-.12.12-.115.41-.35.73-.48.885-.015-.115-.015-.125-.025-.27-.065-.745-.66-.98-1.12-.98-.83 0-1.575.68-1.575 1.355 0 .505.405.91 1.05.91.245 0 .74-.05 1.3-.435.085.22.28.435.6.435.335 0 .525-.24.525-.355 0-.07-.065-.07-.105-.07-.06 0-.08 0-.105.065-.07.17-.255.19-.3.19-.105 0-.195-.09-.23-.59zm-.43.14c-.195.14-.655.45-1.24.45C1.29-.115.995-.27.995-.7c0-.165.07-.63.32-.95.17-.21.47-.39.785-.39.51 0 .64.51.68.805.015.105.025.37.06.67z" id="n"&gt;&lt;/path&gt;&lt;path d="M5.15 17.48c.02.01.11.11.12.11h.22c.03 0 .11-.01.11-.1 0-.04-.02-.06-.04-.09-.36-.36-.9-.91-1.52-2.01C2.96 13.47 2.56 11 2.56 8.6c0-4.44 1.26-7.05 3.01-8.82.03-.03.03-.06.03-.08 0-.1-.07-.1-.19-.1-.13 0-.15 0-.24.08C4.22.5 3.15 1.89 2.46 4c-.43 1.32-.66 2.93-.66 4.59 0 2.37.43 5.05 2 7.37.27.39.64.8.64.81.1.12.24.28.32.35l.39.36z" id="k"&gt;&lt;/path&gt;&lt;path d="M4.16 8.59c0-2.87-.67-5.92-2.64-8.17-.14-.16-.51-.55-.75-.76C.7-.4.68-.4.55-.4c-.1 0-.19 0-.19.1 0 .04.04.08.06.1.34.35.88.9 1.5 2C3 3.72 3.4 6.19 3.4 8.59c0 4.34-1.2 6.99-3 8.82-.02.02-.04.05-.04.08 0 .1.09.1.19.1.13 0 .15 0 .24-.08.95-.82 2.02-2.21 2.71-4.32.44-1.37.66-2.99.66-4.6Z" id="r"&gt;&lt;/path&gt;&lt;path d="M4.21 5.34.66 9.73c-.08.1-.09.12-.09.16 0 .11.09.11.27.11h8.29l.86-2.49h-.25c-.25.75-.92 1.36-1.77 1.65-.16.05-.85.29-2.32.29H1.4l3.47-4.29c.07-.09.09-.12.09-.16s-.01-.05-.07-.14L1.64.4H5.6c1.14 0 3.44.07 4.14 1.94h.25L9.13 0H.84C.57 0 .56.01.56.32l3.65 5.02Z" id="g"&gt;&lt;/path&gt;&lt;path d="M3.241-1.582h2.142c.091 0 .259 0 .259-.168 0-.175-.161-.175-.259-.175H3.241v-2.149c0-.091 0-.259-.168-.259-.175 0-.175.161-.175.259v2.149H.749c-.091 0-.259 0-.259.168 0 .175.161.175.259.175h2.149V.567c0 .091 0 .259.168.259.175 0 .175-.161.175-.259v-2.149z" id="q"&gt;&lt;/path&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="f"&gt;&lt;/path&gt;&lt;path d="M5.376-2.352c.105 0 .266 0 .266-.175 0-.168-.168-.168-.259-.168H.749c-.091 0-.259 0-.259.168 0 .175.161.175.266.175h4.62zm.007 1.54c.091 0 .259 0 .259-.168 0-.175-.161-.175-.266-.175H.756c-.105 0-.266 0-.266.175 0 .168.168.168.259.168h4.634z" id="i"&gt;&lt;/path&gt;&lt;path d="M5.208-1.582c.112 0 .28 0 .28-.168 0-.175-.161-.175-.28-.175H1.036c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h4.172z" id="e"&gt;&lt;/path&gt;&lt;path d="M1.358-4.977c0-.105 0-.273-.168-.273-.175 0-.175.161-.175.273v6.454c0 .105 0 .273.168.273.175 0 .175-.161.175-.273v-6.454z" id="m"&gt;&lt;/path&gt;&lt;path d="M4.179-4.242c.063-.245.07-.287.462-.287.084 0 .182 0 .182-.147 0-.077-.056-.105-.105-.105-.168 0-.588.028-.756.028-.147 0-.385-.007-.539-.007-.175-.007-.378-.021-.553-.021-.049 0-.154 0-.154.147 0 .105.063.105.273.105.161 0 .189 0 .364.014.203.021.224.042.224.126 0 .049 0 .063-.028.161l-.805 3.206c-.133.525-.581.966-1.036.966-.098 0-.539-.021-.7-.364.406 0 .497-.329.497-.455 0-.196-.168-.301-.322-.301-.189 0-.469.154-.469.546 0 .455.427.77 1.015.77.686 0 1.463-.441 1.638-1.141l.812-3.241z" id="l"&gt;&lt;/path&gt;&lt;path d="M2.884-4.207c.063-.252.084-.322.728-.322.217 0 .287 0 .287-.154 0-.007-.007-.098-.119-.098-.161 0-.35.014-.518.021-.175.007-.385.007-.56.007-.147 0-.336-.007-.483-.007s-.315-.021-.455-.021c-.042 0-.147 0-.147.154 0 .098.084.098.224.098.007 0 .14 0 .266.014.147.014.161.028.161.098 0 .014 0 .049-.028.154L1.309-.546c-.063.238-.077.294-.616.294-.119 0-.21 0-.21.147C.483 0 .567 0 .693 0h3.521c.175 0 .182-.007.238-.14.07-.189.595-1.547.595-1.603 0-.021-.014-.098-.119-.098-.084 0-.098.035-.14.147-.266.665-.574 1.442-1.855 1.442h-.791c-.217 0-.224-.007-.224-.07 0-.007 0-.042.028-.147l.938-3.738z" id="d"&gt;&lt;/path&gt;&lt;path d="M2.268-4.375c0-.112-.084-.266-.28-.266-.189 0-.392.182-.392.385 0 .119.091.266.28.266.203 0 .392-.196.392-.385zM.84-.819c-.028.091-.063.175-.063.294 0 .329.28.595.665.595.7 0 1.008-.966 1.008-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.042-.133.119-.161.56-.469.847-.742.847-.14 0-.175-.091-.175-.245 0-.161.049-.294.112-.448.07-.189.147-.378.224-.56.063-.168.315-.805.343-.889.021-.07.042-.154.042-.224 0-.329-.28-.595-.665-.595-.693 0-1.015.952-1.015 1.071 0 .091.098.091.119.091.098 0 .105-.035.126-.112.182-.602.49-.854.749-.854.112 0 .175.056.175.245 0 .161-.042.266-.217.7L.84-.819z" id="h"&gt;&lt;/path&gt;&lt;path d="M3.073-4.375c0-.119-.091-.266-.28-.266-.203 0-.392.196-.392.385 0 .112.084.266.28.266.189 0 .392-.182.392-.385zM1.589.343c-.119.483-.49.889-.903.889-.091 0-.175-.014-.252-.042.182-.084.238-.252.238-.357C.672.665.539.574.399.574.182.574 0 .763 0 .987c0 .266.273.441.693.441S1.932 1.176 2.149.322l.63-2.506c.021-.077.035-.14.035-.245 0-.385-.329-.658-.749-.658-.777 0-1.225.973-1.225 1.071 0 .091.098.091.119.091.084 0 .091-.021.14-.126.175-.406.539-.84.945-.84.175 0 .238.119.238.343 0 .077-.014.175-.021.21L1.589.343z" id="j"&gt;&lt;/path&gt;&lt;path d="M1.743-.742c-.07.238-.301.616-.658.616-.021 0-.231 0-.378-.098.287-.091.308-.343.308-.385 0-.154-.119-.259-.28-.259-.196 0-.399.168-.399.427 0 .35.392.511.735.511.322 0 .609-.203.784-.497.168.371.553.497.833.497.805 0 1.232-.875 1.232-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.035-.133.119-.147.483-.567.847-.959.847-.28 0-.427-.189-.427-.455 0-.182.168-.819.364-1.596.14-.539.455-.714.686-.714.014 0 .231 0 .378.098-.224.063-.308.259-.308.385 0 .154.119.259.28.259s.392-.133.392-.427c0-.392-.448-.511-.728-.511-.35 0-.63.231-.784.497-.126-.287-.448-.497-.84-.497-.784 0-1.232.861-1.232 1.071 0 .091.098.091.119.091.091 0 .098-.028.133-.119.175-.546.616-.847.959-.847.231 0 .42.126.42.462 0 .14-.084.49-.147.728l-.238.959z" id="v"&gt;&lt;/path&gt;&lt;path d="M1.176-.616c.182-.182.308-.315.903-.791.147-.119.672-.539.875-.735.427-.42.693-.777.693-.861s-.091-.084-.119-.084c-.063 0-.084.014-.119.07-.217.322-.364.427-.532.427-.084 0-.189-.007-.399-.21-.238-.238-.392-.287-.553-.287-.56 0-.938.609-.938.819 0 .063.07.084.119.084.084 0 .098-.021.126-.098.105-.245.497-.259.609-.259.161 0 .343.042.441.063.385.084.434.084.609.084-.182.189-.308.315-.973.847-.546.434-.735.609-.868.749-.42.413-.623.721-.623.784C.427.07.518.07.546.07.616.07.63.056.665 0c.189-.266.406-.427.644-.427.084 0 .189.007.378.182.217.21.357.315.581.315.749 0 1.218-.847 1.218-1.085 0-.084-.077-.091-.119-.091-.084 0-.098.035-.126.112-.133.35-.546.518-.889.518-.161 0-.336-.035-.511-.077-.322-.07-.378-.07-.504-.07-.014 0-.119 0-.161.007z" id="p"&gt;&lt;/path&gt;&lt;path d="M3.31 2.4c0-.03 0-.05-.17-.22C1.89.92 1.57-.97 1.57-2.5c0-1.74.38-3.48 1.61-4.73.13-.12.13-.14.13-.17 0-.07-.04-.1-.1-.1-.1 0-1 .68-1.59 1.95C1.11-4.45.99-3.34.99-2.5c0 .78.11 1.99.66 3.12.6 1.23 1.46 1.88 1.56 1.88.06 0 .1-.03.1-.1z" id="t"&gt;&lt;/path&gt;&lt;path d="M2.89-2.5c0-.78-.11-1.99-.66-3.12C1.63-6.85.77-7.5.67-7.5c-.06 0-.1.04-.1.1 0 .03 0 .05.19.23.98.99 1.55 2.58 1.55 4.67C2.31-.79 1.94.97.7 2.23c-.13.12-.13.14-.13.17 0 .06.04.1.1.1.1 0 1-.68 1.59-1.95.51-1.1.63-2.21.63-3.05z" id="w"&gt;&lt;/path&gt;&lt;path d="M4.09-2.3h2.79c.14 0 .33 0 .33-.2s-.19-.2-.33-.2H4.09v-2.8c0-.14 0-.33-.2-.33s-.2.19-.2.33v2.8H.89c-.14 0-.33 0-.33.2s.19.2.33.2h2.8V.5c0 .14 0 .33.2.33s.2-.19.2-.33v-2.8z" id="s"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="c"&gt;&lt;/path&gt;&lt;path d="M5.18-3.73c.13 0 .49 0 .49-.34 0-.24-.21-.24-.39-.24H3C1.49-4.31.38-2.66.38-1.47.38-.59.97.11 1.88.11c1.18 0 2.51-1.21 2.51-2.75 0-.17 0-.65-.31-1.09h1.1zM1.89-.11C1.4-.11 1-.47 1-1.19c0-.3.12-1.12.47-1.71.42-.69 1.02-.83 1.36-.83.84 0 .92.66.92.97 0 .47-.2 1.29-.54 1.8-.39.59-.93.85-1.32.85z" id="o"&gt;&lt;/path&gt;&lt;path d="M7.63-6.06c.09-.36.11-.46.84-.46.26 0 .34 0 .34-.2 0-.11-.11-.11-.14-.11-.28 0-1 .03-1.28.03-.29 0-1-.03-1.29-.03-.08 0-.19 0-.19.2 0 .11.09.11.28.11.02 0 .21 0 .38.02.18.02.27.03.27.16 0 .04-.01.06-.04.19l-.6 2.44H3.15l.59-2.35c.09-.36.12-.46.84-.46.26 0 .34 0 .34-.2 0-.11-.11-.11-.14-.11-.28 0-1 .03-1.28.03-.29 0-1-.03-1.29-.03-.08 0-.19 0-.19.2 0 .11.09.11.28.11.02 0 .21 0 .38.02.18.02.27.03.27.16 0 .04-.01.07-.04.19L1.57-.78c-.1.39-.12.47-.91.47-.18 0-.27 0-.27.2 0 .11.12.11.14.11.28 0 .99-.03 1.27-.03.21 0 .43.01.64.01.22 0 .44.02.65.02.08 0 .2 0 .2-.2 0-.11-.09-.11-.28-.11-.37 0-.65 0-.65-.18 0-.06.02-.11.03-.17l.68-2.74h3.05C5.7-1.74 5.47-.79 5.43-.64c-.1.32-.29.33-.91.33-.15 0-.24 0-.24.2 0 .11.12.11.14.11.28 0 .99-.03 1.27-.03.21 0 .43.01.64.01.22 0 .44.02.65.02.08 0 .2 0 .2-.2 0-.11-.09-.11-.28-.11-.37 0-.65 0-.65-.18 0-.06.02-.11.03-.17l1.35-5.4z" id="b"&gt;&lt;/path&gt;&lt;path d="M2.87-6.83c0-.01 0-.11-.13-.11-.23 0-.96.08-1.22.1-.08.01-.19.02-.19.2 0 .12.09.12.24.12.48 0 .5.07.5.17l-.03.2L.59-.39c-.04.14-.04.16-.04.22 0 .23.2.28.29.28.16 0 .32-.12.37-.26l.19-.76.22-.9c.06-.22.12-.44.17-.67.02-.06.1-.39.11-.45.03-.09.34-.65.68-.92.22-.16.53-.35.96-.35s.54.34.54.7c0 .54-.38 1.63-.62 2.24-.08.23-.13.35-.13.55 0 .47.35.82.82.82.94 0 1.31-1.46 1.31-1.54 0-.1-.09-.1-.12-.1-.1 0-.1.03-.15.18-.15.53-.47 1.24-1.02 1.24-.17 0-.24-.1-.24-.33 0-.25.09-.49.18-.71.16-.43.61-1.62.61-2.2 0-.65-.4-1.07-1.15-1.07-.63 0-1.11.31-1.48.77l.78-3.18z" id="u"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 25.362h215.14V-.982H-2.394z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 25.362) scale(1.0038)"&gt;&lt;use x="2.00047" xlink:href="#b" y="-11.15969"&gt;&lt;/use&gt;&lt;use x="13.90294" xlink:href="#c" y="-11.15969"&gt;&lt;/use&gt;&lt;use x="24.45837" xlink:href="#d" y="-20.66018"&gt;&lt;/use&gt;&lt;use x="29.94386" xlink:href="#e" y="-20.66018"&gt;&lt;/use&gt;&lt;use x="36.19421" xlink:href="#f" y="-20.66018"&gt;&lt;/use&gt;&lt;use x="27.04203" xlink:href="#g" y="-18.65971"&gt;&lt;/use&gt;&lt;use x="25.84254" xlink:href="#h" y="-2.36082"&gt;&lt;/use&gt;&lt;use x="28.67111" xlink:href="#i" y="-2.36082"&gt;&lt;/use&gt;&lt;use x="34.81011" xlink:href="#f" y="-2.36082"&gt;&lt;/use&gt;&lt;use x="47.35189" xlink:href="#h" y="-20.66018"&gt;&lt;/use&gt;&lt;use x="43.48847" xlink:href="#g" y="-18.65971"&gt;&lt;/use&gt;&lt;use x="41.84733" xlink:href="#j" y="-2.36082"&gt;&lt;/use&gt;&lt;use x="45.5602" xlink:href="#i" y="-2.36082"&gt;&lt;/use&gt;&lt;use x="51.6992" xlink:href="#f" y="-2.36082"&gt;&lt;/use&gt;&lt;use x="57.35227" xlink:href="#k" y="-22.26016"&gt;&lt;/use&gt;&lt;use x="73.28678" xlink:href="#l" y="-15.0974"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path class="strokeonly" d="M61.89 11.753h22.525" fill="none"&gt;&lt;/path&gt;&lt;g transform="translate(-2.394 25.362) scale(1.0038)"&gt;&lt;use x="64.52505" xlink:href="#m" y="-7.71181"&gt;&lt;/use&gt;&lt;use x="66.89992" xlink:href="#h" y="-7.71181"&gt;&lt;/use&gt;&lt;use x="69.72849" xlink:href="#e" y="-7.71181"&gt;&lt;/use&gt;&lt;use x="75.97884" xlink:href="#j" y="-7.71181"&gt;&lt;/use&gt;&lt;use x="79.69271" xlink:href="#m" y="-7.71181"&gt;&lt;/use&gt;&lt;use x="82.06761" xlink:href="#n" y="-10.48919"&gt;&lt;/use&gt;&lt;use x="88.33402" xlink:href="#o" y="-11.15969"&gt;&lt;/use&gt;&lt;use x="94.40668" xlink:href="#p" y="-14.78824"&gt;&lt;/use&gt;&lt;use x="94.04834" xlink:href="#h" y="-8.55697"&gt;&lt;/use&gt;&lt;use x="99.01492" xlink:href="#o" y="-11.15969"&gt;&lt;/use&gt;&lt;use x="105.08758" xlink:href="#p" y="-14.78824"&gt;&lt;/use&gt;&lt;use x="104.72823" xlink:href="#h" y="-8.55697"&gt;&lt;/use&gt;&lt;use x="107.55781" xlink:href="#q" y="-8.55697"&gt;&lt;/use&gt;&lt;use x="113.69681" xlink:href="#f" y="-8.55697"&gt;&lt;/use&gt;&lt;use x="118.18353" xlink:href="#r" y="-22.26016"&gt;&lt;/use&gt;&lt;use x="126.37714" xlink:href="#s" y="-11.15969"&gt;&lt;/use&gt;&lt;use x="140.11142" xlink:href="#d" y="-20.66018"&gt;&lt;/use&gt;&lt;use x="137.57699" xlink:href="#g" y="-18.65971"&gt;&lt;/use&gt;&lt;use x="136.37747" xlink:href="#h" y="-2.36082"&gt;&lt;/use&gt;&lt;use x="139.20704" xlink:href="#i" y="-2.36082"&gt;&lt;/use&gt;&lt;use x="145.34604" xlink:href="#f" y="-2.36082"&gt;&lt;/use&gt;&lt;use x="150.99813" xlink:href="#t" y="-11.15969"&gt;&lt;/use&gt;&lt;use x="154.88766" xlink:href="#u" y="-11.15969"&gt;&lt;/use&gt;&lt;use x="160.64914" xlink:href="#v" y="-9.66009"&gt;&lt;/use&gt;&lt;use x="165.684" xlink:href="#o" y="-11.15969"&gt;&lt;/use&gt;&lt;use x="171.75663" xlink:href="#v" y="-14.78824"&gt;&lt;/use&gt;&lt;use x="171.39729" xlink:href="#h" y="-8.55697"&gt;&lt;/use&gt;&lt;use x="179.0138" xlink:href="#s" y="-11.15969"&gt;&lt;/use&gt;&lt;use x="189.01315" xlink:href="#u" y="-11.15969"&gt;&lt;/use&gt;&lt;use x="194.77462" xlink:href="#p" y="-9.66009"&gt;&lt;/use&gt;&lt;use x="199.38289" xlink:href="#o" y="-11.15969"&gt;&lt;/use&gt;&lt;use x="205.45552" xlink:href="#p" y="-14.78824"&gt;&lt;/use&gt;&lt;use x="205.09718" xlink:href="#h" y="-8.55697"&gt;&lt;/use&gt;&lt;use x="210.06279" xlink:href="#w" y="-11.15969"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$H=\sum\limits_{i=1}^{L-1}\sum\limits_{j=1}^{i}\left(
  \frac{J}{{|i-j|}^{\alpha}}\sigma_{i}^{z}\sigma_{i+1}^{z}
  \right)
  +\sum\limits_{i=1}^{L}\left(
    h_x\sigma_{i}^{x}
    +h_z\sigma_{i}^{z}
  \right)$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;with an optional cutoff radius for the interaction.&lt;/p&gt;
&lt;h4&gt;Heisenberg Model&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/Quantum_Heisenberg_model"&gt;Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="math"&gt;&lt;svg height="46.152" viewbox="0 0 473.39 34.614" width="473.39pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M4.13 11.49c0-.04-.02-.06-.04-.09-.46-.49-1.14-1.3-1.56-2.93-.23-.91-.32-1.94-.32-2.87 0-2.63.63-4.47 1.83-5.77.09-.09.09-.11.09-.13 0-.1-.08-.1-.12-.1-.15 0-.69.6-.82.75-1.02 1.21-1.67 3.01-1.67 5.24 0 1.42.25 3.43 1.56 5.12.1.12.75.88.93.88.04 0 .12 0 .12-.1z" id="j"&gt;&lt;/path&gt;&lt;path d="M3.05 5.6c0-1.42-.25-3.43-1.56-5.12C1.39.36.74-.4.56-.4c-.05 0-.12.02-.12.1 0 .04.02.07.06.1.48.52 1.13 1.33 1.54 2.92.23.91.32 1.94.32 2.87 0 1.01-.09 2.03-.35 3.01-.38 1.4-.97 2.2-1.48 2.76-.09.09-.09.11-.09.13 0 .08.07.1.12.1.15 0 .7-.61.82-.75C2.4 9.63 3.05 7.83 3.05 5.6Z" id="r"&gt;&lt;/path&gt;&lt;path d="M4.21 5.34.66 9.73c-.08.1-.09.12-.09.16 0 .11.09.11.27.11h8.29l.86-2.49h-.25c-.25.75-.92 1.36-1.77 1.65-.16.05-.85.29-2.32.29H1.4l3.47-4.29c.07-.09.09-.12.09-.16s-.01-.05-.07-.14L1.64.4H5.6c1.14 0 3.44.07 4.14 1.94h.25L9.13 0H.84C.57 0 .56.01.56.32l3.65 5.02Z" id="g"&gt;&lt;/path&gt;&lt;path d="M3.241-1.582h2.142c.091 0 .259 0 .259-.168 0-.175-.161-.175-.259-.175H3.241v-2.149c0-.091 0-.259-.168-.259-.175 0-.175.161-.175.259v2.149H.749c-.091 0-.259 0-.259.168 0 .175.161.175.259.175h2.149V.567c0 .091 0 .259.168.259.175 0 .175-.161.175-.259v-2.149z" id="n"&gt;&lt;/path&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="f"&gt;&lt;/path&gt;&lt;path d="M5.376-2.352c.105 0 .266 0 .266-.175 0-.168-.168-.168-.259-.168H.749c-.091 0-.259 0-.259.168 0 .175.161.175.266.175h4.62zm.007 1.54c.091 0 .259 0 .259-.168 0-.175-.161-.175-.266-.175H.756c-.105 0-.266 0-.266.175 0 .168.168.168.259.168h4.634z" id="i"&gt;&lt;/path&gt;&lt;path d="M5.208-1.582c.112 0 .28 0 .28-.168 0-.175-.161-.175-.28-.175H1.036c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h4.172z" id="e"&gt;&lt;/path&gt;&lt;path d="M2.884-4.207c.063-.252.084-.322.728-.322.217 0 .287 0 .287-.154 0-.007-.007-.098-.119-.098-.161 0-.35.014-.518.021-.175.007-.385.007-.56.007-.147 0-.336-.007-.483-.007s-.315-.021-.455-.021c-.042 0-.147 0-.147.154 0 .098.084.098.224.098.007 0 .14 0 .266.014.147.014.161.028.161.098 0 .014 0 .049-.028.154L1.309-.546c-.063.238-.077.294-.616.294-.119 0-.21 0-.21.147C.483 0 .567 0 .693 0h3.521c.175 0 .182-.007.238-.14.07-.189.595-1.547.595-1.603 0-.021-.014-.098-.119-.098-.084 0-.098.035-.14.147-.266.665-.574 1.442-1.855 1.442h-.791c-.217 0-.224-.007-.224-.07 0-.007 0-.042.028-.147l.938-3.738z" id="d"&gt;&lt;/path&gt;&lt;path d="M2.268-4.375c0-.112-.084-.266-.28-.266-.189 0-.392.182-.392.385 0 .119.091.266.28.266.203 0 .392-.196.392-.385zM.84-.819c-.028.091-.063.175-.063.294 0 .329.28.595.665.595.7 0 1.008-.966 1.008-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.042-.133.119-.161.56-.469.847-.742.847-.14 0-.175-.091-.175-.245 0-.161.049-.294.112-.448.07-.189.147-.378.224-.56.063-.168.315-.805.343-.889.021-.07.042-.154.042-.224 0-.329-.28-.595-.665-.595-.693 0-1.015.952-1.015 1.071 0 .091.098.091.119.091.098 0 .105-.035.126-.112.182-.602.49-.854.749-.854.112 0 .175.056.175.245 0 .161-.042.266-.217.7L.84-.819z" id="h"&gt;&lt;/path&gt;&lt;path d="M1.743-.742c-.07.238-.301.616-.658.616-.021 0-.231 0-.378-.098.287-.091.308-.343.308-.385 0-.154-.119-.259-.28-.259-.196 0-.399.168-.399.427 0 .35.392.511.735.511.322 0 .609-.203.784-.497.168.371.553.497.833.497.805 0 1.232-.875 1.232-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.035-.133.119-.147.483-.567.847-.959.847-.28 0-.427-.189-.427-.455 0-.182.168-.819.364-1.596.14-.539.455-.714.686-.714.014 0 .231 0 .378.098-.224.063-.308.259-.308.385 0 .154.119.259.28.259s.392-.133.392-.427c0-.392-.448-.511-.728-.511-.35 0-.63.231-.784.497-.126-.287-.448-.497-.84-.497-.784 0-1.232.861-1.232 1.071 0 .091.098.091.119.091.091 0 .098-.028.133-.119.175-.546.616-.847.959-.847.231 0 .42.126.42.462 0 .14-.084.49-.147.728l-.238.959z" id="l"&gt;&lt;/path&gt;&lt;path d="M3.892-2.639c.028-.098.028-.112.028-.154 0-.14-.112-.224-.231-.224-.077 0-.21.035-.287.168-.021.042-.077.266-.112.406l-.147.581c-.042.168-.259 1.05-.28 1.127-.007 0-.315.609-.861.609-.476 0-.476-.455-.476-.581 0-.378.161-.819.371-1.358.084-.224.119-.308.119-.427 0-.336-.287-.595-.665-.595-.707 0-1.022.952-1.022 1.071 0 .091.098.091.119.091.098 0 .105-.035.126-.112.175-.581.476-.854.756-.854.119 0 .175.077.175.245 0 .161-.063.315-.098.406-.336.854-.406 1.113-.406 1.421 0 .119 0 .448.273.672.217.182.511.217.7.217.28 0 .532-.105.763-.315-.091.385-.168.679-.462 1.029-.189.217-.469.448-.84.448-.049 0-.378 0-.525-.231.378-.042.378-.378.378-.385 0-.224-.203-.266-.273-.266C.84.35.609.49.609.812c0 .357.336.616.833.616.707 0 1.568-.546 1.785-1.421l.665-2.646z" id="p"&gt;&lt;/path&gt;&lt;path d="M1.176-.616c.182-.182.308-.315.903-.791.147-.119.672-.539.875-.735.427-.42.693-.777.693-.861s-.091-.084-.119-.084c-.063 0-.084.014-.119.07-.217.322-.364.427-.532.427-.084 0-.189-.007-.399-.21-.238-.238-.392-.287-.553-.287-.56 0-.938.609-.938.819 0 .063.07.084.119.084.084 0 .098-.021.126-.098.105-.245.497-.259.609-.259.161 0 .343.042.441.063.385.084.434.084.609.084-.182.189-.308.315-.973.847-.546.434-.735.609-.868.749-.42.413-.623.721-.623.784C.427.07.518.07.546.07.616.07.63.056.665 0c.189-.266.406-.427.644-.427.084 0 .189.007.378.182.217.21.357.315.581.315.749 0 1.218-.847 1.218-1.085 0-.084-.077-.091-.119-.091-.084 0-.098.035-.126.112-.133.35-.546.518-.889.518-.161 0-.336-.035-.511-.077-.322-.07-.378-.07-.504-.07-.014 0-.119 0-.161.007z" id="q"&gt;&lt;/path&gt;&lt;path d="M3.31 2.4c0-.03 0-.05-.17-.22C1.89.92 1.57-.97 1.57-2.5c0-1.74.38-3.48 1.61-4.73.13-.12.13-.14.13-.17 0-.07-.04-.1-.1-.1-.1 0-1 .68-1.59 1.95C1.11-4.45.99-3.34.99-2.5c0 .78.11 1.99.66 3.12.6 1.23 1.46 1.88 1.56 1.88.06 0 .1-.03.1-.1z" id="s"&gt;&lt;/path&gt;&lt;path d="M2.89-2.5c0-.78-.11-1.99-.66-3.12C1.63-6.85.77-7.5.67-7.5c-.06 0-.1.04-.1.1 0 .03 0 .05.19.23.98.99 1.55 2.58 1.55 4.67C2.31-.79 1.94.97.7 2.23c-.13.12-.13.14-.13.17 0 .06.04.1.1.1.1 0 1-.68 1.59-1.95.51-1.1.63-2.21.63-3.05z" id="u"&gt;&lt;/path&gt;&lt;path d="M4.09-2.3h2.79c.14 0 .33 0 .33-.2s-.19-.2-.33-.2H4.09v-2.8c0-.14 0-.33-.2-.33s-.2.19-.2.33v2.8H.89c-.14 0-.33 0-.33.2s.19.2.33.2h2.8V.5c0 .14 0 .33.2.33s.2-.19.2-.33v-2.8z" id="o"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="c"&gt;&lt;/path&gt;&lt;path d="M5.18-3.73c.13 0 .49 0 .49-.34 0-.24-.21-.24-.39-.24H3C1.49-4.31.38-2.66.38-1.47.38-.59.97.11 1.88.11c1.18 0 2.51-1.21 2.51-2.75 0-.17 0-.65-.31-1.09h1.1zM1.89-.11C1.4-.11 1-.47 1-1.19c0-.3.12-1.12.47-1.71.42-.69 1.02-.83 1.36-.83.84 0 .92.66.92.97 0 .47-.2 1.29-.54 1.8-.39.59-.93.85-1.32.85z" id="m"&gt;&lt;/path&gt;&lt;path d="M7.63-6.06c.09-.36.11-.46.84-.46.26 0 .34 0 .34-.2 0-.11-.11-.11-.14-.11-.28 0-1 .03-1.28.03-.29 0-1-.03-1.29-.03-.08 0-.19 0-.19.2 0 .11.09.11.28.11.02 0 .21 0 .38.02.18.02.27.03.27.16 0 .04-.01.06-.04.19l-.6 2.44H3.15l.59-2.35c.09-.36.12-.46.84-.46.26 0 .34 0 .34-.2 0-.11-.11-.11-.14-.11-.28 0-1 .03-1.28.03-.29 0-1-.03-1.29-.03-.08 0-.19 0-.19.2 0 .11.09.11.28.11.02 0 .21 0 .38.02.18.02.27.03.27.16 0 .04-.01.07-.04.19L1.57-.78c-.1.39-.12.47-.91.47-.18 0-.27 0-.27.2 0 .11.12.11.14.11.28 0 .99-.03 1.27-.03.21 0 .43.01.64.01.22 0 .44.02.65.02.08 0 .2 0 .2-.2 0-.11-.09-.11-.28-.11-.37 0-.65 0-.65-.18 0-.06.02-.11.03-.17l.68-2.74h3.05C5.7-1.74 5.47-.79 5.43-.64c-.1.32-.29.33-.91.33-.15 0-.24 0-.24.2 0 .11.12.11.14.11.28 0 .99-.03 1.27-.03.21 0 .43.01.64.01.22 0 .44.02.65.02.08 0 .2 0 .2-.2 0-.11-.09-.11-.28-.11-.37 0-.65 0-.65-.18 0-.06.02-.11.03-.17l1.35-5.4z" id="b"&gt;&lt;/path&gt;&lt;path d="M5.41-6.1c.08-.33.1-.42.65-.42.16 0 .27 0 .27-.19 0-.09-.06-.12-.14-.12-.25 0-.86.03-1.11.03-.33 0-1.14-.03-1.47-.03-.09 0-.21 0-.21.2 0 .11.08.11.34.11.23 0 .33 0 .58.02.24.03.31.06.31.2 0 .06-.02.13-.04.21L3.44-1.5C3.2-.53 2.52 0 2 0c-.26 0-.79-.1-.95-.62.03.01.1.01.12.01.39 0 .65-.34.65-.64 0-.32-.27-.42-.44-.42-.18 0-.67.12-.67.8 0 .62.53 1.09 1.32 1.09.92 0 1.96-.66 2.21-1.65L5.41-6.1z" id="k"&gt;&lt;/path&gt;&lt;path d="M2.87-6.83c0-.01 0-.11-.13-.11-.23 0-.96.08-1.22.1-.08.01-.19.02-.19.2 0 .12.09.12.24.12.48 0 .5.07.5.17l-.03.2L.59-.39c-.04.14-.04.16-.04.22 0 .23.2.28.29.28.16 0 .32-.12.37-.26l.19-.76.22-.9c.06-.22.12-.44.17-.67.02-.06.1-.39.11-.45.03-.09.34-.65.68-.92.22-.16.53-.35.96-.35s.54.34.54.7c0 .54-.38 1.63-.62 2.24-.08.23-.13.35-.13.55 0 .47.35.82.82.82.94 0 1.31-1.46 1.31-1.54 0-.1-.09-.1-.12-.1-.1 0-.1.03-.15.18-.15.53-.47 1.24-1.02 1.24-.17 0-.24-.1-.24-.33 0-.25.09-.49.18-.71.16-.43.61-1.62.61-2.2 0-.65-.4-1.07-1.15-1.07-.63 0-1.11.31-1.48.77l.78-3.18z" id="t"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 23.994h320.979V-.994H-2.394Z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 23.994) scale(1.00375)"&gt;&lt;use x="2.00047" xlink:href="#b" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="13.90294" xlink:href="#c" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="24.45837" xlink:href="#d" y="-19.2991"&gt;&lt;/use&gt;&lt;use x="29.94386" xlink:href="#e" y="-19.2991"&gt;&lt;/use&gt;&lt;use x="36.19421" xlink:href="#f" y="-19.2991"&gt;&lt;/use&gt;&lt;use x="27.04203" xlink:href="#g" y="-17.29863"&gt;&lt;/use&gt;&lt;use x="25.84254" xlink:href="#h" y="-.99974"&gt;&lt;/use&gt;&lt;use x="28.67111" xlink:href="#i" y="-.99974"&gt;&lt;/use&gt;&lt;use x="34.81011" xlink:href="#f" y="-.99974"&gt;&lt;/use&gt;&lt;use x="41.84734" xlink:href="#j" y="-17.89887"&gt;&lt;/use&gt;&lt;use x="46.43046" xlink:href="#k" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="51.97516" xlink:href="#l" y="-8.299"&gt;&lt;/use&gt;&lt;use x="57.00999" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="63.08366" xlink:href="#l" y="-13.42716"&gt;&lt;/use&gt;&lt;use x="62.72432" xlink:href="#h" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="68.11749" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="74.19116" xlink:href="#l" y="-13.42716"&gt;&lt;/use&gt;&lt;use x="73.83182" xlink:href="#h" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="76.66138" xlink:href="#n" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="82.80039" xlink:href="#f" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="89.5084" xlink:href="#o" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="99.50876" xlink:href="#k" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="105.05345" xlink:href="#p" y="-8.299"&gt;&lt;/use&gt;&lt;use x="109.86044" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="115.93309" xlink:href="#p" y="-14.60456"&gt;&lt;/use&gt;&lt;use x="115.57475" xlink:href="#h" y="-7.01119"&gt;&lt;/use&gt;&lt;use x="120.74008" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="126.81274" xlink:href="#p" y="-14.60456"&gt;&lt;/use&gt;&lt;use x="126.4544" xlink:href="#h" y="-7.01119"&gt;&lt;/use&gt;&lt;use x="129.28397" xlink:href="#n" y="-7.01119"&gt;&lt;/use&gt;&lt;use x="135.42297" xlink:href="#f" y="-7.01119"&gt;&lt;/use&gt;&lt;use x="142.131" xlink:href="#o" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="152.13036" xlink:href="#k" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="157.67603" xlink:href="#q" y="-8.299"&gt;&lt;/use&gt;&lt;use x="162.28329" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="168.35593" xlink:href="#q" y="-13.42716"&gt;&lt;/use&gt;&lt;use x="167.99759" xlink:href="#h" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="172.96419" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="179.03683" xlink:href="#q" y="-13.42716"&gt;&lt;/use&gt;&lt;use x="178.67849" xlink:href="#h" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="181.50706" xlink:href="#n" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="187.64606" xlink:href="#f" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="192.13281" xlink:href="#r" y="-17.89887"&gt;&lt;/use&gt;&lt;use x="198.93823" xlink:href="#o" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="212.67248" xlink:href="#d" y="-19.2991"&gt;&lt;/use&gt;&lt;use x="210.13707" xlink:href="#g" y="-17.29863"&gt;&lt;/use&gt;&lt;use x="208.93753" xlink:href="#h" y="-.99974"&gt;&lt;/use&gt;&lt;use x="211.7671" xlink:href="#i" y="-.99974"&gt;&lt;/use&gt;&lt;use x="217.9061" xlink:href="#f" y="-.99974"&gt;&lt;/use&gt;&lt;use x="223.55922" xlink:href="#s" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="227.44774" xlink:href="#t" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="233.2092" xlink:href="#l" y="-8.299"&gt;&lt;/use&gt;&lt;use x="238.24408" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="244.3167" xlink:href="#l" y="-13.42716"&gt;&lt;/use&gt;&lt;use x="243.95836" xlink:href="#h" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="251.57388" xlink:href="#o" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="261.57424" xlink:href="#t" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="267.33569" xlink:href="#p" y="-8.299"&gt;&lt;/use&gt;&lt;use x="272.14272" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="278.21533" xlink:href="#p" y="-14.60456"&gt;&lt;/use&gt;&lt;use x="277.85599" xlink:href="#h" y="-7.01119"&gt;&lt;/use&gt;&lt;use x="285.24367" xlink:href="#o" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="295.24403" xlink:href="#t" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="301.00547" xlink:href="#q" y="-8.299"&gt;&lt;/use&gt;&lt;use x="305.61377" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="311.68637" xlink:href="#q" y="-13.42716"&gt;&lt;/use&gt;&lt;use x="311.32703" xlink:href="#h" y="-7.19588"&gt;&lt;/use&gt;&lt;use x="316.29367" xlink:href="#u" y="-9.79861"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$H=\sum\limits_{i=1}^{L-1}\left(
  J_x\sigma_{i}^{x}\sigma_{i+1}^{x}
  +J_y\sigma_{i}^{y}\sigma_{i+1}^{y}
  +J_z\sigma_{i}^{z}\sigma_{i+1}^{z}
  \right)
  +\sum\limits_{i=1}^{L}\left(
    h_x\sigma_{i}^{x}
    +h_y\sigma_{i}^{y}
    +h_z\sigma_{i}^{z}
  \right)$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;h4&gt;Long-Range Disordered XY Spin Glass&lt;/h4&gt;
&lt;h3&gt;1D Bosonic Systems&lt;/h3&gt;
&lt;h4&gt;Bose-Hubbard Model (1D)&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="examples/bose_hubbard_1d.json"&gt;example input&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/Bose%E2%80%93Hubbard_model"&gt;Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="math"&gt;&lt;svg height="46.152" viewbox="0 0 315.17 34.614" width="315.17pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M3.241-1.582h2.142c.091 0 .259 0 .259-.168 0-.175-.161-.175-.259-.175H3.241v-2.149c0-.091 0-.259-.168-.259-.175 0-.175.161-.175.259v2.149H.749c-.091 0-.259 0-.259.168 0 .175.161.175.259.175h2.149V.567c0 .091 0 .259.168.259.175 0 .175-.161.175-.259v-2.149z" id="o"&gt;&lt;/path&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="h"&gt;&lt;/path&gt;&lt;path d="M3.535-1.274h-.238c-.021.154-.091.567-.182.637-.056.042-.595.042-.693.042H1.134c.735-.651.98-.847 1.4-1.176.518-.413 1.001-.847 1.001-1.512 0-.847-.742-1.365-1.638-1.365-.868 0-1.456.609-1.456 1.253 0 .357.301.392.371.392.168 0 .371-.119.371-.371 0-.126-.049-.371-.413-.371.217-.497.693-.651 1.022-.651.7 0 1.064.546 1.064 1.113 0 .609-.434 1.092-.658 1.344L.511-.273C.441-.21.441-.196.441 0h2.884l.21-1.274Z" id="s"&gt;&lt;/path&gt;&lt;path d="M5.376-2.352c.105 0 .266 0 .266-.175 0-.168-.168-.168-.259-.168H.749c-.091 0-.259 0-.259.168 0 .175.161.175.266.175h4.62zm.007 1.54c.091 0 .259 0 .259-.168 0-.175-.161-.175-.266-.175H.756c-.105 0-.266 0-.266.175 0 .168.168.168.259.168h4.634z" id="k"&gt;&lt;/path&gt;&lt;path d="M5.208-1.582c.112 0 .28 0 .28-.168 0-.175-.161-.175-.28-.175H1.036c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h4.172z" id="g"&gt;&lt;/path&gt;&lt;path d="M1.918-2.926c.105.014.175.021.385.077.224.063.392.105.525.105.273 0 .301-.21.301-.273 0-.056-.028-.273-.301-.273-.133 0-.301.042-.525.105-.21.056-.28.063-.385.077.014-.245.063-.539.098-.756.028-.14.091-.497.091-.742 0-.21-.098-.322-.273-.322-.147 0-.273.077-.273.322 0 .231.056.581.098.819.014.077.077.42.091.679-.105-.014-.175-.021-.385-.077C1.141-3.248.973-3.29.84-3.29c-.273 0-.301.21-.301.273 0 .056.028.273.301.273.133 0 .301-.042.525-.105.21-.056.28-.063.385-.077-.014.175-.063.399-.098.546-.091.434-.091.483-.091.847 0 1.351.133 2.786.154 2.926.007.063.021.105.119.105.105 0 .112-.042.126-.14 0-.007.056-.616.084-1.043.035-.616.063-1.232.063-1.848 0-.364 0-.413-.098-.861-.014-.077-.077-.357-.091-.532z" id="n"&gt;&lt;/path&gt;&lt;path d="M2.884-4.207c.063-.252.084-.322.728-.322.217 0 .287 0 .287-.154 0-.007-.007-.098-.119-.098-.161 0-.35.014-.518.021-.175.007-.385.007-.56.007-.147 0-.336-.007-.483-.007s-.315-.021-.455-.021c-.042 0-.147 0-.147.154 0 .098.084.098.224.098.007 0 .14 0 .266.014.147.014.161.028.161.098 0 .014 0 .049-.028.154L1.309-.546c-.063.238-.077.294-.616.294-.119 0-.21 0-.21.147C.483 0 .567 0 .693 0h3.521c.175 0 .182-.007.238-.14.07-.189.595-1.547.595-1.603 0-.021-.014-.098-.119-.098-.084 0-.098.035-.14.147-.266.665-.574 1.442-1.855 1.442h-.791c-.217 0-.224-.007-.224-.07 0-.007 0-.042.028-.147l.938-3.738z" id="f"&gt;&lt;/path&gt;&lt;path d="M4.949-4.018c.07-.273.182-.497.742-.511.035 0 .14-.007.14-.154 0-.042-.035-.098-.105-.098-.224 0-.49.028-.721.028s-.525-.028-.735-.028c-.035 0-.14 0-.14.154 0 .091.091.098.154.098.329.007.448.112.448.287 0 .035-.007.07-.014.098-.105.455-.616 2.562-.707 2.779C3.619-.469 2.8-.112 2.226-.112c-.469 0-.966-.238-.966-.931 0-.168.021-.336.063-.497l.679-2.695c.063-.238.077-.294.616-.294.119 0 .21 0 .21-.154 0-.028-.021-.098-.112-.098-.203 0-.714.028-.917.028-.119 0-.364 0-.483-.007-.14-.007-.308-.021-.441-.021-.042 0-.147 0-.147.154 0 .098.084.098.224.098.007 0 .14 0 .266.014.147.014.161.028.161.098 0 .042-.07.315-.112.469l-.154.616-.399 1.603c-.07.287-.07.343-.07.483C.644-.378 1.358.14 2.198.14c.966 0 1.904-.784 2.135-1.701l.616-2.457z" id="r"&gt;&lt;/path&gt;&lt;path d="M2.268-4.375c0-.112-.084-.266-.28-.266-.189 0-.392.182-.392.385 0 .119.091.266.28.266.203 0 .392-.196.392-.385zM.84-.819c-.028.091-.063.175-.063.294 0 .329.28.595.665.595.7 0 1.008-.966 1.008-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.042-.133.119-.161.56-.469.847-.742.847-.14 0-.175-.091-.175-.245 0-.161.049-.294.112-.448.07-.189.147-.378.224-.56.063-.168.315-.805.343-.889.021-.07.042-.154.042-.224 0-.329-.28-.595-.665-.595-.693 0-1.015.952-1.015 1.071 0 .091.098.091.119.091.098 0 .105-.035.126-.112.182-.602.49-.854.749-.854.112 0 .175.056.175.245 0 .161-.042.266-.217.7L.84-.819z" id="j"&gt;&lt;/path&gt;&lt;path d="M6.59-2.3c.17 0 .35 0 .35-.2s-.18-.2-.35-.2H1.18c-.17 0-.35 0-.35.2s.18.2.35.2h5.41z" id="d"&gt;&lt;/path&gt;&lt;path d="M3.31 2.4c0-.03 0-.05-.17-.22C1.89.92 1.57-.97 1.57-2.5c0-1.74.38-3.48 1.61-4.73.13-.12.13-.14.13-.17 0-.07-.04-.1-.1-.1-.1 0-1 .68-1.59 1.95C1.11-4.45.99-3.34.99-2.5c0 .78.11 1.99.66 3.12.6 1.23 1.46 1.88 1.56 1.88.06 0 .1-.03.1-.1z" id="u"&gt;&lt;/path&gt;&lt;path d="M2.89-2.5c0-.78-.11-1.99-.66-3.12C1.63-6.85.77-7.5.67-7.5c-.06 0-.1.04-.1.1 0 .03 0 .05.19.23.98.99 1.55 2.58 1.55 4.67C2.31-.79 1.94.97.7 2.23c-.13.12-.13.14-.13.17 0 .06.04.1.1.1.1 0 1-.68 1.59-1.95.51-1.1.63-2.21.63-3.05z" id="w"&gt;&lt;/path&gt;&lt;path d="M4.09-2.3h2.79c.14 0 .33 0 .33-.2s-.19-.2-.33-.2H4.09v-2.8c0-.14 0-.33-.2-.33s-.2.19-.2.33v2.8H.89c-.14 0-.33 0-.33.2s.19.2.33.2h2.8V.5c0 .14 0 .33.2.33s.2-.19.2-.33v-2.8z" id="p"&gt;&lt;/path&gt;&lt;path d="M2.94-6.4c0-.24 0-.26-.23-.26-.62.64-1.5.64-1.82.64v.31c.2 0 .79 0 1.31-.26v5.18c0 .36-.03.48-.93.48H.95V0c.35-.03 1.22-.03 1.62-.03s1.27 0 1.62.03v-.31h-.32c-.9 0-.93-.11-.93-.48V-6.4Z" id="v"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="c"&gt;&lt;/path&gt;&lt;path d="M5.15 17.48c.02.01.11.11.12.11h.22c.03 0 .11-.01.11-.1 0-.04-.02-.06-.04-.09-.36-.36-.9-.91-1.52-2.01C2.96 13.47 2.56 11 2.56 8.6c0-4.44 1.26-7.05 3.01-8.82.03-.03.03-.06.03-.08 0-.1-.07-.1-.19-.1-.13 0-.15 0-.24.08C4.22.5 3.15 1.89 2.46 4c-.43 1.32-.66 2.93-.66 4.59 0 2.37.43 5.05 2 7.37.27.39.64.8.64.81.1.12.24.28.32.35l.39.36z" id="l"&gt;&lt;/path&gt;&lt;path d="M4.16 8.59c0-2.87-.67-5.92-2.64-8.17-.14-.16-.51-.55-.75-.76C.7-.4.68-.4.55-.4c-.1 0-.19 0-.19.1 0 .04.04.08.06.1.34.35.88.9 1.5 2C3 3.72 3.4 6.19 3.4 8.59c0 4.34-1.2 6.99-3 8.82-.02.02-.04.05-.04.08 0 .1.09.1.19.1.13 0 .15 0 .24-.08.95-.82 2.02-2.21 2.71-4.32.44-1.37.66-2.99.66-4.6Z" id="q"&gt;&lt;/path&gt;&lt;path d="M4.21 5.34.66 9.73c-.08.1-.09.12-.09.16 0 .11.09.11.27.11h8.29l.86-2.49h-.25c-.25.75-.92 1.36-1.77 1.65-.16.05-.85.29-2.32.29H1.4l3.47-4.29c.07-.09.09-.12.09-.16s-.01-.05-.07-.14L1.64.4H5.6c1.14 0 3.44.07 4.14 1.94h.25L9.13 0H.84C.57 0 .56.01.56.32l3.65 5.02Z" id="i"&gt;&lt;/path&gt;&lt;path d="M7.63-6.06c.09-.36.11-.46.84-.46.26 0 .34 0 .34-.2 0-.11-.11-.11-.14-.11-.28 0-1 .03-1.28.03-.29 0-1-.03-1.29-.03-.08 0-.19 0-.19.2 0 .11.09.11.28.11.02 0 .21 0 .38.02.18.02.27.03.27.16 0 .04-.01.06-.04.19l-.6 2.44H3.15l.59-2.35c.09-.36.12-.46.84-.46.26 0 .34 0 .34-.2 0-.11-.11-.11-.14-.11-.28 0-1 .03-1.28.03-.29 0-1-.03-1.29-.03-.08 0-.19 0-.19.2 0 .11.09.11.28.11.02 0 .21 0 .38.02.18.02.27.03.27.16 0 .04-.01.07-.04.19L1.57-.78c-.1.39-.12.47-.91.47-.18 0-.27 0-.27.2 0 .11.12.11.14.11.28 0 .99-.03 1.27-.03.21 0 .43.01.64.01.22 0 .44.02.65.02.08 0 .2 0 .2-.2 0-.11-.09-.11-.28-.11-.37 0-.65 0-.65-.18 0-.06.02-.11.03-.17l.68-2.74h3.05C5.7-1.74 5.47-.79 5.43-.64c-.1.32-.29.33-.91.33-.15 0-.24 0-.24.2 0 .11.12.11.14.11.28 0 .99-.03 1.27-.03.21 0 .43.01.64.01.22 0 .44.02.65.02.08 0 .2 0 .2-.2 0-.11-.09-.11-.28-.11-.37 0-.65 0-.65-.18 0-.06.02-.11.03-.17l1.35-5.4z" id="b"&gt;&lt;/path&gt;&lt;path d="M5.41-6.1c.08-.33.1-.42.65-.42.16 0 .27 0 .27-.19 0-.09-.06-.12-.14-.12-.25 0-.86.03-1.11.03-.33 0-1.14-.03-1.47-.03-.09 0-.21 0-.21.2 0 .11.08.11.34.11.23 0 .33 0 .58.02.24.03.31.06.31.2 0 .06-.02.13-.04.21L3.44-1.5C3.2-.53 2.52 0 2 0c-.26 0-.79-.1-.95-.62.03.01.1.01.12.01.39 0 .65-.34.65-.64 0-.32-.27-.42-.44-.42-.18 0-.67.12-.67.8 0 .62.53 1.09 1.32 1.09.92 0 1.96-.66 2.21-1.65L5.41-6.1z" id="e"&gt;&lt;/path&gt;&lt;path d="M2.39-6.83c0-.01 0-.11-.13-.11-.23 0-.96.08-1.22.1-.08.01-.19.02-.19.2 0 .12.09.12.24.12.48 0 .5.07.5.17 0 .07-.09.41-.14.62L.63-2.47c-.12.5-.16.66-.16 1.01C.47-.51 1 .11 1.74.11c1.18 0 2.41-1.49 2.41-2.93 0-.91-.53-1.6-1.33-1.6-.46 0-.87.29-1.17.6l.74-3.01zm-.94 3.78c.06-.22.06-.24.15-.35.49-.65.94-.8 1.2-.8.36 0 .63.3.63.94 0 .59-.33 1.74-.51 2.12-.33.67-.79 1.03-1.18 1.03-.34 0-.67-.27-.67-1.01 0-.19 0-.38.16-1.01l.22-.92z" id="m"&gt;&lt;/path&gt;&lt;path d="M.88-.59c-.03.15-.09.38-.09.43 0 .18.14.27.29.27.12 0 .3-.08.37-.28.01-.02.13-.49.19-.74l.22-.9c.06-.22.12-.44.17-.67.04-.17.12-.46.13-.5.15-.31.68-1.22 1.63-1.22.45 0 .54.37.54.7 0 .62-.49 1.9-.65 2.33-.09.23-.1.35-.1.46 0 .47.35.82.82.82.94 0 1.31-1.46 1.31-1.54 0-.1-.09-.1-.12-.1-.1 0-.1.03-.15.18-.2.68-.53 1.24-1.02 1.24-.17 0-.24-.1-.24-.33 0-.25.09-.49.18-.71.19-.53.61-1.63.61-2.2 0-.67-.43-1.07-1.15-1.07-.9 0-1.39.64-1.56.87-.05-.56-.46-.87-.92-.87s-.65.39-.75.57c-.16.34-.3.93-.3.97 0 .1.1.1.12.1.1 0 .11-.01.17-.23.17-.71.37-1.19.73-1.19.2 0 .31.13.31.46 0 .21-.03.32-.16.84L.88-.59z" id="t"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 23.994h215.5V-.994h-215.5z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 23.994) scale(1.00375)"&gt;&lt;use x="2.00047" xlink:href="#b" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="13.90294" xlink:href="#c" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="24.45838" xlink:href="#d" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="32.23644" xlink:href="#e" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="40.40996" xlink:href="#f" y="-19.2991"&gt;&lt;/use&gt;&lt;use x="45.89545" xlink:href="#g" y="-19.2991"&gt;&lt;/use&gt;&lt;use x="52.1458" xlink:href="#h" y="-19.2991"&gt;&lt;/use&gt;&lt;use x="42.99262" xlink:href="#i" y="-17.29863"&gt;&lt;/use&gt;&lt;use x="41.79313" xlink:href="#j" y="-.99974"&gt;&lt;/use&gt;&lt;use x="44.6227" xlink:href="#k" y="-.99974"&gt;&lt;/use&gt;&lt;use x="50.7617" xlink:href="#h" y="-.99974"&gt;&lt;/use&gt;&lt;use x="57.79894" xlink:href="#l" y="-20.89908"&gt;&lt;/use&gt;&lt;use x="63.77025" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="68.06226" xlink:href="#n" y="-14.60456"&gt;&lt;/use&gt;&lt;use x="68.06226" xlink:href="#j" y="-7.01119"&gt;&lt;/use&gt;&lt;use x="72.22885" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="76.52086" xlink:href="#j" y="-8.299"&gt;&lt;/use&gt;&lt;use x="79.35043" xlink:href="#o" y="-8.299"&gt;&lt;/use&gt;&lt;use x="85.48943" xlink:href="#h" y="-8.299"&gt;&lt;/use&gt;&lt;use x="92.19745" xlink:href="#p" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="102.19681" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="106.48881" xlink:href="#n" y="-14.60456"&gt;&lt;/use&gt;&lt;use x="106.48881" xlink:href="#j" y="-7.01119"&gt;&lt;/use&gt;&lt;use x="109.31838" xlink:href="#o" y="-7.01119"&gt;&lt;/use&gt;&lt;use x="115.45739" xlink:href="#h" y="-7.01119"&gt;&lt;/use&gt;&lt;use x="119.94311" xlink:href="#m" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="124.23511" xlink:href="#j" y="-8.299"&gt;&lt;/use&gt;&lt;use x="127.56458" xlink:href="#q" y="-20.89908"&gt;&lt;/use&gt;&lt;use x="135.75819" xlink:href="#p" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="146.95799" xlink:href="#r" y="-13.73631"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path class="strokeonly" d="M144.02 11.741h6.175" fill="none"&gt;&lt;/path&gt;&lt;g transform="translate(-2.394 23.994) scale(1.00375)"&gt;&lt;use x="148.06412" xlink:href="#s" y="-6.35072"&gt;&lt;/use&gt;&lt;use x="159.75781" xlink:href="#f" y="-19.2991"&gt;&lt;/use&gt;&lt;use x="157.22238" xlink:href="#i" y="-17.29863"&gt;&lt;/use&gt;&lt;use x="156.02286" xlink:href="#j" y="-.99974"&gt;&lt;/use&gt;&lt;use x="158.85243" xlink:href="#k" y="-.99974"&gt;&lt;/use&gt;&lt;use x="164.99144" xlink:href="#h" y="-.99974"&gt;&lt;/use&gt;&lt;use x="170.64453" xlink:href="#t" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="176.6469" xlink:href="#j" y="-8.299"&gt;&lt;/use&gt;&lt;use x="179.97539" xlink:href="#u" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="183.86492" xlink:href="#t" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="189.86729" xlink:href="#j" y="-8.299"&gt;&lt;/use&gt;&lt;use x="195.41808" xlink:href="#d" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="205.41844" xlink:href="#v" y="-9.79861"&gt;&lt;/use&gt;&lt;use x="210.41845" xlink:href="#w" y="-9.79861"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$H=-J\sum\limits_{i=1}^{L-1}\left(
  b_{i}^{\dagger}b_{i+1}
  +b_{i+1}^{\dagger}b_{i}
\right)
+\frac{U}{2}\sum\limits_{i=1}^{L}
n_i(n_i-1)$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;A new model can be added by adding it to the &lt;code&gt;models&lt;/code&gt; source folder (take inspiration from &lt;a href="https://github.com/f-koehler/dmrg/blob/main/mpskit/models/transverse_ising_1d.hpp"&gt;&lt;code&gt;transverse_ising_1d.hpp&lt;/code&gt;&lt;/a&gt;, &lt;a href="https://github.com/f-koehler/dmrg/blob/main/mpskit/models/transverse_ising_1d.cpp"&gt;&lt;code&gt;transverse_ising_1d.cpp&lt;/code&gt;&lt;/a&gt;, etc.).
Afterwards it has to be registered in the model registry (see &lt;a href="https://github.com/f-koehler/dmrg/blob/main/mpskit/models/registry.cpp"&gt;&lt;code&gt;registry.cpp&lt;/code&gt;&lt;/a&gt;).&lt;/p&gt;
&lt;h2&gt;Dependencies&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cmake&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gcc&amp;gt;=8&lt;/code&gt; or &lt;code&gt;clang&amp;gt;=6&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;boost&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hdf5&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Compilation&lt;/h2&gt;
&lt;p&gt;Compilation of the project is an easy two-step process.&lt;/p&gt;
&lt;h3&gt;1. Configure the project&lt;/h3&gt;
&lt;p&gt;Run&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;cmake -B build -DCMAKE_BUILD_TYPE=Release&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;from the project directory to create a &lt;code&gt;build/&lt;/code&gt; directory.
You can specify the C++ compiler by setting the &lt;code&gt;CXX&lt;/code&gt; environment variable, e.g. &lt;code&gt;export CXX=clang++&lt;/code&gt;, before invoking the CMake command.&lt;/p&gt;
&lt;p&gt;If you are developing based on this you might want to create a Debug build for testing instead (not recommended for actual simulation due to reduced performance).
In order to achieve this replace the CMake command above with&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;cmake -B build -DCMAKE_BUILD_TYPE=Debug&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h3&gt;2. Compile the code&lt;/h3&gt;
&lt;p&gt;After step one just run&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;cmake --build build&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;to compile the code.
The &lt;code&gt;build/&lt;/code&gt; folder will then contain the &lt;code&gt;mpskit&lt;/code&gt; executable.&lt;/p&gt;
&lt;h2&gt;Running the program&lt;/h2&gt;
&lt;p&gt;You can consult &lt;code&gt;mpskit --help&lt;/code&gt; to see the command line options this programs has to offer.&lt;/p&gt;</content><category term="projects"></category><category term="bose-hubbard"></category><category term="dmrg"></category><category term="ising-model"></category><category term="ising-model-2d"></category><category term="matrix-product-states"></category><category term="mps"></category></entry><entry><title>Benchmarking and Frequency Scaling</title><link href="https://fkoehler.org/2021/11/benchmarking-frequency-scaling.html" rel="alternate"></link><published>2021-11-05T11:31:00+01:00</published><updated>2021-11-05T11:31:00+01:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2021-11-05:/2021/11/benchmarking-frequency-scaling.html</id><summary type="html">&lt;p&gt;In some benchmarking scenarios it might be necessary to disable &lt;abbr title="Central Processing Unit"&gt;CPU&lt;/abbr&gt; frequency scaling. I explain how to achieve this easily using the &lt;code&gt;cpupower&lt;/code&gt; tool.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Modern &lt;abbr title="Central Processing Units"&gt;CPUs&lt;/abbr&gt; employ frequency scaling techniques to adapt the frequency of their cores depending on the number of active cores as well as temperature and power constraints.
In some scenarios this is undesirable when benchmarking the performance of a program.
I recently encountered this problem when trying to benchmark a scientific code.
I wanted to investigate its performance measured by its execution time in different parameter regimes.
Since, the program under consideration is single-threaded it seems only natural to run multiple instances at once.
Unfortunately, this leads to the aforementioned issue.
Some runs might end earlier than others such that the number of active &lt;abbr title="Central Processing Unit"&gt;CPU&lt;/abbr&gt; cores reduces, and the active cores can run at a higher frequency.
This would distort the runtime results since the program would suddenly run faster on these cores.
So I explored how I could limit the &lt;abbr title="Central Processing Unit"&gt;CPU&lt;/abbr&gt; to a fixed maximum frequency that it can run at independent of the number of active jobs.&lt;/p&gt;
&lt;p&gt;The first idea is to enter the &lt;abbr title="Unified Extensible Firmware Interface"&gt;UEFI&lt;/abbr&gt; and disabling the frequency scaling and turbo boost altogether.
On my work machine sporting an &lt;a href="https://ark.intel.com/content/www/us/en/ark/products/134895/intel-core-i59500-processor-9m-cache-up-to-4-40-ghz.html"&gt;Intel i5-9500&lt;/a&gt; this leads to all cores only running at the base frequency of 3GHz.
This potentially leaves a lot of performance on the table.&lt;/p&gt;
&lt;p&gt;A better way is to use the &lt;code&gt;cpupower&lt;/code&gt; tool to limit the maximum frequency the &lt;abbr title="Central Processing Unit"&gt;CPU&lt;/abbr&gt; cores get boost to.
But what frequency should you specify here?
To answer this I ran one compute job per physical &lt;abbr title="Central Processing Unit"&gt;CPU&lt;/abbr&gt; core — six jobs in my case.
This will yield the maximum load the &lt;abbr title="Central Processing Unit"&gt;CPU&lt;/abbr&gt; can encounter during the benchmark.
&lt;a href="https://en.wikipedia.org/wiki/Hyper-threading"&gt;Hyper-threading&lt;/a&gt; is not available on my machine and the code performance scales differently across these logical cores such that it is best avoided in my case.
I monitored the &lt;abbr title="Central Processing Unit"&gt;CPU&lt;/abbr&gt; frequency using the command&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;watch -n 0.5 -x sh -c &lt;span class="hljs-string"&gt;"cat /proc/cpuinfo | grep MHz"&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;and saw that initially the &lt;abbr title="Central Processing Unit"&gt;CPU&lt;/abbr&gt; cores boosted above 4GHz.
However, as the temperature of the cores increased (which I monitored using the excellent &lt;a href="https://github.com/aristocratos/btop"&gt;&lt;code&gt;btop&lt;/code&gt;&lt;/a&gt;) the frequency dropped.
Therefore, I waited one hour for the system to reach a thermal equilibrium where the temperature is settled, and the &lt;abbr title="Central Processing Unit"&gt;CPU&lt;/abbr&gt; frequency would only fluctuate on a very small scale (in my case between 3640MHz and 3650MHz).
From these observations I decided to run my &lt;abbr title="Central Processing Unit"&gt;CPU&lt;/abbr&gt; at 3600MHz leaving a small buffer should the frequency drop a bit more in very long runs (in the order of a few days).&lt;/p&gt;
&lt;p&gt;The maximum frequency can than be set using the command&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;sudo cpupower frequency-set --max 3600MHz --governor performance&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;On my system it was important to specify the &lt;abbr title="Central Processing Unit"&gt;CPU&lt;/abbr&gt; frequency scaling governor.
Otherwise, the limit would only be effective when exploiting all cores.
The cores could still exceed this limit if not all of them were active.&lt;/p&gt;
&lt;p&gt;It might be that on your system these governors are called a little different.
Calling &lt;code&gt;cpupower frequency-info&lt;/code&gt; will list the available governors and also show you the hardware frequency limits.
Also, there exist other ways to influence &lt;abbr title="Central Processing Unit"&gt;CPU&lt;/abbr&gt; frequency behavior which are beyond the scope of this short blog post.
However, as usual the &lt;a href="https://wiki.archlinux.org/title/CPU_frequency_scaling"&gt;Archlinux Wiki&lt;/a&gt; has some nice information on this topic!&lt;/p&gt;</content><category term="HPC"></category><category term="benchmark"></category><category term="scientific code"></category><category term="hpc"></category><category term="frequency scaling"></category><category term="turbo boost"></category><category term="cpupower"></category></entry><entry><title>Refactoring a Large Snakefile</title><link href="https://fkoehler.org/2021/10/refactoring-a-large-snakefile.html" rel="alternate"></link><published>2021-10-22T13:53:00+02:00</published><updated>2021-10-22T13:53:00+02:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2021-10-22:/2021/10/refactoring-a-large-snakefile.html</id><summary type="html">&lt;p&gt;I describe how I simplified my life with a little restructuring of a complex &lt;code&gt;Snakefile&lt;/code&gt;.&lt;/p&gt;</summary><content type="html">&lt;p&gt;I really enjoy using &lt;a href="https://snakemake.readthedocs.io/en/stable/"&gt;snakemake&lt;/a&gt; for my analysis workflows in my PhD projects.
However, in a current project of mine the &lt;code&gt;Snakefile&lt;/code&gt; rapidly grew in complexity due to the addition of more and more analyses.
This lead to two problems&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The &lt;code&gt;Snakefile&lt;/code&gt; quickly became hard to read and maintain.&lt;/li&gt;
&lt;li&gt;The &lt;a href="https://en.wikipedia.org/wiki/Andrew_File_System"&gt;&lt;abbr title="Andrew File System"&gt;AFS&lt;/abbr&gt;&lt;/a&gt; the universities was problematic.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Modularizing the Snakefile&lt;/h2&gt;
&lt;p&gt;Initially, my project structure looked as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;project/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── config.yaml&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── Snakefile&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── .snakemake/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   ├── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   ├── metadata&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   └── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── dataset1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── dataset2&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── dataset3&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;└── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;There was only one main &lt;code&gt;Snakefile&lt;/code&gt; containing all analysis that ran across multiple datasets.
&lt;code&gt;snakemake&lt;/code&gt; stores all its files (metadata, lock files, etc.) in the &lt;code&gt;.snakemake&lt;/code&gt; directory.
First, I wanted to tackle the issue of readability/maintainability.
My workflow consists of multiple different types of analyses each consisting of potentially multiple subtasks.
However, these analyses are different from each other or in the language of &lt;code&gt;snakemake&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The full &lt;abbr title="directed acyclic graph"&gt;DAG&lt;/abbr&gt; of jobs consists of multiple disconnected &lt;abbr title="directed acyclic graphs"&gt;DAGs&lt;/abbr&gt; for each analysis.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Therefore, it makes a sense to place all independent analyses in their own &lt;code&gt;Snakefile&lt;/code&gt; leading to the following directory structure:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;project/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── config.yaml&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── Snakefile&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── Snakefiles/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   ├── analysis1/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   │   └── Snakefile&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   ├── analysis2/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   │   └── Snakefile&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   └── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── .snakemake/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   ├── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;12&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   ├── metadata&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;13&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   └── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;14&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── dataset1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;15&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── dataset2&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;16&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;└── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;I added a rule in the &lt;code&gt;Snakefile&lt;/code&gt; for each analysis that would depend on all resulting files of the analysis such that I could reference in a main &lt;code&gt;Snakefile&lt;/code&gt; in the root of the project.
The rule I added looks something like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;rule analysis1_all:&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    input:&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    output:&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ".analysis1.all"&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    shell:&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        "touch {output}"&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;The main &lt;code&gt;Snakefile&lt;/code&gt; can then be written as follows&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;configfile: "config.yaml"&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;include: "Snakefiles/analysis1/Snakefile"&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;include: "Snakefiles/analysis2/Snakefile"&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;…&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;rule all:&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    input:&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ".analysis1.all",&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ".analysis2.all",&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;This makes maintaining the project a lot easier.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;project/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── config.yaml&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── Snakefile&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── Snakefiles/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   ├── analysis1/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   │   └── Snakefile&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   ├── analysis2/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   │   └── Snakefile&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   └── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── .snakemake → .snakecache/analysis1/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── .snakecache/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;12&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   ├── analysis1/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;13&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   │   ├── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;14&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   │   ├── metadata&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;15&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   │   └── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;16&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   ├── analysis2/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;17&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   │   ├── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;18&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   │   ├── metadata&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;19&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   │   └── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;20&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;│   └── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;21&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── dataset1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;22&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── dataset2&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;23&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;└── …&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;</content><category term="Python"></category><category term="snakemake"></category><category term="snakefile"></category><category term="python"></category></entry><entry><title>code2html</title><link href="https://fkoehler.org/projects/code2html.html" rel="alternate"></link><published>2021-10-16T22:28:15+02:00</published><updated>2021-10-16T22:28:15+02:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2021-10-16:/projects/code2html.html</id><summary type="html">&lt;p&gt;Small JS library to render code to HTML using various backends.&lt;/p&gt;</summary><content type="html">&lt;h1&gt;code2html&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://github.com/f-koehler/code2html/actions/workflows/node.js.yml"&gt;&lt;img alt="Node.js CI" src="https://github.com/f-koehler/code2html/actions/workflows/node.js.yml/badge.svg"/&gt;&lt;/a&gt;
&lt;a href="https://www.npmjs.com/package/code2html"&gt;&lt;img alt="npm" src="https://img.shields.io/npm/v/code2html"/&gt;&lt;/a&gt;
&lt;a href="https://github.com/f-koehler/code2html/blob/main/LICENSE.txt"&gt;&lt;img alt="NPM" src="https://img.shields.io/npm/l/code2html"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Render source code to HTML using Prism.js or Highlight.js.&lt;/p&gt;
&lt;p&gt;For instructions please consult the help message &lt;code&gt;-h/--help&lt;/code&gt; for now.&lt;/p&gt;</content><category term="projects"></category><category term="highlightjs"></category><category term="html"></category><category term="javascript"></category><category term="prismjs"></category><category term="pygments"></category><category term="syntax-highlighting"></category></entry><entry><title>pelican-syntax-highlighting</title><link href="https://fkoehler.org/projects/pelican-syntax-highlighting.html" rel="alternate"></link><published>2021-10-15T08:09:10+02:00</published><updated>2021-10-15T08:09:10+02:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2021-10-15:/projects/pelican-syntax-highlighting.html</id><summary type="html">&lt;p&gt;Syntax highlighting for your pelican site using various backends.&lt;/p&gt;</summary><content type="html">&lt;h1&gt;Syntax Highlighting: A Plugin for Pelican&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://github.com/f-koehler/pelican-syntax-highlighting/actions/workflows/main.yml"&gt;&lt;img alt="Build Status" src="https://github.com/f-koehler/pelican-syntax-highlighting/actions/workflows/main.yml/badge.svg"/&gt;&lt;/a&gt;
&lt;a href="https://pypi.org/project/pelican-syntax-highlighting/"&gt;&lt;img alt="PyPI Version" src="https://img.shields.io/pypi/v/pelican-syntax-highlighting"/&gt;&lt;/a&gt;
&lt;img alt="License" src="https://img.shields.io/pypi/l/pelican-syntax-highlighting?color=blue"/&gt;
&lt;a href="https://results.pre-commit.ci/latest/github/f-koehler/pelican-syntax-highlighting/main"&gt;&lt;img alt="pre-commit.ci status" src="https://results.pre-commit.ci/badge/github/f-koehler/pelican-syntax-highlighting/main.svg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Highlight syntax using Prism.js, Highlight.js or Pygments&lt;/p&gt;
&lt;h2&gt;Installation&lt;/h2&gt;
&lt;p&gt;This plugin can be installed via:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;python -m pip install pelican-syntax-highlighting
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Usage&lt;/h2&gt;
&lt;p&gt;&amp;lt;&lt;add details="" here="" plugin=""&gt;&amp;gt;&lt;/add&gt;&lt;/p&gt;
&lt;h2&gt;Contributing&lt;/h2&gt;
&lt;p&gt;Contributions are welcome and much appreciated. Every little bit helps. You can contribute by improving the documentation, adding missing features, and fixing bugs. You can also help out by reviewing and commenting on &lt;a href="https://github.com/f-koehler/pelican-syntax-highlighting/issues"&gt;existing issues&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To start contributing to this plugin, review the &lt;a href="https://docs.getpelican.com/en/latest/contribute.html"&gt;Contributing to Pelican&lt;/a&gt; documentation, beginning with the &lt;strong&gt;Contributing Code&lt;/strong&gt; section.&lt;/p&gt;
&lt;h2&gt;License&lt;/h2&gt;
&lt;p&gt;This project is licensed under the AGPL-3.0 license.&lt;/p&gt;</content><category term="projects"></category><category term="highlighting"></category><category term="pelican"></category><category term="pelican-plugins"></category><category term="python"></category><category term="syntax-highlighting"></category></entry><entry><title>Installing a Specific Build of an Anaconda Package</title><link href="https://fkoehler.org/2021/10/anaconda-specific-build.html" rel="alternate"></link><published>2021-10-14T15:10:00+02:00</published><updated>2021-10-14T15:10:00+02:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2021-10-14:/2021/10/anaconda-specific-build.html</id><summary type="html">&lt;p&gt;This blog post shows how to install a specific build of an Anaconda package.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Recently, I wrote a small python program to perform computations in parallel using the &lt;abbr title="Message Passing Interface"&gt;MPI&lt;/abbr&gt; exposed by the &lt;a href="https://mpi4py.readthedocs.io/en/stable/"&gt;&lt;code&gt;mpi4py&lt;/code&gt;&lt;/a&gt; library.
By using the convenient &lt;a href="https://docs.h5py.org/en/stable/"&gt;&lt;code&gt;h5py&lt;/code&gt;&lt;/a&gt; library, I store the results in a single, large &lt;abbr title="Hierarchical Data Format 5"&gt;HDF5&lt;/abbr&gt; file.
This however required the &lt;a href="https://docs.h5py.org/en/stable/mpi.html"&gt;parallel &lt;abbr title="Hierarchical Data Format 5"&gt;HDF5&lt;/abbr&gt;&lt;/a&gt; support to be compiled into the &lt;abbr title="Hierarchical Data Format 5"&gt;HDF5&lt;/abbr&gt; library.
Naturally, the first step is to check whether an Anaconda package is available that includes the &lt;abbr title="Message Passing Interface"&gt;MPI&lt;/abbr&gt; support.
Running &lt;code&gt;conda search h5py&lt;/code&gt; I found the following available packages:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;Loading channels: done&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;# Name Version Build                      Channel&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;…&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   mpi_mpich_py37h3a1f665_0   conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   mpi_mpich_py37h3a1f665_1   conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   mpi_mpich_py38h211b2b0_0   conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   mpi_mpich_py38h211b2b0_1   conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   mpi_mpich_py39ha1f86df_0   conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   mpi_mpich_py39ha1f86df_1   conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   mpi_openmpi_py37hc2f5ef6_0 conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   mpi_openmpi_py37hc2f5ef6_1 conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;12&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   mpi_openmpi_py38h63e9fd9_0 conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;13&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   mpi_openmpi_py38h63e9fd9_1 conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;14&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   mpi_openmpi_py39hb889842_0 conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;15&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   mpi_openmpi_py39hb889842_1 conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;16&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   nompi_py37hd308b1e_100     conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;17&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   nompi_py37hd308b1e_101     conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;18&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   nompi_py38hfbb2109_100     conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;19&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   nompi_py38hfbb2109_101     conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;20&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   nompi_py39h7e08c79_100     conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;21&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;h5py   3.4.0   nompi_py39h7e08c79_101     conda-forge&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;I truncated the output to only show the &lt;code&gt;3.4.0&lt;/code&gt; version, which is the most recent one and the one I want to use.
We can clearly identify three different builds:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;nompi&lt;/code&gt;: no &lt;abbr title="Message Passing Interface"&gt;MPI&lt;/abbr&gt; support (default)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mpi_mpich&lt;/code&gt;: &lt;abbr title="Message Passing Interface"&gt;MPI&lt;/abbr&gt; support via the &lt;a href="https://www.mpich.org"&gt;MPICH&lt;/a&gt; implementation&lt;/li&gt;
&lt;li&gt;&lt;code&gt;openmpi&lt;/code&gt;: &lt;abbr title="Message Passing Interface"&gt;MPI&lt;/abbr&gt; support via the &lt;a href="https://www.open-mpi.org"&gt;OpenMPI&lt;/a&gt; implementation&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;For my small project I decided to install a build using the MPICH implementation.
However, it was unclear to me what the syntax for specifying the build is.
I could not find anything in the documentation.&lt;/p&gt;
&lt;p&gt;The first thing I found by searching the wider web was to use the syntax&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;conda install &amp;lt;package_name&amp;gt;=&amp;lt;version&amp;gt;=&amp;lt;build_string&amp;gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;For example&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;conda install h5py=3.4.0=mpi_mpich_py39ha1f86df_1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;The latest version can be installed using wildcards&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;conda install "h5py=*=mpi_mpich_*"&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;By exporting my Anaconda environment via &lt;code&gt;conda export --from-history&lt;/code&gt; then showed me that there is another, more concise syntax.
We can just specify the package as &lt;code&gt;h5py[build=mpi_mpich_*]&lt;/code&gt; or &lt;code&gt;h5py[build=mpi_*]&lt;/code&gt; if we do not care about the actual &lt;abbr title="Message Passing Interface"&gt;MPI&lt;/abbr&gt; implementation.
Due to the extensive dependency resolution process &lt;code&gt;conda&lt;/code&gt; includes the &lt;abbr title="Message Passing Interface"&gt;MPI&lt;/abbr&gt; implementation as a dependency and installs it.&lt;/p&gt;
&lt;p&gt;I found this piece of information regarding &lt;code&gt;build&lt;/code&gt; strings in the &lt;a href="https://docs.conda.io/projects/conda-build/en/latest/resources/package-spec.html"&gt;&lt;code&gt;conda-build&lt;/code&gt;&lt;/a&gt; documentation:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The build string. May not contain "-". Differentiates builds of packages with otherwise identical names and versions, such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A build with other dependencies, such as Python 3.4 instead of Python 2.7.&lt;/li&gt;
&lt;li&gt;A bug fix in the build process.&lt;/li&gt;
&lt;li&gt;Some different optional dependencies, such as MKL versus ATLAS linkage. Nothing in conda actually inspects the build string. Strings such as np18py34_1 are designed only for human readability and conda never parses them.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Which tells us that these build strings are just a human-readable identifier for the package and no actual information is extracted from them.
&lt;code&gt;conda install&lt;/code&gt; seems to perform some pattern matching using this string, i.e. it is ok to only specify the start of the build string and to use wildcards.&lt;/p&gt;
&lt;p&gt;So the strategy seems when installing a specific variant of an Anaconda package seems to be:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Perform a &lt;code&gt;conda search&lt;/code&gt; for the package.&lt;/li&gt;
&lt;li&gt;Identify the build string.&lt;/li&gt;
&lt;li&gt;Install the dependency by invoking &lt;code&gt;conda install &amp;lt;package&amp;gt;[build=&amp;lt;build_string_pattern&amp;gt;]&lt;/code&gt; and using a proper build string pattern (e.g. use only the start of the build string and employ wildcards where necessary).&lt;/li&gt;
&lt;/ol&gt;</content><category term="Python"></category><category term="anaconda"></category><category term="conda"></category><category term="mamba"></category><category term="python"></category><category term="package"></category><category term="build"></category></entry><entry><title>Taming git-annex using git-config and gitattributes</title><link href="https://fkoehler.org/2021/08/taming-git-annex.html" rel="alternate"></link><published>2021-08-20T11:31:00+02:00</published><updated>2021-08-20T11:31:00+02:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2021-08-20:/2021/08/taming-git-annex.html</id><summary type="html">&lt;p&gt;Git-annex allows to track (large) files with &lt;code&gt;git&lt;/code&gt; without adding their contents to the repository. &lt;code&gt;git-config&lt;/code&gt; and &lt;code&gt;gitattributes&lt;/code&gt; allow to prevent from accidentally annexing files which can be a major nuisance.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Recently, I started using &lt;a href="https://git-annex.branchable.com/"&gt;&lt;code&gt;git-annex&lt;/code&gt;&lt;/a&gt; again which is a great tool to track large files in the &lt;a href="http://git-scm.com/"&gt;&lt;code&gt;git&lt;/code&gt;&lt;/a&gt; version control system without actually adding their contents to &lt;code&gt;git&lt;/code&gt;.
It is very versatile and allows for the usage of many &lt;a href="https://git-annex.branchable.com/special_remotes/"&gt;storage backends&lt;/a&gt;.
However, proper care has to be taken when working with mixed content, i.e. some files that should be tracked by &lt;code&gt;git&lt;/code&gt; directly and some which should be stored using &lt;code&gt;git-annex&lt;/code&gt;.
To my understanding, &lt;code&gt;git-annex&lt;/code&gt; wants to annex every file and I messed up repositories a couple of times running &lt;code&gt;git annex sync&lt;/code&gt; and other related commands.
All my files ended up being annexed which is definitely not what I tried to achieve.
Even though this is easily reversible this behavior is often not ideal.&lt;/p&gt;
&lt;p&gt;Since I really like &lt;code&gt;git-annex&lt;/code&gt; in general, I wanted to find a way around this issue.
After some research I found that the documentation states that there are &lt;a href="https://git-annex.branchable.com/tips/largefiles/"&gt;two ways to gain fine control&lt;/a&gt; over which files will be annexed.
I still wanted to write this short post, since it took me a while to discover that one should tune &lt;code&gt;git-annex&lt;/code&gt; in this way.
For both approaches it is important that &lt;code&gt;git-annex&lt;/code&gt; tries to annex every file that it considers to be large.
Luckily, we can control this classification.&lt;/p&gt;
&lt;h2&gt;&lt;code&gt;git-config&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;The simplest way is to rune the following &lt;code&gt;git-config&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;git annex config --set annex.largefiles 'largerthan=100kb and not (include=*.c or include=*.h)'&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;This will instruct &lt;code&gt;git-annex&lt;/code&gt; to consider every file larger than &lt;code&gt;100kb&lt;/code&gt; to be large except for &lt;code&gt;.c&lt;/code&gt; and &lt;code&gt;.h&lt;/code&gt; files.
Every file that matches these criteria will be annexed.&lt;/p&gt;
&lt;p&gt;The command above sets the configuration for &lt;code&gt;git-annex&lt;/code&gt; globally, i.e. for every clone of the repository.
We can also set this for the current clone only, but I do not find that to be particularly useful (see the documentation on &lt;a href="https://git-annex.branchable.com/tips/largefiles/"&gt;how to do this&lt;/a&gt;).&lt;/p&gt;
&lt;h2&gt;&lt;code&gt;gitattributes&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;The approach using &lt;code&gt;git-config&lt;/code&gt; quickly becomes complicated when we want to achieve very fine-grained control, e.g. setting &lt;code&gt;largerthan&lt;/code&gt; limits per file type or dealing with many cases.
Luckily, we can also control the &lt;code&gt;largefiles&lt;/code&gt; behavior using &lt;code&gt;gitattributes&lt;/code&gt;.
The following &lt;code&gt;.gitattributes&lt;/code&gt; file will achieve the same behavior as the aforementioned &lt;code&gt;git-config&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;* annex.largefiles=largerthan=100kb&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;*.c annex.largefiles=nothing&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;*.h annex.largefiles=nothing&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;However, this allows us to be much more flexible and adding new cases just requires adding some lines in the &lt;code&gt;.gitattributes&lt;/code&gt; file.
Due to the way &lt;code&gt;git&lt;/code&gt; looks for &lt;code&gt;.gitattributes&lt;/code&gt; files (see &lt;a href="https://git-scm.com/docs/gitattributes"&gt;&lt;code&gt;gitattributes&lt;/code&gt; documentation&lt;/a&gt;) starting from the current directory and moving up the file system tree, we can easily change the behavior of &lt;code&gt;git-annex&lt;/code&gt; in subdirectories by overriding the attributes.&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Using these two techniques I finally convinced &lt;code&gt;git-annex&lt;/code&gt; to operate in the way I wanted it too rendering it very useful to work with mixed content (e.g. for machine learning projects or when taking online courses).
And yes, this requires some manual labor and consideration regarding which files we want annex but overall I believe this is actually a positive aspect.
There are some advanced topics like forcefully annexing small files and converting between &lt;code&gt;git&lt;/code&gt; controlled content and &lt;code&gt;git-annexed&lt;/code&gt; files which are beyond the scope of this article but are &lt;a href="https://git-annex.branchable.com/tips/largefiles/"&gt;well documented&lt;/a&gt;.&lt;/p&gt;</content><category term="Programming"></category><category term="git"></category><category term="git-annex"></category><category term="gitattributes"></category></entry><entry><title>Continuously Linting Ansible Playbooks and Roles</title><link href="https://fkoehler.org/2021/07/ansible-lint-github-workflow/index.html" rel="alternate"></link><published>2021-07-12T22:04:00+02:00</published><updated>2021-07-12T22:04:00+02:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2021-07-12:/2021/07/ansible-lint-github-workflow/index.html</id><summary type="html">&lt;p&gt;The &lt;code&gt;ansible-lint&lt;/code&gt; linter for Ansible YAML can be easily set up as a GitHub workflow, continuously checking playbooks and roles.&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="https://www.google.com/search?client=firefox-b-d&amp;amp;q=ansible-lint"&gt;&lt;code&gt;ansible-lint&lt;/code&gt;&lt;/a&gt; is a helpful tool when dealing with &lt;a href="https://www.ansible.com/"&gt;Ansible&lt;/a&gt; roles and playbooks.
It can help find common mistakes, prevent bugs and generally improve the code quality.
Using the &lt;a href="https://pre-commit.com/"&gt;&lt;code&gt;pre-commit&lt;/code&gt;&lt;/a&gt; framework it is trivial to set it up as hook in the Git version control system such that it checks the code before creating a commit.
Sometimes however, one might forget to run &lt;code&gt;pre-commit install&lt;/code&gt; after checking out a project or a collaborator is not using &lt;code&gt;pre-commit&lt;/code&gt;.
Therefore, it is helpful to set &lt;code&gt;ansible-lint&lt;/code&gt; up as a GitHub workflow that is executed automatically on every commit and pull request.
Of course this implies that one uses the &lt;a href="https://github.com"&gt;GitHub platform&lt;/a&gt;.
Other hosting services might offer other ways of achieving the same goal as well, but we focus on GitHub here.&lt;/p&gt;
&lt;p&gt;In &lt;a href="https://github.com/ansible/ansible-lint-action"&gt;this repository&lt;/a&gt; an unofficial GitHub action can be found.
However, I had no success with it.
I identified the following problems:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It uses outdated versions of the &lt;code&gt;ansible&lt;/code&gt; and the &lt;code&gt;ansible-lint&lt;/code&gt; Python packages.&lt;/li&gt;
&lt;li&gt;While the versions can be overridden I still could not get it to run.&lt;/li&gt;
&lt;li&gt;The action creates a &lt;a href="https://docker.com"&gt;Docker container&lt;/a&gt; which makes the action rather slow.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Since &lt;code&gt;ansible-lint&lt;/code&gt; is a simple Python package and creating a Docker image seems a bit like overshooting, I set up a GitHub workflow myself.
I created the file &lt;code&gt;.github/workflows/ansible-lint.yml&lt;/code&gt; (can be named differently as well) with the following content:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-attr"&gt;name:&lt;/span&gt; &lt;span class="hljs-string"&gt;lint&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-attr"&gt;on:&lt;/span&gt; [&lt;span class="hljs-string"&gt;push&lt;/span&gt;, &lt;span class="hljs-string"&gt;pull_request&lt;/span&gt;]&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-attr"&gt;jobs:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;  &lt;span class="hljs-attr"&gt;build:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-attr"&gt;runs-on:&lt;/span&gt; &lt;span class="hljs-string"&gt;ubuntu-latest&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-attr"&gt;steps:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;      &lt;span class="hljs-bullet"&gt;-&lt;/span&gt; &lt;span class="hljs-attr"&gt;uses:&lt;/span&gt; &lt;span class="hljs-string"&gt;actions/checkout@v2&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;      &lt;span class="hljs-bullet"&gt;-&lt;/span&gt; &lt;span class="hljs-attr"&gt;name:&lt;/span&gt; &lt;span class="hljs-string"&gt;Set&lt;/span&gt; &lt;span class="hljs-string"&gt;up&lt;/span&gt; &lt;span class="hljs-string"&gt;Python&lt;/span&gt; &lt;span class="hljs-number"&gt;3.9&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        &lt;span class="hljs-attr"&gt;uses:&lt;/span&gt; &lt;span class="hljs-string"&gt;actions/setup-python@v2&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        &lt;span class="hljs-attr"&gt;with:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;12&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;          &lt;span class="hljs-attr"&gt;python-version:&lt;/span&gt; &lt;span class="hljs-number"&gt;3.9&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;13&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;      &lt;span class="hljs-bullet"&gt;-&lt;/span&gt; &lt;span class="hljs-attr"&gt;uses:&lt;/span&gt; &lt;span class="hljs-string"&gt;actions/cache@v2&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;14&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        &lt;span class="hljs-attr"&gt;with:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;15&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;          &lt;span class="hljs-attr"&gt;path:&lt;/span&gt; &lt;span class="hljs-string"&gt;~/.cache/pip&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;16&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;          &lt;span class="hljs-attr"&gt;key:&lt;/span&gt; &lt;span class="hljs-string"&gt;${{&lt;/span&gt; &lt;span class="hljs-string"&gt;runner.os&lt;/span&gt; &lt;span class="hljs-string"&gt;}}-pip-${{&lt;/span&gt; &lt;span class="hljs-string"&gt;hashFiles('**/requirements.txt')&lt;/span&gt; &lt;span class="hljs-string"&gt;}}&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;17&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;      &lt;span class="hljs-bullet"&gt;-&lt;/span&gt; &lt;span class="hljs-attr"&gt;name:&lt;/span&gt; &lt;span class="hljs-string"&gt;Install&lt;/span&gt; &lt;span class="hljs-string"&gt;dependencies&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;18&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        &lt;span class="hljs-attr"&gt;run:&lt;/span&gt; &lt;span class="hljs-string"&gt;|&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;19&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;          python -m pip install --upgrade pip&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;20&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;          python -m pip install -r requirements.txt&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;21&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;      &lt;span class="hljs-bullet"&gt;-&lt;/span&gt; &lt;span class="hljs-attr"&gt;name:&lt;/span&gt; &lt;span class="hljs-string"&gt;Run&lt;/span&gt; &lt;span class="hljs-string"&gt;ansible-lint&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;22&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        &lt;span class="hljs-attr"&gt;run:&lt;/span&gt; &lt;span class="hljs-string"&gt;|&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;23&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;          ansible-lint -v --show-relpath&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;This instructs the workflow to run on every pushed commit and every pull request.
First the action &lt;code&gt;actions/check@v2&lt;/code&gt; is used to set up the environment and checkout the repository.
The action &lt;code&gt;actions/setup-python@v2&lt;/code&gt; sets up Python, version &lt;code&gt;3.9&lt;/code&gt; in my case.
Then I use the &lt;code&gt;actions/cache@v2&lt;/code&gt; to cache the Python dependencies I install in the following step.
I have a &lt;code&gt;requirements.txt&lt;/code&gt; file in the root of the repository to track the required Python packages:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    ansible==4.2.0&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    ansible-lint==5.0.12&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;The line &lt;code&gt;path: ~/.cache/pip&lt;/code&gt; instructs the CI to cache the pip directory and &lt;code&gt;key: …&lt;/code&gt; determines a key for the cache which is based on the operating system as well as the hash of the &lt;code&gt;requirements.txt&lt;/code&gt;.
As long as the OS and the file do not change, the downloaded dependencies can be reused in the next step &lt;code&gt;Install dependencies&lt;/code&gt; thus speeding up the workflow.
Of course one could also manually install &lt;code&gt;ansible-lint&lt;/code&gt; with &lt;code&gt;python -m pip install ansible-lint&lt;/code&gt; but that would require figuring out a different caching mechanism and would prevent Dependabot from checking for updates (see below).&lt;/p&gt;
&lt;p&gt;In the last step &lt;code&gt;Run ansible-lint&lt;/code&gt; the linter is actually executed.
Here, one could also change the CLI arguments used when calling &lt;code&gt;ansible-lint&lt;/code&gt;, however it is much simpler to use a &lt;code&gt;.ansible-lint&lt;/code&gt; file in the repository to configure it.
More on this topic can be found &lt;a href="https://ansible-lint.readthedocs.io/en/latest/configuring.html#configuration-file"&gt;in the official documentation&lt;/a&gt;.
For example, it might be useful to exclude certain files that are not actually Ansible code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-attr"&gt;exclude_paths:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;      &lt;span class="hljs-bullet"&gt;-&lt;/span&gt; &lt;span class="hljs-string"&gt;".pre-commit-config.yaml"&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;      &lt;span class="hljs-bullet"&gt;-&lt;/span&gt; &lt;span class="hljs-string"&gt;"roles/vps/files/docker-compose-files"&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;As you can see, setting up &lt;code&gt;ansible-lint&lt;/code&gt; as a GitHub action is pretty straightforward.
I have two final recommendations that you might find useful.
&lt;a href="https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/about-dependabot-version-updates"&gt;Dependabot&lt;/a&gt; can be used to check the packages used in the &lt;code&gt;requirements.txt&lt;/code&gt; file for updates. Just create a file &lt;code&gt;.github/dependabot.yml&lt;/code&gt; with the content&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-attr"&gt;version:&lt;/span&gt; &lt;span class="hljs-number"&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-attr"&gt;updates:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;      &lt;span class="hljs-bullet"&gt;-&lt;/span&gt; &lt;span class="hljs-attr"&gt;package-ecosystem:&lt;/span&gt; &lt;span class="hljs-string"&gt;"pip"&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        &lt;span class="hljs-attr"&gt;directory:&lt;/span&gt; &lt;span class="hljs-string"&gt;"/"&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        &lt;span class="hljs-attr"&gt;schedule:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;          &lt;span class="hljs-attr"&gt;interval:&lt;/span&gt; &lt;span class="hljs-string"&gt;"daily"&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;to enable a daily update check. If Dependabot finds an update it will create a pull request for the repository.
You can add a nice badge to the &lt;code&gt;README.md&lt;/code&gt; file indicating the workflow status using &lt;a href="https://shields.io/category/build"&gt;Shields.io&lt;/a&gt;. Select the "GitHub Workflow Status" and specify your repository and the workflow name. The name is specified by the first line in the workflow file (&lt;code&gt;name: lint&lt;/code&gt;) so in my case it would be &lt;code&gt;lint&lt;/code&gt;. Shields.io will then generate links, markdown, etc. to easily use the badge.&lt;/p&gt;
&lt;p&gt;Two example repositories where I use this workflow can be found here:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/f-koehler/dotfiles"&gt;dotfiles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/f-koehler/playbooks"&gt;playbooks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Programming"></category><category term="Ansible"></category><category term="CI"></category><category term="GitHub"></category><category term="Workflow"></category><category term="Action"></category><category term="YAML"></category><category term="Lint"></category><category term="Dependabot"></category></entry><entry><title>pelican-references</title><link href="https://fkoehler.org/projects/pelican-references.html" rel="alternate"></link><published>2021-07-05T16:12:19+02:00</published><updated>2021-07-05T16:12:19+02:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2021-07-05:/projects/pelican-references.html</id><summary type="html">&lt;p&gt;Handle references and bibliographies for pelican posts.&lt;/p&gt;</summary><content type="html">&lt;h1&gt;references: A Plugin for Pelican&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://github.com/f-koehler/pelican-references/actions"&gt;&lt;img alt="Build Status" src="https://img.shields.io/github/workflow/status/f-koehler/pelican-references/build"/&gt;&lt;/a&gt;
&lt;a href="https://pypi.org/project/pelican-references/"&gt;&lt;img alt="PyPI Version" src="https://img.shields.io/pypi/v/pelican-references"/&gt;&lt;/a&gt;
&lt;img alt="License" src="https://img.shields.io/pypi/l/pelican-references?color=blue"/&gt;
&lt;a href="https://results.pre-commit.ci/latest/github/f-koehler/pelican-references/main"&gt;&lt;img alt="pre-commit.ci status" src="https://results.pre-commit.ci/badge/github/f-koehler/pelican-references/main.svg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Generate bibliographies from BibTeX files&lt;/p&gt;
&lt;h2&gt;Installation&lt;/h2&gt;
&lt;p&gt;This plugin can be installed via:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;python -m pip install pelican-references
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Usage&lt;/h2&gt;
&lt;p&gt;&amp;lt;&lt;add details="" here="" plugin=""&gt;&amp;gt;&lt;/add&gt;&lt;/p&gt;
&lt;h2&gt;Contributing&lt;/h2&gt;
&lt;p&gt;Contributions are welcome and much appreciated. Every little bit helps. You can contribute by improving the documentation, adding missing features, and fixing bugs. You can also help out by reviewing and commenting on &lt;a href="https://github.com/f-koehler/pelican-references/issues"&gt;existing issues&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To start contributing to this plugin, review the &lt;a href="https://docs.getpelican.com/en/latest/contribute.html"&gt;Contributing to Pelican&lt;/a&gt; documentation, beginning with the &lt;strong&gt;Contributing Code&lt;/strong&gt; section.&lt;/p&gt;
&lt;h2&gt;License&lt;/h2&gt;
&lt;p&gt;This project is licensed under the AGPL-3.0 license.&lt;/p&gt;</content><category term="projects"></category><category term="bibliography"></category><category term="bibtex"></category><category term="pelican"></category><category term="pelican-plugins"></category><category term="python"></category></entry><entry><title>Bosonic quantum dynamics following colliding potential wells</title><link href="https://fkoehler.org/publications/2021-colliding-wells.html" rel="alternate"></link><published>2021-04-20T00:00:00+02:00</published><updated>2021-04-20T00:00:00+02:00</updated><author><name>F. Köhler</name></author><id>tag:fkoehler.org,2021-04-20:/publications/2021-colliding-wells.html</id><summary type="html">&lt;p&gt;We explore the dynamics of two interacting bosons confined in colliding potential wells using MCTDHB unraveling the fundamental processes that take place.&lt;/p&gt;</summary><content type="html">&lt;p&gt;We employ the multiconfiguration time-dependent Hartree method for bosons in order to investigate the correlated nonequilibrium quantum dynamics of two bosons confined in two colliding and uniformly accelerated Gaussian wells. As the wells approach each other an effective, transient double-well structure is formed. This induces a transient and oscillatory over-barrier transport. We monitor both the amplitude of the intrawell dipole mode in the course of the dynamics as well as the final distribution of the particles between the two wells. For fast collisions we observe an emission process which we attribute to two distinct mechanisms. Energy transfer processes lead to an untrapped fraction of bosons and a resonant enhancement of the deconfinement for certain kinematic configurations can be observed. Despite the comparatively weak interaction strengths employed in this work, we identify strong interparticle correlations by analyzing the corresponding von Neumann entropy.&lt;/p&gt;</content><category term="Publications"></category></entry><entry><title>Shipping a Scientific Software Using AppImage</title><link href="https://fkoehler.org/2021/03/scientific-code-appimage.html" rel="alternate"></link><published>2021-03-30T12:32:00+02:00</published><updated>2021-03-30T12:32:00+02:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2021-03-30:/2021/03/scientific-code-appimage.html</id><summary type="html">&lt;p&gt;AppImages are portable binary application packages that run in most Linux environment. We show how it can be employed to distribute a multi-executable scientific software package including the Intel runtime without having to hand out the source code.&lt;/p&gt;</summary><content type="html">&lt;p&gt;At my current PhD position I am the sole maintainer of a complex scientific software (an implementation of the &lt;a href="https://doi.org/10.1063/1.4993512"&gt;ML-MCTDHX algorithm&lt;/a&gt;).
Recently I found myself facing the challenge to distribute this package to users outside our group.
Our code consists of two parts&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a python library used for setting up the problem and analyzing results&lt;/li&gt;
&lt;li&gt;Fortran binaries that do the actual number crunching&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Distributing the Python was straightforward using the normal means.
I just created a tarball using &lt;a href="https://python-poetry.org/docs/cli/#build"&gt;&lt;code&gt;poetry build&lt;/code&gt;&lt;/a&gt; which can be installed using &lt;a href="https://pip.pypa.io/en/stable/"&gt;pip&lt;/a&gt;.
Shipping the Fortran part however was not so straightforward, for the following reasons&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The source code should not be shipped to the user.&lt;/li&gt;
&lt;li&gt;The whole runtime (Intel runtime, &lt;a href="https://software.intel.com/content/www/us/en/develop/tools/oneapi/components/onemkl.html"&gt;MKL&lt;/a&gt; and system libraries) should be included, such that the software should run on any modern Linux platform&lt;/li&gt;
&lt;li&gt;Avoid fiddling with environment variables (my first attempt was just to bundle everything up and update &lt;code&gt;PATH&lt;/code&gt; and &lt;code&gt;LD_LIBRARY_PATH&lt;/code&gt;, this was very error-prone, and I always forgot something).&lt;/li&gt;
&lt;li&gt;The code should run on a Cluster where we cannot just install software like &lt;a href="https://snapcraft.io/"&gt;snap&lt;/a&gt; or &lt;a href="https://flatpak.org/"&gt;flatpak&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;The usage should be dead simple. Many scientists are not so tech-savvy and often are not interested in learning (which is OK, sometimes we just need to get our research done).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After looking at my options the solution became pretty clear – just build an &lt;a href="https://appimage.org/"&gt;AppImage&lt;/a&gt;.
Using this tool chain you can package any Linux application into a single executable file.&lt;/p&gt;
&lt;p&gt;In the following I describe how I obtained an AppImage from the existing &lt;a href="https://cmake.org/"&gt;CMake build system&lt;/a&gt; I wrote for the application.
The procedure should be easy to adapt to other use cases/build systems as well.
I test the result across multiple distributions using &lt;a href="https://www.docker.com/"&gt;Docker&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Creating AppDir using CMake&lt;/h2&gt;
&lt;p&gt;The first step of the process is to create an &lt;a href="https://docs.appimage.org/packaging-guide/manual.html#creating-an-appdir-manually"&gt;AppDir&lt;/a&gt; using CMake.
Our &lt;code&gt;CMakeLists.txt&lt;/code&gt; file already creates an installation target using the &lt;a href="https://cmake.org/cmake/help/latest/command/install.html"&gt;&lt;code&gt;install&lt;/code&gt;&lt;/a&gt; command.
I added the following code&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-keyword"&gt;install&lt;/span&gt;(&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;  FILES&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    $ENV{MKLROOT}/lib/intel64/libmkl_avx.so.&lt;span class="hljs-number"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    $ENV{MKLROOT}/lib/intel64/libmkl_avx2.so.&lt;span class="hljs-number"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    $ENV{MKLROOT}/lib/intel64/libmkl_avx512.so.&lt;span class="hljs-number"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    $ENV{MKLROOT}/lib/intel64/libmkl_avx512_mic.so.&lt;span class="hljs-number"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    $ENV{MKLROOT}/lib/intel64/libmkl_core.so.&lt;span class="hljs-number"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    $ENV{MKLROOT}/lib/intel64/libmkl_intel_lp64.so.&lt;span class="hljs-number"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    $ENV{MKLROOT}/lib/intel64/libmkl_sequential.so.&lt;span class="hljs-number"&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    PERMISSIONS&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;      OWNER_READ OWNER_WRITE OWNER_EXECUTE&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;12&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;      GROUP_READ GROUP_EXECUTE&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;13&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;      WORLD_EXECUTE&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;14&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    DESTINATION lib&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;15&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    CONFIGURATIONS Release&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;16&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;which installs the necessary Intel MKL libraries.
By adding&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-keyword"&gt;include&lt;/span&gt;(InstallRequiredSystemLibraries)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;the rest of the Intel libraries including the Fortran runtime also gets bundled (see &lt;a href="https://cmake.org/cmake/help/latest/module/InstallRequiredSystemLibraries.html"&gt;here&lt;/a&gt;).
The idea is now to perform a normal CMake build and install the targets using the &lt;code&gt;install&lt;/code&gt; target (e.g. &lt;code&gt;make install&lt;/code&gt;).
It is important to set &lt;code&gt;CMAKE_INSTALL_PREFIX=/usr&lt;/code&gt; as this is the installation prefix the AppImage tool chain expects.
The path where the executables will be located can be set using the &lt;code&gt;DESTDIR&lt;/code&gt; variable and should be set to the AppDir to create for AppImage, e.g. &lt;code&gt;DESTDIR=$PWD/build-appimage/AppDir&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;In our example we end up with a directory structure like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;qdtk.AppDir&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;└── usr&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    ├── bin&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    │   ├── qdtk_analysis.x&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    │   ├── qdtk_expect.x&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    │   └── qdtk_propagate.x&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    └── lib&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libchkp.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libcilkrts.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libcilkrts.so.5&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libicaf.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;12&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libifcoremt.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;13&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libifcoremt.so.5&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;14&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libifcore.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;15&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libifcore.so.5&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;16&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libifport.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;17&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libifport.so.5&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;18&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libimf.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;19&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libintlc.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;20&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libintlc.so.5&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;21&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libiomp5.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;22&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libiompstubs5.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;23&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libirc.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;24&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libirng.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;25&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libmkl_avx2.so.1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;26&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libmkl_avx512_mic.so.1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;27&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libmkl_avx512.so.1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;28&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libmkl_avx.so.1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;29&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libmkl_core.so.1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;30&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libmkl_intel_lp64.so.1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;31&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libmkl_sequential.so.1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;32&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libmpx.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;33&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libpdbx.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;34&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        ├── libpdbx.so.5&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;35&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        └── libsvml.so&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2&gt;Creating the AppImage&lt;/h2&gt;
&lt;p&gt;According to the &lt;a href="https://cmake.org/cmake/help/latest/module/InstallRequiredSystemLibraries.html"&gt;documentation&lt;/a&gt;, the &lt;code&gt;appimagetool&lt;/code&gt; command expects some extra files to be present.
First we need to add an AppRun script which sets some environment variables and finally starts the software.
The instructions recommend not to create it yourself.
I just grabbed it from the &lt;a href="https://github.com/AppImage/AppImageKit/blob/master/resources/AppRun"&gt;git repository&lt;/a&gt;.
Furthermore, a &lt;code&gt;.desktop&lt;/code&gt; file is required (only the &lt;code&gt;Name&lt;/code&gt;, &lt;code&gt;Exec&lt;/code&gt;, &lt;code&gt;Icon&lt;/code&gt;, &lt;code&gt;Type&lt;/code&gt; and &lt;code&gt;Categories&lt;/code&gt; fields have to be set).
Mine looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-section"&gt;[Desktop Entry]&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-attr"&gt;Name&lt;/span&gt;=qdtk&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-attr"&gt;Exec&lt;/span&gt;=qdtk&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-attr"&gt;Icon&lt;/span&gt;=qdtk&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-attr"&gt;Type&lt;/span&gt;=Application&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-attr"&gt;Categories&lt;/span&gt;=Science&lt;span class="hljs-comment"&gt;;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;Exec&lt;/code&gt; field specifies the executable that the AppImage will execute.
In my case this is the &lt;code&gt;qdtk&lt;/code&gt; script which I describe in the next step, that dispatches the actual Fortran executable.
An icon is required (here one really starts to notice that AppImage mainly targets graphical applications).
I just dropped a blank &lt;code&gt;256x256&lt;/code&gt; PNG file called &lt;code&gt;qdtk.png&lt;/code&gt; in the AppDir and everything was fine.&lt;/p&gt;
&lt;p&gt;To dispatch the actual executable I added a small wrapper script under &lt;code&gt;usr/bin/qdtk&lt;/code&gt; in the AppDir:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-meta"&gt;#!/bin/sh&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-keyword"&gt;if&lt;/span&gt; [ &lt;span class="hljs-string"&gt;"&lt;span class="hljs-variable"&gt;$#&lt;/span&gt;"&lt;/span&gt; -lt 1 ]; &lt;span class="hljs-keyword"&gt;then&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-built_in"&gt;echo&lt;/span&gt; &lt;span class="hljs-string"&gt;"usage: qdtk.AppImage {qdtk_propagate.x|qdtk_expect.x|qdtk_analysis.x} [OPTIONS]"&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-built_in"&gt;exit&lt;/span&gt; 1&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-keyword"&gt;else&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    executable=&lt;span class="hljs-variable"&gt;$1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-built_in"&gt;shift&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-keyword"&gt;case&lt;/span&gt; &lt;span class="hljs-string"&gt;"&lt;span class="hljs-variable"&gt;$executable&lt;/span&gt;"&lt;/span&gt; &lt;span class="hljs-keyword"&gt;in&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        qdtk_propagate.x|qdtk_expect.x|qdtk_analysis.x)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;12&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;            &lt;span class="hljs-variable"&gt;$executable&lt;/span&gt; &lt;span class="hljs-variable"&gt;$@&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;13&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;            ;;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;14&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        *)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;15&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;            &lt;span class="hljs-built_in"&gt;echo&lt;/span&gt; &lt;span class="hljs-string"&gt;"usage: qdtk.AppImage {qdtk_propagate.x|qdtk_expect.x|qdtk_analysis.x} [OPTIONS]"&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;16&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;            ;;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;17&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-keyword"&gt;esac&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;18&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-keyword"&gt;fi&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;The first CLI option passed to &lt;code&gt;qdtk.AppImage&lt;/code&gt; then specifies the executable (&lt;code&gt;qdtk_propagate.x&lt;/code&gt;, &lt;code&gt;qdtk_expect.x&lt;/code&gt; or &lt;code&gt;qdtk_analysis.x&lt;/code&gt;) to call.
All remaining parameters are forwarded to that program.&lt;/p&gt;
&lt;p&gt;The files added to the AppDir in this second step are:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;qdtk.AppDir&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── AppRun&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── qdtk.desktop&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;├── qdtk.png&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;└── usr&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    └── bin&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        └── qdtk&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;Now, we can finally build the AppImage by calling &lt;code&gt;appimagetool &amp;lt;path-to-appdir&amp;gt; qdtk.AppImage&lt;/code&gt;.
By calling &lt;code&gt;qdtk.AppImage qdtk_propagate.x&lt;/code&gt; we can directly test it.
Luckily everything is now working and neatly bundled including all dependencies.&lt;/p&gt;
&lt;h2&gt;Testing Using Docker&lt;/h2&gt;
&lt;p&gt;In order to be sure that the AppImage we just created works across multiple distributions.
This can be easily achieved using Docker containers.
However, most Docker images ship without &lt;a href="https://github.com/libfuse/libfuse"&gt;&lt;code&gt;libfuse&lt;/code&gt;&lt;/a&gt; which is required to mount and run the AppImage.
Luckily AppImages can still be executed using the &lt;code&gt;--appimage-extract-and-run&lt;/code&gt; flag by first extracting them.
As an example, I use the command&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;docker run \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    -v &lt;span class="hljs-variable"&gt;$PWD&lt;/span&gt;/build-appimage/qdtk.AppImage:/qdtk.AppImage \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    ubuntu:20.04 \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    /qdtk.AppImage --appimage-extract-and-run qdtk_propagate.x -h&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;to test the AppImage under &lt;a href="https://releases.ubuntu.com/20.04/"&gt;Ubuntu 20.04 LTS&lt;/a&gt;.
I successfully tested my AppImage across multiple distributions.&lt;/p&gt;
&lt;p&gt;In the future I will create a repository of &lt;a href="https://docs.docker.com/engine/reference/builder/"&gt;&lt;code&gt;Dockerfile&lt;/code&gt;&lt;/a&gt;s that add &lt;code&gt;libfuse&lt;/code&gt; to the images of various distributions.
I will update this article accordingly once I found the time to do so.&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;Preparing an AppImage from our existing CMake project was surprisingly simple.
Everything I described should also work similarly for other build systems.
Now I have a nice self-contained package with all batteries included that I can just pass to the user.
At some points I noticed that the AppImage tool chain focuses on graphical desktop applications.
However, all these hurdles were easy to overcome.&lt;/p&gt;
&lt;p&gt;My full script (executed from the project root directory, where &lt;code&gt;CMakeLists.txt&lt;/code&gt; is located) is attached below.
Maybe it can serve you as a basis for your own experiments with AppImage.
It should be easy enough to adapt it to your use case.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-meta"&gt;#!/bin/bash&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-built_in"&gt;set&lt;/span&gt; -eu -o pipefail&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# use all available cores for the compilation&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-built_in"&gt;export&lt;/span&gt; CMAKE_BUILD_PARALLEL_LEVEL=$(&lt;span class="hljs-built_in"&gt;nproc&lt;/span&gt; --all)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# generate a Makefile build system in the folder build-appimage/cmake&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;cmake \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    -G &lt;span class="hljs-string"&gt;"Unix Makefiles"&lt;/span&gt; \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    -S &lt;span class="hljs-variable"&gt;$PWD&lt;/span&gt; \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    -B &lt;span class="hljs-variable"&gt;$PWD&lt;/span&gt;/build-appimage/cmake \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;12&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    -DCMAKE_BUILD_TYPE:STRING=Release \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;13&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    -DCMAKE_Fortran_COMPILER:STRING=ifort \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;14&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    -DCMAKE_INSTALL_PREFIX=/usr \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;15&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    -DENABLE_MKL:BOOL=ON&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;16&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;17&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# run the parallel build&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;18&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-built_in"&gt;nice&lt;/span&gt; -n 19 cmake --build build-appimage/cmake&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;19&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;20&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# install binaries into the AppDir&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;21&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;make -C build-appimage/cmake install DESTDIR=&lt;span class="hljs-variable"&gt;$PWD&lt;/span&gt;/build-appimage/qdtk.AppDir&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;22&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;23&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# copy extra files for AppImage as well as the wrapper script&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;24&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-built_in"&gt;cp&lt;/span&gt; -r AppDir/*  build-appimage/qdtk.AppDir/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;25&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;26&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# remove spurious home directory (left over from arpack ExternalProject&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;27&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# &lt;span class="hljs-doctag"&gt;TODO:&lt;/span&gt; figure out how to prevent this from happening&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;28&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-built_in"&gt;rm&lt;/span&gt; -rf build-appimage/qdtk.AppDir/home&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;29&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;30&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# ensure that AppRun and the wrapper script remain executable&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;31&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# AppImage does not preserve the permissions of these files&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;32&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-built_in"&gt;chmod&lt;/span&gt; a+x build-appimage/qdtk.AppDir/AppRun&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;33&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-built_in"&gt;chmod&lt;/span&gt; a+x build-appimage/qdtk.AppDir/usr/bin/qdtk&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;34&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;35&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# build the AppImage&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;36&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;appimagetool build-appimage/qdtk.AppDir build-appimage/qdtk.AppImage&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;37&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;38&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# test the AppImage across multiple distros&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;39&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# &lt;span class="hljs-doctag"&gt;TODO:&lt;/span&gt; build docker images including the libfuse library to avoid the&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;40&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;# extraction&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;41&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;docker run \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;42&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    -v &lt;span class="hljs-variable"&gt;$PWD&lt;/span&gt;/build-appimage/qdtk.AppImage:/qdtk.AppImage \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;43&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    ubuntu:16.04 \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;44&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    /qdtk.AppImage --appimage-extract-and-run qdtk_propagate.x -h&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;45&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;46&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;docker run \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;47&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    -v &lt;span class="hljs-variable"&gt;$PWD&lt;/span&gt;/build-appimage/qdtk.AppImage:/qdtk.AppImage \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;48&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    ubuntu:18.04 \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;49&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    /qdtk.AppImage --appimage-extract-and-run qdtk_propagate.x -h&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;50&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;51&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;docker run \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;52&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    -v &lt;span class="hljs-variable"&gt;$PWD&lt;/span&gt;/build-appimage/qdtk.AppImage:/qdtk.AppImage \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;53&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    ubuntu:20.04 \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;54&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    /qdtk.AppImage --appimage-extract-and-run qdtk_propagate.x -h&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;55&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;56&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;docker run \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;57&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    -v &lt;span class="hljs-variable"&gt;$PWD&lt;/span&gt;/build-appimage/qdtk.AppImage:/qdtk.AppImage \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;58&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    archlinux \&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;59&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    /qdtk.AppImage --appimage-extract-and-run qdtk_propagate.x -h&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;</content><category term="Coding"></category><category term="Fortran"></category><category term="Scientific Software"></category><category term="AppImage"></category><category term="Docker"></category><category term="MKL"></category><category term="Intel"></category><category term="Deployment"></category><category term="Featured"></category></entry><entry><title>pelican-math-svg</title><link href="https://fkoehler.org/projects/pelican-math-svg.html" rel="alternate"></link><published>2020-11-11T17:10:50+01:00</published><updated>2020-11-11T17:10:50+01:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2020-11-11:/projects/pelican-math-svg.html</id><summary type="html">&lt;p&gt;Render mathematical expressions for your pelican site to SVG in a smart way.&lt;/p&gt;</summary><content type="html">&lt;h1&gt;math-svg: A Plugin for Pelican&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://github.com/f-koehler/pelican-math-svg/actions"&gt;&lt;img alt="Build Status" src="https://img.shields.io/github/workflow/status/f-koehler/pelican-math-svg/build"/&gt;&lt;/a&gt;
&lt;a href="https://pypi.org/project/pelican-math-svg/"&gt;&lt;img alt="PyPI Version" src="https://img.shields.io/pypi/v/pelican-math-svg"/&gt;&lt;/a&gt;
&lt;img alt="License" src="https://img.shields.io/pypi/l/pelican-math-svg?color=blue"/&gt;
&lt;a href="https://results.pre-commit.ci/latest/github/f-koehler/pelican-math-svg/main"&gt;&lt;img alt="pre-commit.ci status" src="https://results.pre-commit.ci/badge/github/f-koehler/pelican-math-svg/main.svg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Render math expressions to svg and embed them.&lt;/p&gt;
&lt;h2&gt;Installation&lt;/h2&gt;
&lt;p&gt;This plugin can be installed via:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;python -m pip install pelican-math-svg&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;Afterwards, add the plugin to the &lt;code&gt;PLUGINS&lt;/code&gt; list in your &lt;code&gt;pelicanconf.py&lt;/code&gt; file, e.g.:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;PLUGINS = [&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-string"&gt;"math_svg"&lt;/span&gt;,&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;]&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2&gt;Multi-Core Rendering&lt;/h2&gt;
&lt;p&gt;To use multi-core rendering of equations (highly recommended, especially when many equations have to be rendered) change the &lt;code&gt;html&lt;/code&gt; target in the &lt;code&gt;Makefile&lt;/code&gt; of your pelican site to a three step process:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-section"&gt;html:&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    PELICAN_MATH_SVG_DRY=True &lt;span class="hljs-string"&gt;"&lt;span class="hljs-variable"&gt;$(PELICAN)&lt;/span&gt;"&lt;/span&gt; &lt;span class="hljs-string"&gt;"&lt;span class="hljs-variable"&gt;$(INPUTDIR)&lt;/span&gt;"&lt;/span&gt; -o &lt;span class="hljs-string"&gt;"&lt;span class="hljs-variable"&gt;$(OUTPUTDIR)&lt;/span&gt;"&lt;/span&gt; -s &lt;span class="hljs-string"&gt;"&lt;span class="hljs-variable"&gt;$(CONFFILE)&lt;/span&gt;"&lt;/span&gt; &lt;span class="hljs-variable"&gt;$(PELICANOPTS)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    pelican-math-svg render -j &lt;span class="hljs-variable"&gt;$(&lt;span class="hljs-built_in"&gt;shell&lt;/span&gt; nproc)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-string"&gt;"&lt;span class="hljs-variable"&gt;$(PELICAN)&lt;/span&gt;"&lt;/span&gt; &lt;span class="hljs-string"&gt;"&lt;span class="hljs-variable"&gt;$(INPUTDIR)&lt;/span&gt;"&lt;/span&gt; -o &lt;span class="hljs-string"&gt;"&lt;span class="hljs-variable"&gt;$(OUTPUTDIR)&lt;/span&gt;"&lt;/span&gt; -s &lt;span class="hljs-string"&gt;"&lt;span class="hljs-variable"&gt;$(CONFFILE)&lt;/span&gt;"&lt;/span&gt; &lt;span class="hljs-variable"&gt;$(PELICANOPTS)&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;The first commands will execute &lt;code&gt;math-svg&lt;/code&gt; in dry-mode and only populate the equation database without actually rendering anything.
The second command will render all missing equations in parallel.
The number of threads is specified by the &lt;code&gt;-j&lt;/code&gt; flag, in this example all CPU cores are used.
Replace &lt;code&gt;$(shell nproc)&lt;/code&gt; with a number to use a fixed number of cores.
The last command is the usual pelican command and produces the output files again, know including the rendered equations.&lt;/p&gt;
&lt;h2&gt;Requirements&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;required LaTeX tools (all included in TeX Live and possibly other LaTeX distributions):
        -   &lt;code&gt;lualatex&lt;/code&gt; (or another LaTeX compiler if changed in the settings, &lt;a href="#configuration"&gt;see below&lt;/a&gt;)
        -   &lt;code&gt;pdfcrop&lt;/code&gt;
        -   &lt;code&gt;dvisvgm&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;scour&lt;/code&gt; (optional)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;svgo&lt;/code&gt; (optional)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Usage&lt;/h2&gt;
&lt;p&gt;In Markdown you can use &lt;code&gt;&lt;span class="math"&gt;&lt;code&gt;$x$&lt;/code&gt;&lt;/span&gt;&lt;/code&gt; for inline math and&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;$$&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;  \int x^2&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;$$&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;for display math.&lt;/p&gt;
&lt;p&gt;It is required to set the stroke color using the &lt;code&gt;strokeonly&lt;/code&gt; class (this class name can be changed, see &lt;a href="#configuration"&gt;configuration options below&lt;/a&gt;), otherwise lines would be rendered white:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;svg path&lt;span class="hljs-selector-class"&gt;.strokeonly&lt;/span&gt; {&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-attribute"&gt;color&lt;/span&gt;: &lt;span class="hljs-number"&gt;#000&lt;/span&gt;;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;To change the fill color for equations as well, thus essential changing the default color for math, specify the following additionally:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-selector-tag"&gt;span&lt;/span&gt;&lt;span class="hljs-selector-class"&gt;.math&lt;/span&gt; svg path,&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-selector-tag"&gt;div&lt;/span&gt;&lt;span class="hljs-selector-class"&gt;.math&lt;/span&gt; svg path {&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    fill: &lt;span class="hljs-number"&gt;#000&lt;/span&gt;;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2&gt;Configuration&lt;/h2&gt;
&lt;p&gt;In your &lt;code&gt;pelicanconf.py&lt;/code&gt; you can use the following options to tweak the behavior of the plugin:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Setting&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;th&gt;Default Value&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["titles"]             | Whether to generate&lt;/code&gt;&lt;title&gt;&lt;code&gt;tags containing the raw LaTeX code (recommended for accessibility).                           |&lt;/code&gt;True`&lt;/title&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["scale_inline"]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;scaling factor for inline math&lt;/td&gt;
&lt;td&gt;&lt;code&gt;1.0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["scale_display"]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;scaling factor for display math&lt;/td&gt;
&lt;td&gt;&lt;code&gt;1.0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["strokeonly_class]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;CSS class for SVG paths that have no filling and a black stroke color, useful when changing the color of rendered equations&lt;/td&gt;
&lt;td&gt;&lt;code&gt;strokeonly&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["latex"]["args"]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;CLI arguments of the invoked LaTeX compiler&lt;/td&gt;
&lt;td&gt;&lt;code&gt;"--interaction=errorstopmode", "--halt-on-error"&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["latex"]["preamble"]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;preamble of the generated LaTeX document&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[r"\documentclass[preview,border={2pt 0pt}]{standalone}",r"\usepackage{amsmath}",r"\usepackage{amssymb}",]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["latex"]["program"]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;LaTeX compiler to use&lt;/td&gt;
&lt;td&gt;&lt;code&gt;lualatex&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["pdfcrop"]["args"]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;CLI arguments for &lt;code&gt;pdfcrop&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--hires&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["dvisvgm"]["args"]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;CLI arguments for &lt;code&gt;dvisvgm&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;["--pdf", "--optimize=all", "--no-fonts", "--exact-bbox"]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["scour"]["args"]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;CLI arguments for &lt;code&gt;scour&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;["--strip-xml-prolog", "--remove-descriptions", "--remove-metadata", "--enable-comment-stripping", "--strip-xml-space", "--enable-id-stripping",]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["scour"]["enabled"]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;whether to use &lt;code&gt;scour&lt;/code&gt; to optimize SVG output&lt;/td&gt;
&lt;td&gt;&lt;code&gt;True&lt;/code&gt; if &lt;code&gt;scour&lt;/code&gt; is in &lt;code&gt;$PATH&lt;/code&gt;, &lt;code&gt;False&lt;/code&gt; otherwise&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["svgo"]["args"]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;CLI arguments for &lt;code&gt;svgo&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;["--multipass", "--precision", "5"]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATH_SVG["svgo"]["enabled"]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;whether to use &lt;code&gt;svgo&lt;/code&gt; to optimize SVG output&lt;/td&gt;
&lt;td&gt;&lt;code&gt;True&lt;/code&gt; if &lt;code&gt;svgo&lt;/code&gt; is in &lt;code&gt;$PATH&lt;/code&gt;, &lt;code&gt;False&lt;/code&gt; otherwise&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;Contributing&lt;/h2&gt;
&lt;p&gt;Contributions are welcome and much appreciated. Every little bit helps. You can contribute by improving the documentation, adding missing features, and fixing bugs. You can also help out by reviewing and commenting on &lt;a href="https://github.com/f-koehler/pelican-math-svg/issues"&gt;existing issues&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To start contributing to this plugin, review the &lt;a href="https://docs.getpelican.com/en/latest/contribute.html"&gt;Contributing to Pelican&lt;/a&gt; documentation, beginning with the &lt;strong&gt;Contributing Code&lt;/strong&gt; section.&lt;/p&gt;
&lt;h2&gt;License&lt;/h2&gt;
&lt;p&gt;This project is licensed under the GPLv3 license.&lt;/p&gt;</content><category term="projects"></category><category term="latex"></category><category term="math"></category><category term="pelican"></category><category term="pelican-plugins"></category><category term="tex"></category><category term="python"></category></entry><entry><title>Dynamical Pruning of the Non-Equilibrium Quantum Dynamics of Trapped Ultracold Bosons</title><link href="https://fkoehler.org/publications/2019-dynamical-pruning.html" rel="alternate"></link><published>2019-08-05T00:00:00+02:00</published><updated>2019-08-05T00:00:00+02:00</updated><author><name>F. Köhler</name></author><id>tag:fkoehler.org,2019-08-05:/publications/2019-dynamical-pruning.html</id><summary type="html">&lt;p&gt;The exponentially growing Hilbert space of many-body systems as a function of system sizes poses a major challenge for numerical methods. We explore how a dynamical pruning approach can be employed within the framework of MCTDHB in order to reduce the computational effort.&lt;/p&gt;</summary><content type="html">&lt;p&gt;The investigation of the nonequilibrium quantum dynamics of bosonic many-body systems is very challenging due to the excessively growing Hilbert space and poses a major problem for their theoretical description and simulation. We present a novel dynamical pruning approach in the framework of the multiconfiguration time-dependent Hartree method for bosons (MCTDHB) to tackle this issue by dynamically detecting the most relevant number states of the underlying physical system and modifying the many-body Hamiltonian accordingly. We discuss two different number state selection criteria as well as two different ways to modify the Hamiltonian. Our scheme regularly re-evaluates the number state selection in order to dynamically adapt to the time evolution of the system. To benchmark our methodology, we study the nonequilibrium dynamics of bosonic particles confined either in an optical lattice or in a double-well potential. It is shown that our approach reproduces the unpruned MCTDHB results accurately while yielding a significant reduction of the simulation time. The speedup is particularly pronounced in the case of the optical lattice.&lt;/p&gt;</content><category term="Publications"></category></entry><entry><title>cpp-perf</title><link href="https://fkoehler.org/projects/cpp-perf.html" rel="alternate"></link><published>2014-12-01T06:46:13+01:00</published><updated>2014-12-01T06:46:13+01:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2014-12-01:/projects/cpp-perf.html</id><summary type="html">&lt;p&gt;Small header-only C++11 to measure code execution time and performance.&lt;/p&gt;</summary><content type="html">&lt;h1&gt;cpp-perf&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://github.com/f-koehler/cpp-perf/actions/workflows/ci.yml"&gt;&lt;img alt="CI" src="https://github.com/f-koehler/cpp-perf/actions/workflows/ci.yml/badge.svg"/&gt;&lt;/a&gt;
&lt;a href="https://github.com/f-koehler/cpp-perf/blob/main/LICENSE"&gt;&lt;img alt="GitHub" src="https://img.shields.io/github/license/f-koehler/cpp-perf"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A small, header-only performance measurement library for C++11.&lt;/p&gt;
&lt;h2&gt;Most basic usage&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-meta"&gt;#&lt;span class="hljs-keyword"&gt;include&lt;/span&gt; &lt;span class="hljs-string"&gt;&amp;lt;cpp-perf.hpp&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-function"&gt;&lt;span class="hljs-type"&gt;int&lt;/span&gt; &lt;span class="hljs-title"&gt;main&lt;/span&gt;&lt;span class="hljs-params"&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;{&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    perf::&lt;span class="hljs-built_in"&gt;start&lt;/span&gt;();&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    std::this_thread::&lt;span class="hljs-built_in"&gt;sleep_for&lt;/span&gt;(perf::&lt;span class="hljs-built_in"&gt;milliseconds&lt;/span&gt;(&lt;span class="hljs-number"&gt;20&lt;/span&gt;));&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    perf::&lt;span class="hljs-built_in"&gt;stop&lt;/span&gt;();&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-keyword"&gt;return&lt;/span&gt; &lt;span class="hljs-number"&gt;0&lt;/span&gt;;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;Output:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;20 ms&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2&gt;Inline measurement&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-meta"&gt;#&lt;span class="hljs-keyword"&gt;include&lt;/span&gt; &lt;span class="hljs-string"&gt;&amp;lt;cpp-perf.hpp&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-function"&gt;&lt;span class="hljs-type"&gt;int&lt;/span&gt; &lt;span class="hljs-title"&gt;main&lt;/span&gt;&lt;span class="hljs-params"&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-built_in"&gt;PERF_START&lt;/span&gt;();&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    std::this_thread::&lt;span class="hljs-built_in"&gt;sleep_for&lt;/span&gt;(perf::&lt;span class="hljs-built_in"&gt;milliseconds&lt;/span&gt;(&lt;span class="hljs-number"&gt;20&lt;/span&gt;));&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-built_in"&gt;PERF_START&lt;/span&gt;();&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-keyword"&gt;for&lt;/span&gt;(&lt;span class="hljs-type"&gt;int&lt;/span&gt; i = &lt;span class="hljs-number"&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class="hljs-number"&gt;10&lt;/span&gt;; i++) {&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        std::this_thread::&lt;span class="hljs-built_in"&gt;sleep_for&lt;/span&gt;(perf::&lt;span class="hljs-built_in"&gt;milliseconds&lt;/span&gt;(&lt;span class="hljs-number"&gt;20&lt;/span&gt;));&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    }&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-built_in"&gt;PERF_STOP&lt;/span&gt;();&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;12&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;13&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-built_in"&gt;PERF_STOP&lt;/span&gt;();&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;14&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;15&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-keyword"&gt;return&lt;/span&gt; &lt;span class="hljs-number"&gt;0&lt;/span&gt;;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;16&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;Output:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;/somepath/perf/example/inline.cpp:main:7-11: 200ms&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;/somepath/perf/example/inline.cpp:main:4-13: 220ms&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;If you put &lt;code&gt;#ifdef PERF_DISABLE_INLINE&lt;/code&gt; in front of the include &lt;code&gt;#include &amp;lt;cpp-perf.hpp&amp;gt;&lt;/code&gt; there will no measurement be performed. The macros are actually expanded int empty lines so that your code is the same as if you would not have put them there.&lt;/p&gt;
&lt;h2&gt;Automatic suite&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-meta"&gt;#&lt;span class="hljs-keyword"&gt;include&lt;/span&gt; &lt;span class="hljs-string"&gt;&amp;lt;cpp-perf.hpp&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-built_in"&gt;PERF_BEGIN&lt;/span&gt;(&lt;span class="hljs-string"&gt;"ExampleModule"&lt;/span&gt;)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-built_in"&gt;PERF_CASE&lt;/span&gt;(&lt;span class="hljs-string"&gt;"example1"&lt;/span&gt;,&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    std::this_thread::&lt;span class="hljs-built_in"&gt;sleep_for&lt;/span&gt;(perf::&lt;span class="hljs-built_in"&gt;milliseconds&lt;/span&gt;(&lt;span class="hljs-number"&gt;20&lt;/span&gt;));&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-built_in"&gt;PERF_CASE&lt;/span&gt;(&lt;span class="hljs-string"&gt;"example1"&lt;/span&gt;,&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-keyword"&gt;for&lt;/span&gt;(&lt;span class="hljs-type"&gt;int&lt;/span&gt; i = &lt;span class="hljs-number"&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class="hljs-number"&gt;20&lt;/span&gt;; i++) std::this_thread::&lt;span class="hljs-built_in"&gt;sleep_for&lt;/span&gt;(perf::&lt;span class="hljs-built_in"&gt;milliseconds&lt;/span&gt;(&lt;span class="hljs-number"&gt;30&lt;/span&gt;));&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;)&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;12&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-built_in"&gt;PERF_END&lt;/span&gt;()&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;Output:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;1/2 Case #1: example1 .....................  Passed  20 ms&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;2/2 Case #2: example2 .....................  Passed  601 ms&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;h2&gt;Manual suites&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-meta"&gt;#&lt;span class="hljs-keyword"&gt;include&lt;/span&gt; &lt;span class="hljs-string"&gt;&amp;lt;cpp-perf.hpp&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;// you can use functions&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-function"&gt;&lt;span class="hljs-type"&gt;bool&lt;/span&gt; &lt;span class="hljs-title"&gt;example2&lt;/span&gt;&lt;span class="hljs-params"&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;5&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    std::this_thread::&lt;span class="hljs-built_in"&gt;sleep_for&lt;/span&gt;(perf::&lt;span class="hljs-built_in"&gt;milliseconds&lt;/span&gt;(&lt;span class="hljs-number"&gt;100&lt;/span&gt;));&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;6&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-keyword"&gt;return&lt;/span&gt; &lt;span class="hljs-literal"&gt;true&lt;/span&gt;;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;7&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;8&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;9&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-comment"&gt;// you can use functors&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;10&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-keyword"&gt;struct&lt;/span&gt; &lt;span class="hljs-title class_"&gt;example3&lt;/span&gt; {&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;11&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-function"&gt;&lt;span class="hljs-type"&gt;bool&lt;/span&gt; &lt;span class="hljs-title"&gt;operator&lt;/span&gt;&lt;span class="hljs-params"&gt;()&lt;/span&gt;&lt;span class="hljs-params"&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;12&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        &lt;span class="hljs-comment"&gt;// exceptions will be caught&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;13&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        &lt;span class="hljs-keyword"&gt;throw&lt;/span&gt; std::&lt;span class="hljs-built_in"&gt;string&lt;/span&gt;(&lt;span class="hljs-string"&gt;"This fails!"&lt;/span&gt;);&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;14&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        &lt;span class="hljs-keyword"&gt;return&lt;/span&gt; &lt;span class="hljs-literal"&gt;true&lt;/span&gt;;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;15&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    }&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;16&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;};&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;17&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;18&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;span class="hljs-function"&gt;&lt;span class="hljs-type"&gt;int&lt;/span&gt; &lt;span class="hljs-title"&gt;main&lt;/span&gt;&lt;span class="hljs-params"&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;19&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;{&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;20&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    example3 functor;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;21&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;22&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-comment"&gt;// you can add cases via the constructor&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;23&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-function"&gt;perf::suite &lt;span class="hljs-title"&gt;suite&lt;/span&gt;&lt;span class="hljs-params"&gt;({&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;24&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        &lt;span class="hljs-comment"&gt;// you can use lambdas&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;25&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        { &lt;span class="hljs-string"&gt;"example1"&lt;/span&gt;, []() { std::this_thread::sleep_for(perf::milliseconds(&lt;span class="hljs-number"&gt;40&lt;/span&gt;)); &lt;span class="hljs-keyword"&gt;return&lt;/span&gt; &lt;span class="hljs-literal"&gt;true&lt;/span&gt;; } },&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;26&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        { &lt;span class="hljs-string"&gt;"example2"&lt;/span&gt;, example2},&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;27&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;        { &lt;span class="hljs-string"&gt;"example3"&lt;/span&gt;, functor}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;28&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    });&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;29&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;30&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-comment"&gt;// you can add cases later&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;31&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    suite.&lt;span class="hljs-built_in"&gt;add_case&lt;/span&gt;(&lt;span class="hljs-string"&gt;"example4"&lt;/span&gt;, []() { std::this_thread::&lt;span class="hljs-built_in"&gt;sleep_for&lt;/span&gt;(perf::&lt;span class="hljs-built_in"&gt;microseconds&lt;/span&gt;(&lt;span class="hljs-number"&gt;800&lt;/span&gt;)); &lt;span class="hljs-keyword"&gt;return&lt;/span&gt; &lt;span class="hljs-literal"&gt;true&lt;/span&gt;; });&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;32&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;33&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-comment"&gt;// run all cases at once&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;34&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    suite.&lt;span class="hljs-built_in"&gt;run&lt;/span&gt;();&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;35&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;36&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-comment"&gt;// print results&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;37&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    std::cout &amp;lt;&amp;lt; suite &amp;lt;&amp;lt; std::endl;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;38&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;39&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;    &lt;span class="hljs-keyword"&gt;return&lt;/span&gt; &lt;span class="hljs-number"&gt;0&lt;/span&gt;;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;40&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;}&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;Output:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;table class="highlight"&gt;
&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;1/4 Case #1: example1 .....................  Passed  40 ms&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;2&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;2/4 Case #2: example2 .....................  Passed  100 ms&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;3&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;3/4 Case #3: example3 .....................  Failed  61 μs&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;pre&gt;4&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre class="highlight"&gt;4/4 Case #4: example4 .....................  Passed  859 μs&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;</content><category term="projects"></category><category term="benchmark"></category><category term="cpp"></category><category term="cpp11"></category><category term="execution-time"></category><category term="header-only"></category><category term="microbenchmark"></category><category term="performance"></category></entry><entry><title>Binet's Formula and Linear Algebra</title><link href="https://fkoehler.org/2014/binet-formula-linalg.html" rel="alternate"></link><published>2014-10-08T11:12:00+02:00</published><updated>2020-11-10T14:50:00+01:00</updated><author><name>Fabian Köhler</name></author><id>tag:fkoehler.org,2014-10-08:/2014/binet-formula-linalg.html</id><summary type="html">&lt;p&gt;Binet's formula can be used to compute an arbitrary member of the Fibonacci sequence. In this post we show how it can be easily derived using some basic linear algebra.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Recently in a moment of clairvoyance, I noticed that the sequence of &lt;a href="https://en.wikipedia.org/wiki/Fibonacci_number"&gt;Fibonacci numbers&lt;/a&gt; is a linear map between an element of the sequence and its two predecessors.
Consequently, one should be able to study it with the tools of linear algebra.
When studying the spectrum of the corresponding matrix, we can identify the &lt;a href="https://en.wikipedia.org/wiki/Golden_ratio"&gt;golden ratio&lt;/a&gt;.
This approach also proves to be an elegant way of deriving &lt;a href="https://en.wikipedia.org/wiki/Fibonacci_number#Closed-form_expression"&gt;Binet's formula&lt;/a&gt;, a closed form for the &lt;span class="math"&gt;&lt;code&gt;$n$&lt;/code&gt;&lt;/span&gt;-th element of the sequence.&lt;/p&gt;
&lt;p&gt;The sequence of Fibonacci numbers is given by&lt;/p&gt;
&lt;div class="math"&gt;&lt;svg height="15.984" viewbox="0 0 166.37 11.988" width="166.37pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M5.208-1.582c.112 0 .28 0 .28-.168 0-.175-.161-.175-.28-.175H1.036c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h4.172z" id="e"&gt;&lt;/path&gt;&lt;path d="M4.09-2.3h2.79c.14 0 .33 0 .33-.2s-.19-.2-.33-.2H4.09v-2.8c0-.14 0-.33-.2-.33s-.2.19-.2.33v2.8H.89c-.14 0-.33 0-.33.2s.19.2.33.2h2.8V.5c0 .14 0 .33.2.33s.2-.19.2-.33v-2.8z" id="g"&gt;&lt;/path&gt;&lt;path d="M2.94-6.4c0-.24 0-.26-.23-.26-.62.64-1.5.64-1.82.64v.31c.2 0 .79 0 1.31-.26v5.18c0 .36-.03.48-.93.48H.95V0c.35-.03 1.22-.03 1.62-.03s1.27 0 1.62.03v-.31h-.32c-.9 0-.93-.11-.93-.48V-6.4Z" id="k"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="d"&gt;&lt;/path&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="f"&gt;&lt;/path&gt;&lt;path d="M3.535-1.274h-.238c-.021.154-.091.567-.182.637-.056.042-.595.042-.693.042H1.134c.735-.651.98-.847 1.4-1.176.518-.413 1.001-.847 1.001-1.512 0-.847-.742-1.365-1.638-1.365-.868 0-1.456.609-1.456 1.253 0 .357.301.392.371.392.168 0 .371-.119.371-.371 0-.126-.049-.371-.413-.371.217-.497.693-.651 1.022-.651.7 0 1.064.546 1.064 1.113 0 .609-.434 1.092-.658 1.344L.511-.273C.441-.21.441-.196.441 0h2.884l.21-1.274Z" id="h"&gt;&lt;/path&gt;&lt;path d="M.854-.441c-.028.091-.07.266-.07.287 0 .154.126.224.238.224.126 0 .238-.091.273-.154s.091-.287.126-.434c.035-.133.112-.455.154-.63.042-.154.084-.308.119-.469.077-.287.091-.343.294-.63.196-.28.525-.644 1.05-.644.406 0 .413.357.413.49 0 .42-.301 1.197-.413 1.491-.077.196-.105.259-.105.378 0 .371.308.602.665.602.7 0 1.008-.966 1.008-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.042-.133.119-.161.56-.462.847-.742.847-.147 0-.175-.098-.175-.245 0-.161.035-.252.161-.567.084-.217.371-.959.371-1.351 0-.679-.539-.798-.91-.798-.581 0-.973.357-1.183.637-.049-.483-.462-.637-.749-.637-.301 0-.462.217-.553.378-.154.259-.252.658-.252.693 0 .091.098.091.119.091.098 0 .105-.021.154-.21.105-.413.238-.756.511-.756.182 0 .231.154.231.343 0 .133-.063.392-.112.581s-.119.476-.154.63l-.224.896z" id="c"&gt;&lt;/path&gt;&lt;path d="M6.75-2.28c.11-.05.19-.1.19-.22s-.08-.17-.19-.22L1.21-5.33c-.13-.07-.15-.07-.18-.07-.11 0-.2.09-.2.2 0 .09.05.15.19.22L6.27-2.5 1.02-.02C.88.05.83.11.83.2c0 .11.09.2.2.2.03 0 .05 0 .18-.07l5.54-2.61Z" id="j"&gt;&lt;/path&gt;&lt;path d="M3.73-3.78c-.18-.37-.47-.64-.92-.64C1.64-4.42.4-2.95.4-1.49.4-.55.95.11 1.73.11c.2 0 .7-.04 1.3-.75.08.42.43.75.91.75.35 0 .58-.23.74-.55.17-.36.3-.97.3-.99 0-.1-.09-.1-.12-.1-.1 0-.11.04-.14.18-.17.65-.35 1.24-.76 1.24-.27 0-.3-.26-.3-.46 0-.22.02-.3.13-.74.11-.42.13-.52.22-.9l.36-1.4c.07-.28.07-.3.07-.34 0-.17-.12-.27-.29-.27-.24 0-.39.22-.42.44zm-.65 2.59c-.05.18-.05.2-.2.37-.44.55-.85.71-1.13.71-.5 0-.64-.55-.64-.94 0-.5.32-1.73.55-2.19.31-.59.76-.96 1.16-.96.65 0 .79.82.79.88s-.02.12-.03.17l-.5 1.96z" id="b"&gt;&lt;/path&gt;&lt;path d="M.88-.59c-.03.15-.09.38-.09.43 0 .18.14.27.29.27.12 0 .3-.08.37-.28.01-.02.13-.49.19-.74l.22-.9c.06-.22.12-.44.17-.67.04-.17.12-.46.13-.5.15-.31.68-1.22 1.63-1.22.45 0 .54.37.54.7 0 .62-.49 1.9-.65 2.33-.09.23-.1.35-.1.46 0 .47.35.82.82.82.94 0 1.31-1.46 1.31-1.54 0-.1-.09-.1-.12-.1-.1 0-.1.03-.15.18-.2.68-.53 1.24-1.02 1.24-.17 0-.24-.1-.24-.33 0-.25.09-.49.18-.71.19-.53.61-1.63.61-2.2 0-.67-.43-1.07-1.15-1.07-.9 0-1.39.64-1.56.87-.05-.56-.46-.87-.92-.87s-.65.39-.75.57c-.16.34-.3.93-.3.97 0 .1.1.1.12.1.1 0 .11-.01.17-.23.17-.71.37-1.19.73-1.19.2 0 .31.13.31.46 0 .21-.03.32-.16.84L.88-.59z" id="i"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 8.748h116.115V.003H-2.394Z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 8.748) scale(1.00375)"&gt;&lt;use x="2.00047" xlink:href="#b" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="7.28622" xlink:href="#c" y="-.83311"&gt;&lt;/use&gt;&lt;use x="15.50693" xlink:href="#d" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="26.06237" xlink:href="#b" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="31.34811" xlink:href="#c" y="-.83311"&gt;&lt;/use&gt;&lt;use x="36.29158" xlink:href="#e" y="-.83311"&gt;&lt;/use&gt;&lt;use x="42.54192" xlink:href="#f" y="-.83311"&gt;&lt;/use&gt;&lt;use x="49.25" xlink:href="#g" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="59.25036" xlink:href="#b" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="64.53609" xlink:href="#c" y="-.83311"&gt;&lt;/use&gt;&lt;use x="69.47956" xlink:href="#e" y="-.83311"&gt;&lt;/use&gt;&lt;use x="75.7289" xlink:href="#h" y="-.83311"&gt;&lt;/use&gt;&lt;use x="90.21504" xlink:href="#i" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="98.98505" xlink:href="#j" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="109.55128" xlink:href="#k" y="-2.33372"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$a_{n}=a_{n-1}+a_{n-2}\quad n&amp;gt;1$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;with the starting values &lt;span class="math"&gt;&lt;code&gt;$a_0=0$&lt;/code&gt;&lt;/span&gt; and &lt;span class="math"&gt;&lt;code&gt;$a_1=1$&lt;/code&gt;&lt;/span&gt;.
This resembles a linear map between each element and its two predecessors. Consequently we can rewrite this formula in the language of linear algebra as a matrix vector multiplication&lt;/p&gt;
&lt;div class="math"&gt;&lt;svg height="77.58" viewbox="0 0 181.66 58.185" width="181.66pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M4.4-1.11c.08 0 .215 0 .215-.14s-.135-.14-.215-.14H1.015c-.08 0-.215 0-.215.14s.135.14.215.14H4.4Z" id="t"&gt;&lt;/path&gt;&lt;path d="M5.208-1.582c.112 0 .28 0 .28-.168 0-.175-.161-.175-.28-.175H1.036c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h4.172z" id="e"&gt;&lt;/path&gt;&lt;path d="M7.147-4.214c.063-.259.077-.315.595-.315.147 0 .238 0 .238-.147 0-.105-.084-.105-.21-.105h-.952c-.203 0-.21.007-.301.14L3.815-.651l-.693-3.941c-.035-.182-.035-.189-.245-.189H1.876c-.14 0-.231 0-.231.154 0 .098.084.098.238.098.112 0 .14 0 .266.014.14.014.154.028.154.098 0 .007 0 .049-.028.154L1.393-.749c-.063.238-.168.476-.728.497-.056 0-.147.007-.147.154 0 .007.007.098.105.098.21 0 .504-.028.728-.028.168 0 .574.028.742.028.035 0 .14 0 .14-.154 0-.091-.091-.098-.154-.098-.448-.014-.448-.196-.448-.294 0-.028 0-.063.028-.175l.931-3.724h.007l.749 4.256c.021.126.035.189.14.189.098 0 .154-.077.203-.154l2.94-4.361.007.007-.987 3.962c-.056.238-.07.294-.616.294-.126 0-.21 0-.21.154 0 .007 0 .098.112.098.133 0 .294-.021.434-.021s.301-.007.441-.007c.196 0 .693.028.889.028.042 0 .147 0 .147-.154 0-.098-.084-.098-.224-.098-.007 0-.14 0-.266-.014-.161-.014-.161-.035-.161-.105 0-.042.021-.112.028-.154l.924-3.689z" id="r"&gt;&lt;/path&gt;&lt;path d="M2.954-2.674c-.147-.231-.385-.413-.721-.413-.896 0-1.806.987-1.806 1.995C.427-.413.882.07 1.484.07c.378 0 .714-.217.994-.49.133.42.539.49.721.49.252 0 .427-.154.553-.371.154-.273.245-.672.245-.7 0-.091-.091-.091-.112-.091-.098 0-.105.028-.154.217-.084.336-.217.749-.511.749-.182 0-.231-.154-.231-.343 0-.119.056-.371.105-.553.049-.189.119-.476.154-.63l.14-.532c.042-.182.126-.511.126-.546 0-.154-.126-.224-.238-.224-.119 0-.28.084-.322.28zM2.506-.875c-.049.196-.203.336-.357.469-.063.056-.343.28-.644.28-.259 0-.511-.182-.511-.679 0-.371.203-1.141.364-1.421.322-.56.679-.665.875-.665.49 0 .623.532.623.609 0 .028-.014.077-.021.098L2.506-.875z" id="m"&gt;&lt;/path&gt;&lt;path d="M.854-.441c-.028.091-.07.266-.07.287 0 .154.126.224.238.224.126 0 .238-.091.273-.154s.091-.287.126-.434c.035-.133.112-.455.154-.63.042-.154.084-.308.119-.469.077-.287.091-.343.294-.63.196-.28.525-.644 1.05-.644.406 0 .413.357.413.49 0 .42-.301 1.197-.413 1.491-.077.196-.105.259-.105.378 0 .371.308.602.665.602.7 0 1.008-.966 1.008-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.042-.133.119-.161.56-.462.847-.742.847-.147 0-.175-.098-.175-.245 0-.161.035-.252.161-.567.084-.217.371-.959.371-1.351 0-.679-.539-.798-.91-.798-.581 0-.973.357-1.183.637-.049-.483-.462-.637-.749-.637-.301 0-.462.217-.553.378-.154.259-.252.658-.252.693 0 .091.098.091.119.091.098 0 .105-.021.154-.21.105-.413.238-.756.511-.756.182 0 .231.154.231.343 0 .133-.063.392-.112.581s-.119.476-.154.63l-.224.896z" id="d"&gt;&lt;/path&gt;&lt;path d="M4.053-4.137c-.056.049-.301.266-.301.378 0 .098.084.175.175.175.077 0 .119-.049.161-.105.175-.203.392-.35.574-.434.098-.042.175-.077.175-.189 0-.091-.07-.133-.133-.168-.231-.14-.294-.315-.329-.406-.014-.042-.056-.147-.175-.147-.049 0-.168.042-.168.175 0 .098.105.294.168.378H1.687c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h2.366z" id="l"&gt;&lt;/path&gt;&lt;path d="M4.6-3.2c0-.8-.05-1.6-.4-2.34-.46-.96-1.28-1.12-1.7-1.12-.6 0-1.33.26-1.74 1.19C.44-4.78.39-4 .39-3.2c0 .75.04 1.65.45 2.41C1.27.02 2 .22 2.49.22c.54 0 1.3-.21 1.74-1.16.32-.69.37-1.47.37-2.26ZM2.49 0c-.39 0-.98-.25-1.16-1.21-.11-.6-.11-1.52-.11-2.11 0-.64 0-1.3.08-1.84.19-1.19.94-1.28 1.19-1.28.33 0 .99.18 1.18 1.17.1.56.1 1.32.1 1.95 0 .75 0 1.43-.11 2.07C3.51-.3 2.94 0 2.49 0Z" id="q"&gt;&lt;/path&gt;&lt;path d="M2.94-6.4c0-.24 0-.26-.23-.26-.62.64-1.5.64-1.82.64v.31c.2 0 .79 0 1.31-.26v5.18c0 .36-.03.48-.93.48H.95V0c.35-.03 1.22-.03 1.62-.03s1.27 0 1.62.03v-.31h-.32c-.9 0-.93-.11-.93-.48V-6.4Z" id="p"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="o"&gt;&lt;/path&gt;&lt;path d="M.975-.49C.945-.365.89-.145.89-.12c0 .11.09.175.185.175.075 0 .185-.04.24-.165.005-.025.065-.26.095-.39.17-.675.17-.685.18-.705.065-.135.425-.835 1.035-.835.245 0 .35.135.35.36 0 .285-.21.8-.325 1.085-.025.06-.05.125-.05.21 0 .26.25.44.545.44.535 0 .81-.65.81-.775 0-.07-.085-.07-.105-.07-.085 0-.09.02-.12.115-.095.3-.325.56-.565.56-.115 0-.15-.08-.15-.19 0-.105.02-.155.065-.265.085-.2.315-.77.315-1.045 0-.37-.265-.595-.74-.595-.455 0-.77.275-.945.495-.025-.41-.425-.495-.61-.495-.5 0-.645.765-.645.775 0 .07.08.07.105.07.085 0 .095-.03.115-.095.075-.29.19-.58.4-.58.17 0 .205.16.205.265 0 .07-.05.26-.08.39-.035.135-.085.34-.11.45L.975-.49Z" id="n"&gt;&lt;/path&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="f"&gt;&lt;/path&gt;&lt;path d="M3.535-1.274h-.238c-.021.154-.091.567-.182.637-.056.042-.595.042-.693.042H1.134c.735-.651.98-.847 1.4-1.176.518-.413 1.001-.847 1.001-1.512 0-.847-.742-1.365-1.638-1.365-.868 0-1.456.609-1.456 1.253 0 .357.301.392.371.392.168 0 .371-.119.371-.371 0-.126-.049-.371-.413-.371.217-.497.693-.651 1.022-.651.7 0 1.064.546 1.064 1.113 0 .609-.434 1.092-.658 1.344L.511-.273C.441-.21.441-.196.441 0h2.884l.21-1.274Z" id="s"&gt;&lt;/path&gt;&lt;path d="M3.73-3.78c-.18-.37-.47-.64-.92-.64C1.64-4.42.4-2.95.4-1.49.4-.55.95.11 1.73.11c.2 0 .7-.04 1.3-.75.08.42.43.75.91.75.35 0 .58-.23.74-.55.17-.36.3-.97.3-.99 0-.1-.09-.1-.12-.1-.1 0-.11.04-.14.18-.17.65-.35 1.24-.76 1.24-.27 0-.3-.26-.3-.46 0-.22.02-.3.13-.74.11-.42.13-.52.22-.9l.36-1.4c.07-.28.07-.3.07-.34 0-.17-.12-.27-.29-.27-.24 0-.39.22-.42.44zm-.65 2.59c-.05.18-.05.2-.2.37-.44.55-.85.71-1.13.71-.5 0-.64-.55-.64-.94 0-.5.32-1.73.55-2.19.31-.59.76-.96 1.16-.96.65 0 .79.82.79.88s-.02.12-.03.17l-.5 1.96z" id="c"&gt;&lt;/path&gt;&lt;path d="M1.99-3.18c0-.15-.015-.15-.18-.15-.355.32-.91.32-1.01.32H.715v.22H.8c.115 0 .44-.015.73-.14v2.5c0 .155 0 .21-.53.21H.75V0c.275-.02.72-.02 1.01-.02s.735 0 1.01.02v-.22h-.25c-.53 0-.53-.055-.53-.21v-2.75Z" id="u"&gt;&lt;/path&gt;&lt;path d="M7 23.49c0-.04-.02-.06-.04-.09-.37-.37-1.04-1.04-1.71-2.12-1.61-2.58-2.34-5.83-2.34-9.68 0-2.69.36-6.16 2.01-9.14C5.71 1.04 6.53.22 6.97-.22 7-.25 7-.27 7-.3c0-.1-.07-.1-.21-.1s-.16 0-.31.15c-3.35 3.05-4.4 7.63-4.4 11.84 0 3.93.9 7.89 3.44 10.88.2.23.58.64.99 1 .12.12.14.12.28.12s.21 0 .21-.1z" id="b"&gt;&lt;/path&gt;&lt;path d="M5.27 11.6c0-3.93-.9-7.89-3.44-10.88-.2-.23-.58-.64-.99-1C.72-.4.7-.4.56-.4c-.12 0-.21 0-.21.1 0 .04.04.08.06.1C.76.16 1.43.83 2.1 1.91c1.61 2.58 2.34 5.83 2.34 9.68 0 2.69-.36 6.16-2.01 9.14C1.64 22.15.81 22.98.39 23.4c-.02.03-.04.06-.04.09 0 .1.09.1.21.1.14 0 .16 0 .31-.15 3.35-3.05 4.4-7.63 4.4-11.84z" id="g"&gt;&lt;/path&gt;&lt;path d="M4.6-.92c0-.27 0-.28-.21-.28-1.02 0-3.27.48-4.63 2.92v.16c0 .25.01.26.24.26.19 0 .2-.01.25-.08C1.07.75 2.45.04 4.48 0c.12 0 .12-.07.12-.28v-.64Z" id="j"&gt;&lt;/path&gt;&lt;path d="M4.74 1.72C3.38-.73 1.13-1.2.11-1.2c-.21 0-.21.01-.21.28v.64c0 .23 0 .28.14.28.61.01 1.6.09 2.5.53 1.08.54 1.49 1.17 1.74 1.56.03.05.09.05.22.05.23 0 .24-.01.24-.26v-.16Z" id="i"&gt;&lt;/path&gt;&lt;path d="M4.6-.92c0-.23 0-.28-.14-.28-.61-.01-1.6-.09-2.5-.53C.88-2.27.47-2.9.22-3.29.19-3.34.13-3.34 0-3.34c-.23 0-.24.01-.24.26v.16C1.12-.47 3.37 0 4.39 0c.21 0 .21-.01.21-.28v-.64Z" id="h"&gt;&lt;/path&gt;&lt;path d="M4.74-3.08c0-.25-.01-.26-.24-.26-.19 0-.2.01-.25.08C3.43-1.95 2.05-1.24.02-1.2c-.12 0-.12.07-.12.28v.64c0 .27 0 .28.21.28 1.02 0 3.27-.48 4.63-2.92v-.16Z" id="k"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-1.764 40.572h124.63V-.007H-1.764z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-1.764 40.572) scale(1.0038)"&gt;&lt;use x="2.00047" xlink:href="#b" y="-40.33168"&gt;&lt;/use&gt;&lt;use x="14.47909" xlink:href="#c" y="-32.33079"&gt;&lt;/use&gt;&lt;use x="19.76484" xlink:href="#d" y="-30.83118"&gt;&lt;/use&gt;&lt;use x="9.36097" xlink:href="#c" y="-20.33096"&gt;&lt;/use&gt;&lt;use x="14.64672" xlink:href="#d" y="-18.83135"&gt;&lt;/use&gt;&lt;use x="19.59018" xlink:href="#e" y="-18.83135"&gt;&lt;/use&gt;&lt;use x="25.84053" xlink:href="#f" y="-18.83135"&gt;&lt;/use&gt;&lt;use x="30.3263" xlink:href="#g" y="-40.33168"&gt;&lt;/use&gt;&lt;use x="2.00047" xlink:href="#h" y="-12.53082"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path d="M4.712 28.088h8.811v-1.195H4.712z"&gt;&lt;/path&gt;&lt;g transform="translate(-1.764 40.572) scale(1.0038)"&gt;&lt;use x="15.34332" xlink:href="#i" y="-12.53082"&gt;&lt;/use&gt;&lt;use x="19.84332" xlink:href="#j" y="-12.53082"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path d="M22.489 28.088H31.3v-1.195h-8.811z"&gt;&lt;/path&gt;&lt;g transform="translate(-1.764 40.572) scale(1.0038)"&gt;&lt;use x="33.18799" xlink:href="#k" y="-12.53082"&gt;&lt;/use&gt;&lt;use x="14.80531" xlink:href="#l" y="-2.83358"&gt;&lt;/use&gt;&lt;use x="15.22531" xlink:href="#m" y="-2.83358"&gt;&lt;/use&gt;&lt;use x="19.56108" xlink:href="#n" y="-1.83385"&gt;&lt;/use&gt;&lt;use x="40.46518" xlink:href="#o" y="-26.231"&gt;&lt;/use&gt;&lt;use x="51.02061" xlink:href="#b" y="-40.33168"&gt;&lt;/use&gt;&lt;use x="58.38212" xlink:href="#p" y="-32.33079"&gt;&lt;/use&gt;&lt;use x="73.38212" xlink:href="#p" y="-32.33079"&gt;&lt;/use&gt;&lt;use x="58.38212" xlink:href="#p" y="-20.33096"&gt;&lt;/use&gt;&lt;use x="73.38212" xlink:href="#q" y="-20.33096"&gt;&lt;/use&gt;&lt;use x="78.38183" xlink:href="#g" y="-40.33168"&gt;&lt;/use&gt;&lt;use x="51.02061" xlink:href="#h" y="-12.53082"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path d="M53.549 28.088h8.33v-1.195h-8.33z"&gt;&lt;/path&gt;&lt;g transform="translate(-1.764 40.572) scale(1.0038)"&gt;&lt;use x="63.88166" xlink:href="#i" y="-12.53082"&gt;&lt;/use&gt;&lt;use x="68.38166" xlink:href="#j" y="-12.53082"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path d="M70.846 28.088h8.33v-1.195h-8.33z"&gt;&lt;/path&gt;&lt;g transform="translate(-1.764 40.572) scale(1.0038)"&gt;&lt;use x="81.24353" xlink:href="#k" y="-12.53082"&gt;&lt;/use&gt;&lt;use x="64.19381" xlink:href="#r" y="-3.08151"&gt;&lt;/use&gt;&lt;use x="87.40956" xlink:href="#b" y="-40.33168"&gt;&lt;/use&gt;&lt;use x="94.77106" xlink:href="#c" y="-32.33079"&gt;&lt;/use&gt;&lt;use x="100.05678" xlink:href="#d" y="-30.83118"&gt;&lt;/use&gt;&lt;use x="105.00025" xlink:href="#e" y="-30.83118"&gt;&lt;/use&gt;&lt;use x="111.2506" xlink:href="#f" y="-30.83118"&gt;&lt;/use&gt;&lt;use x="94.77106" xlink:href="#c" y="-20.33096"&gt;&lt;/use&gt;&lt;use x="100.05678" xlink:href="#d" y="-18.83135"&gt;&lt;/use&gt;&lt;use x="105.00025" xlink:href="#e" y="-18.83135"&gt;&lt;/use&gt;&lt;use x="111.2506" xlink:href="#s" y="-18.83135"&gt;&lt;/use&gt;&lt;use x="115.73639" xlink:href="#g" y="-40.33168"&gt;&lt;/use&gt;&lt;use x="87.40956" xlink:href="#h" y="-12.53082"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path d="M89.802 28.088h8.811v-1.195h-8.811z"&gt;&lt;/path&gt;&lt;g transform="translate(-1.764 40.572) scale(1.0038)"&gt;&lt;use x="100.75342" xlink:href="#i" y="-12.53082"&gt;&lt;/use&gt;&lt;use x="105.25341" xlink:href="#j" y="-12.53082"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path d="M107.58 28.088h8.811v-1.195h-8.811z"&gt;&lt;/path&gt;&lt;g transform="translate(-1.764 40.572) scale(1.0038)"&gt;&lt;use x="118.59708" xlink:href="#k" y="-12.53082"&gt;&lt;/use&gt;&lt;use x="95.8049" xlink:href="#l" y="-2.83358"&gt;&lt;/use&gt;&lt;use x="96.2249" xlink:href="#m" y="-2.83358"&gt;&lt;/use&gt;&lt;use x="100.56069" xlink:href="#n" y="-1.83385"&gt;&lt;/use&gt;&lt;use x="104.96515" xlink:href="#t" y="-1.83385"&gt;&lt;/use&gt;&lt;use x="110.38138" xlink:href="#u" y="-1.83385"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$\underbrace{\begin{pmatrix}a_{n} \\ a_{n-1}\end{pmatrix}}_{\vec{a}_{n}}=\underbrace{\begin{pmatrix}1 &amp;amp; 1 \\ 1 &amp;amp; 0\end{pmatrix}}_{M}\underbrace{\begin{pmatrix}a_{n-1} \\ a_{n-2}\end{pmatrix}}_{\vec{a}_{n-1}}$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;We can insert this equation recursively into itself to obtain the relation&lt;/p&gt;
&lt;div class="math"&gt;&lt;svg height="19.368" viewbox="0 0 266.6 14.526" width="266.6pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="h"&gt;&lt;/path&gt;&lt;path d="M3.535-1.274h-.238c-.021.154-.091.567-.182.637-.056.042-.595.042-.693.042H1.134c.735-.651.98-.847 1.4-1.176.518-.413 1.001-.847 1.001-1.512 0-.847-.742-1.365-1.638-1.365-.868 0-1.456.609-1.456 1.253 0 .357.301.392.371.392.168 0 .371-.119.371-.371 0-.126-.049-.371-.413-.371.217-.497.693-.651 1.022-.651.7 0 1.064.546 1.064 1.113 0 .609-.434 1.092-.658 1.344L.511-.273C.441-.21.441-.196.441 0h2.884l.21-1.274Z" id="i"&gt;&lt;/path&gt;&lt;path d="M5.208-1.582c.112 0 .28 0 .28-.168 0-.175-.161-.175-.28-.175H1.036c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h4.172z" id="g"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="e"&gt;&lt;/path&gt;&lt;path d="M.854-.441c-.028.091-.07.266-.07.287 0 .154.126.224.238.224.126 0 .238-.091.273-.154s.091-.287.126-.434c.035-.133.112-.455.154-.63.042-.154.084-.308.119-.469.077-.287.091-.343.294-.63.196-.28.525-.644 1.05-.644.406 0 .413.357.413.49 0 .42-.301 1.197-.413 1.491-.077.196-.105.259-.105.378 0 .371.308.602.665.602.7 0 1.008-.966 1.008-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.042-.133.119-.161.56-.462.847-.742.847-.147 0-.175-.098-.175-.245 0-.161.035-.252.161-.567.084-.217.371-.959.371-1.351 0-.679-.539-.798-.91-.798-.581 0-.973.357-1.183.637-.049-.483-.462-.637-.749-.637-.301 0-.462.217-.553.378-.154.259-.252.658-.252.693 0 .091.098.091.119.091.098 0 .105-.021.154-.21.105-.413.238-.756.511-.756.182 0 .231.154.231.343 0 .133-.063.392-.112.581s-.119.476-.154.63l-.224.896z" id="d"&gt;&lt;/path&gt;&lt;path d="M1.92-.53c0-.29-.24-.53-.53-.53s-.53.24-.53.53.24.53.53.53.53-.24.53-.53Z" id="j"&gt;&lt;/path&gt;&lt;path d="M9.26-6.06c.09-.36.11-.46.86-.46.23 0 .32 0 .32-.2 0-.11-.1-.11-.27-.11H8.85c-.26 0-.27 0-.39.19L4.81-.94 4.03-6.6c-.03-.23-.05-.23-.31-.23H2.35c-.19 0-.3 0-.3.19 0 .12.09.12.29.12.13 0 .31.01.43.02.16.02.22.05.22.16 0 .04-.01.07-.04.19L1.68-1.06c-.1.4-.27.72-1.08.75-.05 0-.18.01-.18.19 0 .09.06.12.14.12.32 0 .67-.03 1-.03.34 0 .7.03 1.03.03.05 0 .18 0 .18-.2 0-.11-.11-.11-.18-.11-.57-.01-.68-.21-.68-.44 0-.07.01-.12.04-.23l1.36-5.45h.01l.86 6.2c.02.12.03.23.15.23.11 0 .17-.11.22-.18l4.04-6.33h.01L7.17-.78c-.1.39-.12.47-.91.47-.17 0-.28 0-.28.19 0 .12.12.12.15.12.28 0 .96-.03 1.24-.03.41 0 .84.03 1.25.03.06 0 .19 0 .19-.2 0-.11-.09-.11-.28-.11-.37 0-.65 0-.65-.18 0-.04 0-.06.05-.24l1.33-5.33Z" id="f"&gt;&lt;/path&gt;&lt;path d="M3.73-3.78c-.18-.37-.47-.64-.92-.64C1.64-4.42.4-2.95.4-1.49.4-.55.95.11 1.73.11c.2 0 .7-.04 1.3-.75.08.42.43.75.91.75.35 0 .58-.23.74-.55.17-.36.3-.97.3-.99 0-.1-.09-.1-.12-.1-.1 0-.11.04-.14.18-.17.65-.35 1.24-.76 1.24-.27 0-.3-.26-.3-.46 0-.22.02-.3.13-.74.11-.42.13-.52.22-.9l.36-1.4c.07-.28.07-.3.07-.34 0-.17-.12-.27-.29-.27-.24 0-.39.22-.42.44zm-.65 2.59c-.05.18-.05.2-.2.37-.44.55-.85.71-1.13.71-.5 0-.64-.55-.64-.94 0-.5.32-1.73.55-2.19.31-.59.76-.96 1.16-.96.65 0 .79.82.79.88s-.02.12-.03.17l-.5 1.96z" id="c"&gt;&lt;/path&gt;&lt;path d="M5.37-5.95c-.14.13-.47.41-.47.59 0 .1.1.2.2.2.09 0 .14-.07.19-.13.12-.15.35-.43.79-.65.07-.04.17-.09.17-.21 0-.1-.07-.15-.14-.2-.22-.15-.33-.33-.41-.57-.02-.09-.06-.22-.2-.22s-.2.13-.2.21c0 .05.08.37.24.58H2.17c-.17 0-.35 0-.35.2s.18.2.35.2h3.2z" id="b"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 10.44h183.285V.006H-2.394Z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 10.44) scale(1.00375)"&gt;&lt;use x="1.37413" xlink:href="#b" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="2.00413" xlink:href="#c" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="7.28622" xlink:href="#d" y="-.83311"&gt;&lt;/use&gt;&lt;use x="15.50693" xlink:href="#e" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="26.06237" xlink:href="#f" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="36.22237" xlink:href="#b" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="36.86237" xlink:href="#c" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="42.14043" xlink:href="#d" y="-.83311"&gt;&lt;/use&gt;&lt;use x="47.08289" xlink:href="#g" y="-.83311"&gt;&lt;/use&gt;&lt;use x="53.33324" xlink:href="#h" y="-.83311"&gt;&lt;/use&gt;&lt;use x="60.59739" xlink:href="#e" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="71.15283" xlink:href="#f" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="81.94412" xlink:href="#i" y="-5.96227"&gt;&lt;/use&gt;&lt;use x="85.80457" xlink:href="#b" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="86.43457" xlink:href="#c" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="91.71663" xlink:href="#d" y="-.83311"&gt;&lt;/use&gt;&lt;use x="96.66009" xlink:href="#g" y="-.83311"&gt;&lt;/use&gt;&lt;use x="102.90944" xlink:href="#i" y="-.83311"&gt;&lt;/use&gt;&lt;use x="110.17361" xlink:href="#e" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="120.72904" xlink:href="#j" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="125.16905" xlink:href="#j" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="129.61906" xlink:href="#j" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="135.17301" xlink:href="#e" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="145.72844" xlink:href="#f" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="156.52072" xlink:href="#d" y="-5.96227"&gt;&lt;/use&gt;&lt;use x="161.46418" xlink:href="#g" y="-5.96227"&gt;&lt;/use&gt;&lt;use x="167.71353" xlink:href="#h" y="-5.96227"&gt;&lt;/use&gt;&lt;use x="171.574" xlink:href="#b" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="172.20401" xlink:href="#c" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="177.48604" xlink:href="#h" y="-.83311"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$\vec{a}_{n}=M\vec{a}_{n-1}=M^2 \vec{a}_{n-2}=\ldots=M^{n-1}\vec{a}_1$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;to the starting value&lt;/p&gt;
&lt;div class="math"&gt;&lt;svg height="47.808" viewbox="0 0 68.742 35.856" width="91.656" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M7 23.49c0-.04-.02-.06-.04-.09-.37-.37-1.04-1.04-1.71-2.12-1.61-2.58-2.34-5.83-2.34-9.68 0-2.69.36-6.16 2.01-9.14C5.71 1.04 6.53.22 6.97-.22 7-.25 7-.27 7-.3c0-.1-.07-.1-.21-.1s-.16 0-.31.15c-3.35 3.05-4.4 7.63-4.4 11.84 0 3.93.9 7.89 3.44 10.88.2.23.58.64.99 1 .12.12.14.12.28.12s.21 0 .21-.1z" id="f"&gt;&lt;/path&gt;&lt;path d="M5.27 11.6c0-3.93-.9-7.89-3.44-10.88-.2-.23-.58-.64-.99-1C.72-.4.7-.4.56-.4c-.12 0-.21 0-.21.1 0 .04.04.08.06.1C.76.16 1.43.83 2.1 1.91c1.61 2.58 2.34 5.83 2.34 9.68 0 2.69-.36 6.16-2.01 9.14C1.64 22.15.81 22.98.39 23.4c-.02.03-.04.06-.04.09 0 .1.09.1.21.1.14 0 .16 0 .31-.15 3.35-3.05 4.4-7.63 4.4-11.84z" id="i"&gt;&lt;/path&gt;&lt;path d="M4.6-3.2c0-.8-.05-1.6-.4-2.34-.46-.96-1.28-1.12-1.7-1.12-.6 0-1.33.26-1.74 1.19C.44-4.78.39-4 .39-3.2c0 .75.04 1.65.45 2.41C1.27.02 2 .22 2.49.22c.54 0 1.3-.21 1.74-1.16.32-.69.37-1.47.37-2.26ZM2.49 0c-.39 0-.98-.25-1.16-1.21-.11-.6-.11-1.52-.11-2.11 0-.64 0-1.3.08-1.84.19-1.19.94-1.28 1.19-1.28.33 0 .99.18 1.18 1.17.1.56.1 1.32.1 1.95 0 .75 0 1.43-.11 2.07C3.51-.3 2.94 0 2.49 0Z" id="h"&gt;&lt;/path&gt;&lt;path d="M2.94-6.4c0-.24 0-.26-.23-.26-.62.64-1.5.64-1.82.64v.31c.2 0 .79 0 1.31-.26v5.18c0 .36-.03.48-.93.48H.95V0c.35-.03 1.22-.03 1.62-.03s1.27 0 1.62.03v-.31h-.32c-.9 0-.93-.11-.93-.48V-6.4Z" id="g"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="e"&gt;&lt;/path&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="d"&gt;&lt;/path&gt;&lt;path d="M1.92-.53c0-.29-.24-.53-.53-.53s-.53.24-.53.53.24.53.53.53.53-.24.53-.53Z" id="j"&gt;&lt;/path&gt;&lt;path d="M3.73-3.78c-.18-.37-.47-.64-.92-.64C1.64-4.42.4-2.95.4-1.49.4-.55.95.11 1.73.11c.2 0 .7-.04 1.3-.75.08.42.43.75.91.75.35 0 .58-.23.74-.55.17-.36.3-.97.3-.99 0-.1-.09-.1-.12-.1-.1 0-.11.04-.14.18-.17.65-.35 1.24-.76 1.24-.27 0-.3-.26-.3-.46 0-.22.02-.3.13-.74.11-.42.13-.52.22-.9l.36-1.4c.07-.28.07-.3.07-.34 0-.17-.12-.27-.29-.27-.24 0-.39.22-.42.44zm-.65 2.59c-.05.18-.05.2-.2.37-.44.55-.85.71-1.13.71-.5 0-.64-.55-.64-.94 0-.5.32-1.73.55-2.19.31-.59.76-.96 1.16-.96.65 0 .79.82.79.88s-.02.12-.03.17l-.5 1.96z" id="c"&gt;&lt;/path&gt;&lt;path d="M5.37-5.95c-.14.13-.47.41-.47.59 0 .1.1.2.2.2.09 0 .14-.07.19-.13.12-.15.35-.43.79-.65.07-.04.17-.09.17-.21 0-.1-.07-.15-.14-.2-.22-.15-.33-.33-.41-.57-.02-.09-.06-.22-.2-.22s-.2.13-.2.21c0 .05.08.37.24.58H2.17c-.17 0-.35 0-.35.2s.18.2.35.2h3.2z" id="b"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 23.904h51.08V-.007h-51.08Z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 23.904) scale(1.00375)"&gt;&lt;use x="1.37413" xlink:href="#b" y="-9.50049"&gt;&lt;/use&gt;&lt;use x="2.00413" xlink:href="#c" y="-9.50049"&gt;&lt;/use&gt;&lt;use x="7.28622" xlink:href="#d" y="-7.99988"&gt;&lt;/use&gt;&lt;use x="14.54936" xlink:href="#e" y="-9.50049"&gt;&lt;/use&gt;&lt;use x="25.10479" xlink:href="#f" y="-23.60017"&gt;&lt;/use&gt;&lt;use x="32.46629" xlink:href="#g" y="-15.60028"&gt;&lt;/use&gt;&lt;use x="32.46629" xlink:href="#h" y="-3.60045"&gt;&lt;/use&gt;&lt;use x="37.46597" xlink:href="#i" y="-23.60017"&gt;&lt;/use&gt;&lt;use x="46.4937" xlink:href="#j" y="-9.50049"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$\vec{a}_1=\begin{pmatrix}1 \\ 0\end{pmatrix}.$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;For the further derivation it is beneficial to use the expression&lt;/p&gt;
&lt;div class="math"&gt;&lt;svg height="18.864" viewbox="0 0 87.588 14.148" width="116.784" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="g"&gt;&lt;/path&gt;&lt;path d="M3.241-1.582h2.142c.091 0 .259 0 .259-.168 0-.175-.161-.175-.259-.175H3.241v-2.149c0-.091 0-.259-.168-.259-.175 0-.175.161-.175.259v2.149H.749c-.091 0-.259 0-.259.168 0 .175.161.175.259.175h2.149V.567c0 .091 0 .259.168.259.175 0 .175-.161.175-.259v-2.149z" id="e"&gt;&lt;/path&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="f"&gt;&lt;/path&gt;&lt;path d="M.854-.441c-.028.091-.07.266-.07.287 0 .154.126.224.238.224.126 0 .238-.091.273-.154s.091-.287.126-.434c.035-.133.112-.455.154-.63.042-.154.084-.308.119-.469.077-.287.091-.343.294-.63.196-.28.525-.644 1.05-.644.406 0 .413.357.413.49 0 .42-.301 1.197-.413 1.491-.077.196-.105.259-.105.378 0 .371.308.602.665.602.7 0 1.008-.966 1.008-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.042-.133.119-.161.56-.462.847-.742.847-.147 0-.175-.098-.175-.245 0-.161.035-.252.161-.567.084-.217.371-.959.371-1.351 0-.679-.539-.798-.91-.798-.581 0-.973.357-1.183.637-.049-.483-.462-.637-.749-.637-.301 0-.462.217-.553.378-.154.259-.252.658-.252.693 0 .091.098.091.119.091.098 0 .105-.021.154-.21.105-.413.238-.756.511-.756.182 0 .231.154.231.343 0 .133-.063.392-.112.581s-.119.476-.154.63l-.224.896z" id="d"&gt;&lt;/path&gt;&lt;path d="M9.26-6.06c.09-.36.11-.46.86-.46.23 0 .32 0 .32-.2 0-.11-.1-.11-.27-.11H8.85c-.26 0-.27 0-.39.19L4.81-.94 4.03-6.6c-.03-.23-.05-.23-.31-.23H2.35c-.19 0-.3 0-.3.19 0 .12.09.12.29.12.13 0 .31.01.43.02.16.02.22.05.22.16 0 .04-.01.07-.04.19L1.68-1.06c-.1.4-.27.72-1.08.75-.05 0-.18.01-.18.19 0 .09.06.12.14.12.32 0 .67-.03 1-.03.34 0 .7.03 1.03.03.05 0 .18 0 .18-.2 0-.11-.11-.11-.18-.11-.57-.01-.68-.21-.68-.44 0-.07.01-.12.04-.23l1.36-5.45h.01l.86 6.2c.02.12.03.23.15.23.11 0 .17-.11.22-.18l4.04-6.33h.01L7.17-.78c-.1.39-.12.47-.91.47-.17 0-.28 0-.28.19 0 .12.12.12.15.12.28 0 .96-.03 1.24-.03.41 0 .84.03 1.25.03.06 0 .19 0 .19-.2 0-.11-.09-.11-.28-.11-.37 0-.65 0-.65-.18 0-.04 0-.06.05-.24l1.33-5.33Z" id="h"&gt;&lt;/path&gt;&lt;path d="M3.73-3.78c-.18-.37-.47-.64-.92-.64C1.64-4.42.4-2.95.4-1.49.4-.55.95.11 1.73.11c.2 0 .7-.04 1.3-.75.08.42.43.75.91.75.35 0 .58-.23.74-.55.17-.36.3-.97.3-.99 0-.1-.09-.1-.12-.1-.1 0-.11.04-.14.18-.17.65-.35 1.24-.76 1.24-.27 0-.3-.26-.3-.46 0-.22.02-.3.13-.74.11-.42.13-.52.22-.9l.36-1.4c.07-.28.07-.3.07-.34 0-.17-.12-.27-.29-.27-.24 0-.39.22-.42.44zm-.65 2.59c-.05.18-.05.2-.2.37-.44.55-.85.71-1.13.71-.5 0-.64-.55-.64-.94 0-.5.32-1.73.55-2.19.31-.59.76-.96 1.16-.96.65 0 .79.82.79.88s-.02.12-.03.17l-.5 1.96z" id="c"&gt;&lt;/path&gt;&lt;path d="M5.37-5.95c-.14.13-.47.41-.47.59 0 .1.1.2.2.2.09 0 .14-.07.19-.13.12-.15.35-.43.79-.65.07-.04.17-.09.17-.21 0-.1-.07-.15-.14-.2-.22-.15-.33-.33-.41-.57-.02-.09-.06-.22-.2-.22s-.2.13-.2.21c0 .05.08.37.24.58H2.17c-.17 0-.35 0-.35.2s.18.2.35.2h3.2z" id="b"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 9.432h63.955V-.01H-2.394Z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 9.432) scale(1.00375)"&gt;&lt;use x="1.37413" xlink:href="#b" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="2.00413" xlink:href="#c" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="7.28622" xlink:href="#d" y="-.83311"&gt;&lt;/use&gt;&lt;use x="12.22969" xlink:href="#e" y="-.83311"&gt;&lt;/use&gt;&lt;use x="18.36869" xlink:href="#f" y="-.83311"&gt;&lt;/use&gt;&lt;use x="25.63176" xlink:href="#g" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="36.1872" xlink:href="#h" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="46.9795" xlink:href="#d" y="-5.96227"&gt;&lt;/use&gt;&lt;use x="51.79651" xlink:href="#b" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="52.42651" xlink:href="#c" y="-2.33372"&gt;&lt;/use&gt;&lt;use x="57.70858" xlink:href="#f" y="-.83311"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$\vec{a}_{n+1}=M^{n}\vec{a}_1$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;for the &lt;span class="math"&gt;&lt;code&gt;$n+1$&lt;/code&gt;&lt;/span&gt;-th element instead.&lt;/p&gt;
&lt;p&gt;The matrix &lt;span class="math"&gt;&lt;code&gt;$M$&lt;/code&gt;&lt;/span&gt; is diagonalizable, i.e. an invertible matrix &lt;span class="math"&gt;&lt;code&gt;$Q$&lt;/code&gt;&lt;/span&gt; exists such that&lt;/p&gt;
&lt;div class="math"&gt;&lt;svg height="20.052" viewbox="0 0 86.157 15.039" width="114.876" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="g"&gt;&lt;/path&gt;&lt;path d="M5.208-1.582c.112 0 .28 0 .28-.168 0-.175-.161-.175-.28-.175H1.036c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h4.172z" id="f"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="c"&gt;&lt;/path&gt;&lt;path d="M1.59-.78c-.1.39-.12.47-.91.47-.17 0-.28 0-.28.19C.4 0 .49 0 .68 0h3.31c2.08 0 4.05-2.11 4.05-4.3 0-1.41-.85-2.53-2.35-2.53H2.33c-.19 0-.3 0-.3.19 0 .12.09.12.29.12.13 0 .31.01.43.02.16.02.22.05.22.16 0 .04-.01.07-.04.19L1.59-.78zm2.16-5.36c.09-.35.11-.38.54-.38h1.07c.98 0 1.81.53 1.81 1.85 0 .49-.2 2.13-1.05 3.23-.29.37-1.08 1.13-2.31 1.13H2.68c-.14 0-.16 0-.22-.01-.1-.01-.13-.02-.13-.1 0-.03 0-.05.05-.23l1.37-5.49z" id="b"&gt;&lt;/path&gt;&lt;path d="M9.26-6.06c.09-.36.11-.46.86-.46.23 0 .32 0 .32-.2 0-.11-.1-.11-.27-.11H8.85c-.26 0-.27 0-.39.19L4.81-.94 4.03-6.6c-.03-.23-.05-.23-.31-.23H2.35c-.19 0-.3 0-.3.19 0 .12.09.12.29.12.13 0 .31.01.43.02.16.02.22.05.22.16 0 .04-.01.07-.04.19L1.68-1.06c-.1.4-.27.72-1.08.75-.05 0-.18.01-.18.19 0 .09.06.12.14.12.32 0 .67-.03 1-.03.34 0 .7.03 1.03.03.05 0 .18 0 .18-.2 0-.11-.11-.11-.18-.11-.57-.01-.68-.21-.68-.44 0-.07.01-.12.04-.23l1.36-5.45h.01l.86 6.2c.02.12.03.23.15.23.11 0 .17-.11.22-.18l4.04-6.33h.01L7.17-.78c-.1.39-.12.47-.91.47-.17 0-.28 0-.28.19 0 .12.12.12.15.12.28 0 .96-.03 1.24-.03.41 0 .84.03 1.25.03.06 0 .19 0 .19-.2 0-.11-.09-.11-.28-.11-.37 0-.65 0-.65-.18 0-.04 0-.06.05-.24l1.33-5.33Z" id="e"&gt;&lt;/path&gt;&lt;path d="M4.38-.06C5.93-.65 7.4-2.43 7.4-4.36c0-1.61-1.06-2.69-2.55-2.69-2.16 0-4.36 2.27-4.36 4.6C.49-.79 1.61.22 3.05.22c.25 0 .59-.04.98-.15-.04.62-.04.64-.04.77 0 .32 0 1.1.83 1.1C6.01 1.94 6.49.11 6.49 0c0-.07-.07-.1-.11-.1-.08 0-.1.05-.12.11-.24.71-.82.96-1.17.96-.46 0-.61-.27-.71-1.03zM2.49-.14c-.78-.31-1.12-1.09-1.12-1.99 0-.69.26-2.11 1.02-3.19.73-1.02 1.67-1.48 2.4-1.48 1 0 1.73.78 1.73 2.12 0 1-.51 3.34-2.19 4.28-.05-.35-.15-1.08-.88-1.08-.53 0-1.02.5-1.02 1.02 0 .2.06.31.06.32zm.62.11c-.14 0-.46 0-.46-.43 0-.4.38-.8.8-.8s.61.24.61.85c0 .15-.01.16-.11.2-.26.11-.56.18-.84.18z" id="d"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 10.044h62.993V-.003H-2.394Z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 10.044) scale(1.00375)"&gt;&lt;use x="2.00047" xlink:href="#b" y="-1.94426"&gt;&lt;/use&gt;&lt;use x="13.33482" xlink:href="#c" y="-1.94426"&gt;&lt;/use&gt;&lt;use x="23.89025" xlink:href="#d" y="-1.94426"&gt;&lt;/use&gt;&lt;use x="31.80026" xlink:href="#e" y="-1.94426"&gt;&lt;/use&gt;&lt;use x="42.59025" xlink:href="#d" y="-1.94426"&gt;&lt;/use&gt;&lt;use x="50.49263" xlink:href="#f" y="-5.57382"&gt;&lt;/use&gt;&lt;use x="56.74298" xlink:href="#g" y="-5.57382"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$D=QMQ^{-1}$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;is a diagonal matrix.
To be precise there even exists an orthogonal matrix &lt;span class="math"&gt;&lt;code&gt;$Q^{-1}=Q^{T}$&lt;/code&gt;&lt;/span&gt; that diagonalizes &lt;span class="math"&gt;&lt;code&gt;$M$&lt;/code&gt;&lt;/span&gt; since it is symmetric &lt;span class="math"&gt;&lt;code&gt;$M=M^{\intercal}$&lt;/code&gt;&lt;/span&gt;.
Let's rewrite the expression for &lt;span class="math"&gt;&lt;code&gt;$\vec{a}_{n+1}$&lt;/code&gt;&lt;/span&gt; with this knowledge as&lt;/p&gt;
&lt;div class="math"&gt;&lt;svg height="48.564" viewbox="0 0 404.22 36.423" width="538.96" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M5.208-1.582c.112 0 .28 0 .28-.168 0-.175-.161-.175-.28-.175H1.036c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h4.172z" id="k"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="g"&gt;&lt;/path&gt;&lt;path d="M3.241-1.582h2.142c.091 0 .259 0 .259-.168 0-.175-.161-.175-.259-.175H3.241v-2.149c0-.091 0-.259-.168-.259-.175 0-.175.161-.175.259v2.149H.749c-.091 0-.259 0-.259.168 0 .175.161.175.259.175h2.149V.567c0 .091 0 .259.168.259.175 0 .175-.161.175-.259v-2.149z" id="e"&gt;&lt;/path&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="f"&gt;&lt;/path&gt;&lt;path d="M5.376-2.352c.105 0 .266 0 .266-.175 0-.168-.168-.168-.259-.168H.749c-.091 0-.259 0-.259.168 0 .175.161.175.266.175h4.62zm.007 1.54c.091 0 .259 0 .259-.168 0-.175-.161-.175-.266-.175H.756c-.105 0-.266 0-.266.175 0 .168.168.168.259.168h4.634z" id="q"&gt;&lt;/path&gt;&lt;path d="M4.13 11.49c0-.04-.02-.06-.04-.09-.46-.49-1.14-1.3-1.56-2.93-.23-.91-.32-1.94-.32-2.87 0-2.63.63-4.47 1.83-5.77.09-.09.09-.11.09-.13 0-.1-.08-.1-.12-.1-.15 0-.69.6-.82.75-1.02 1.21-1.67 3.01-1.67 5.24 0 1.42.25 3.43 1.56 5.12.1.12.75.88.93.88.04 0 .12 0 .12-.1z" id="h"&gt;&lt;/path&gt;&lt;path d="M3.05 5.6c0-1.42-.25-3.43-1.56-5.12C1.39.36.74-.4.56-.4c-.05 0-.12.02-.12.1 0 .04.02.07.06.1.48.52 1.13 1.33 1.54 2.92.23.91.32 1.94.32 2.87 0 1.01-.09 2.03-.35 3.01-.38 1.4-.97 2.2-1.48 2.76-.09.09-.09.11-.09.13 0 .08.07.1.12.1.15 0 .7-.61.82-.75C2.4 9.63 3.05 7.83 3.05 5.6Z" id="l"&gt;&lt;/path&gt;&lt;path d="M4.6-.92c0-.27 0-.28-.21-.28-1.02 0-3.27.48-4.63 2.92v.16c0 .25.01.26.24.26.19 0 .2-.01.25-.08C1.07.75 2.45.04 4.48 0c.12 0 .12-.07.12-.28v-.64Z" id="o"&gt;&lt;/path&gt;&lt;path d="M4.74 1.72C3.38-.73 1.13-1.2.11-1.2c-.21 0-.21.01-.21.28v.64c0 .23 0 .28.14.28.61.01 1.6.09 2.5.53 1.08.54 1.49 1.17 1.74 1.56.03.05.09.05.22.05.23 0 .24-.01.24-.26v-.16Z" id="n"&gt;&lt;/path&gt;&lt;path d="M4.6-.92c0-.23 0-.28-.14-.28-.61-.01-1.6-.09-2.5-.53C.88-2.27.47-2.9.22-3.29.19-3.34.13-3.34 0-3.34c-.23 0-.24.01-.24.26v.16C1.12-.47 3.37 0 4.39 0c.21 0 .21-.01.21-.28v-.64Z" id="m"&gt;&lt;/path&gt;&lt;path d="M4.74-3.08c0-.25-.01-.26-.24-.26-.19 0-.2.01-.25.08C3.43-1.95 2.05-1.24.02-1.2c-.12 0-.12.07-.12.28v.64c0 .27 0 .28.21.28 1.02 0 3.27-.48 4.63-2.92v-.16Z" id="p"&gt;&lt;/path&gt;&lt;path d="M.854-.441c-.028.091-.07.266-.07.287 0 .154.126.224.238.224.126 0 .238-.091.273-.154s.091-.287.126-.434c.035-.133.112-.455.154-.63.042-.154.084-.308.119-.469.077-.287.091-.343.294-.63.196-.28.525-.644 1.05-.644.406 0 .413.357.413.49 0 .42-.301 1.197-.413 1.491-.077.196-.105.259-.105.378 0 .371.308.602.665.602.7 0 1.008-.966 1.008-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.042-.133.119-.161.56-.462.847-.742.847-.147 0-.175-.098-.175-.245 0-.161.035-.252.161-.567.084-.217.371-.959.371-1.351 0-.679-.539-.798-.91-.798-.581 0-.973.357-1.183.637-.049-.483-.462-.637-.749-.637-.301 0-.462.217-.553.378-.154.259-.252.658-.252.693 0 .091.098.091.119.091.098 0 .105-.021.154-.21.105-.413.238-.756.511-.756.182 0 .231.154.231.343 0 .133-.063.392-.112.581s-.119.476-.154.63l-.224.896z" id="d"&gt;&lt;/path&gt;&lt;path d="M1.92-.53c0-.29-.24-.53-.53-.53s-.53.24-.53.53.24.53.53.53.53-.24.53-.53Z" id="r"&gt;&lt;/path&gt;&lt;path d="M1.59-.78c-.1.39-.12.47-.91.47-.17 0-.28 0-.28.19C.4 0 .49 0 .68 0h3.31c2.08 0 4.05-2.11 4.05-4.3 0-1.41-.85-2.53-2.35-2.53H2.33c-.19 0-.3 0-.3.19 0 .12.09.12.29.12.13 0 .31.01.43.02.16.02.22.05.22.16 0 .04-.01.07-.04.19L1.59-.78zm2.16-5.36c.09-.35.11-.38.54-.38h1.07c.98 0 1.81.53 1.81 1.85 0 .49-.2 2.13-1.05 3.23-.29.37-1.08 1.13-2.31 1.13H2.68c-.14 0-.16 0-.22-.01-.1-.01-.13-.02-.13-.1 0-.03 0-.05.05-.23l1.37-5.49z" id="j"&gt;&lt;/path&gt;&lt;path d="M4.38-.06C5.93-.65 7.4-2.43 7.4-4.36c0-1.61-1.06-2.69-2.55-2.69-2.16 0-4.36 2.27-4.36 4.6C.49-.79 1.61.22 3.05.22c.25 0 .59-.04.98-.15-.04.62-.04.64-.04.77 0 .32 0 1.1.83 1.1C6.01 1.94 6.49.11 6.49 0c0-.07-.07-.1-.11-.1-.08 0-.1.05-.12.11-.24.71-.82.96-1.17.96-.46 0-.61-.27-.71-1.03zM2.49-.14c-.78-.31-1.12-1.09-1.12-1.99 0-.69.26-2.11 1.02-3.19.73-1.02 1.67-1.48 2.4-1.48 1 0 1.73.78 1.73 2.12 0 1-.51 3.34-2.19 4.28-.05-.35-.15-1.08-.88-1.08-.53 0-1.02.5-1.02 1.02 0 .2.06.31.06.32zm.62.11c-.14 0-.46 0-.46-.43 0-.4.38-.8.8-.8s.61.24.61.85c0 .15-.01.16-.11.2-.26.11-.56.18-.84.18z" id="i"&gt;&lt;/path&gt;&lt;path d="M3.73-3.78c-.18-.37-.47-.64-.92-.64C1.64-4.42.4-2.95.4-1.49.4-.55.95.11 1.73.11c.2 0 .7-.04 1.3-.75.08.42.43.75.91.75.35 0 .58-.23.74-.55.17-.36.3-.97.3-.99 0-.1-.09-.1-.12-.1-.1 0-.11.04-.14.18-.17.65-.35 1.24-.76 1.24-.27 0-.3-.26-.3-.46 0-.22.02-.3.13-.74.11-.42.13-.52.22-.9l.36-1.4c.07-.28.07-.3.07-.34 0-.17-.12-.27-.29-.27-.24 0-.39.22-.42.44zm-.65 2.59c-.05.18-.05.2-.2.37-.44.55-.85.71-1.13.71-.5 0-.64-.55-.64-.94 0-.5.32-1.73.55-2.19.31-.59.76-.96 1.16-.96.65 0 .79.82.79.88s-.02.12-.03.17l-.5 1.96z" id="c"&gt;&lt;/path&gt;&lt;path d="M5.37-5.95c-.14.13-.47.41-.47.59 0 .1.1.2.2.2.09 0 .14-.07.19-.13.12-.15.35-.43.79-.65.07-.04.17-.09.17-.21 0-.1-.07-.15-.14-.2-.22-.15-.33-.33-.41-.57-.02-.09-.06-.22-.2-.22s-.2.13-.2.21c0 .05.08.37.24.58H2.17c-.17 0-.35 0-.35.2s.18.2.35.2h3.2z" id="b"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 25.272h274.721V.003H-2.394Z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 25.272) scale(1.00375)"&gt;&lt;use x="1.37413" xlink:href="#b" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="2.00413" xlink:href="#c" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="7.28622" xlink:href="#d" y="-14.82237"&gt;&lt;/use&gt;&lt;use x="12.22969" xlink:href="#e" y="-14.82237"&gt;&lt;/use&gt;&lt;use x="18.36869" xlink:href="#f" y="-14.82237"&gt;&lt;/use&gt;&lt;use x="25.63176" xlink:href="#g" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="36.1872" xlink:href="#h" y="-24.42224"&gt;&lt;/use&gt;&lt;use x="40.77132" xlink:href="#i" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="48.68132" xlink:href="#j" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="57.23132" xlink:href="#i" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="65.13934" xlink:href="#k" y="-19.95153"&gt;&lt;/use&gt;&lt;use x="71.38869" xlink:href="#f" y="-19.95153"&gt;&lt;/use&gt;&lt;use x="75.87547" xlink:href="#l" y="-24.42224"&gt;&lt;/use&gt;&lt;use x="80.45857" xlink:href="#d" y="-22.35049"&gt;&lt;/use&gt;&lt;use x="85.27559" xlink:href="#b" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="85.90559" xlink:href="#c" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="91.18765" xlink:href="#f" y="-14.82237"&gt;&lt;/use&gt;&lt;use x="98.45182" xlink:href="#g" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="109.00725" xlink:href="#i" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="116.91725" xlink:href="#j" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="127.13725" xlink:href="#i" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="135.04148" xlink:href="#k" y="-20.4514"&gt;&lt;/use&gt;&lt;use x="141.29183" xlink:href="#f" y="-20.4514"&gt;&lt;/use&gt;&lt;use x="145.77763" xlink:href="#i" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="127.13598" xlink:href="#m" y="-10.17802"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path d="M128.75 15.132h4.258v-1.195h-4.258z"&gt;&lt;/path&gt;&lt;g transform="translate(-2.394 25.272) scale(1.00375)"&gt;&lt;use x="135.90976" xlink:href="#n" y="-10.17802"&gt;&lt;/use&gt;&lt;use x="140.40975" xlink:href="#o" y="-10.17802"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path d="M141.97 15.132h4.258v-1.195h-4.258z"&gt;&lt;/path&gt;&lt;g transform="translate(-2.394 25.272) scale(1.00375)"&gt;&lt;use x="149.18335" xlink:href="#p" y="-10.17802"&gt;&lt;/use&gt;&lt;use x="135.34762" xlink:href="#q" y="-.99974"&gt;&lt;/use&gt;&lt;use x="141.48662" xlink:href="#f" y="-.99974"&gt;&lt;/use&gt;&lt;use x="155.35039" xlink:href="#j" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="163.9004" xlink:href="#i" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="171.81284" xlink:href="#k" y="-19.95153"&gt;&lt;/use&gt;&lt;use x="178.06219" xlink:href="#f" y="-19.95153"&gt;&lt;/use&gt;&lt;use x="184.21523" xlink:href="#r" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="188.65522" xlink:href="#r" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="193.1052" xlink:href="#r" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="196.9252" xlink:href="#b" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="197.55521" xlink:href="#c" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="202.83473" xlink:href="#f" y="-14.82237"&gt;&lt;/use&gt;&lt;use x="210.09793" xlink:href="#g" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="220.65336" xlink:href="#i" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="228.56335" xlink:href="#j" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="237.1158" xlink:href="#d" y="-19.95153"&gt;&lt;/use&gt;&lt;use x="242.5592" xlink:href="#i" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="250.46466" xlink:href="#k" y="-19.95153"&gt;&lt;/use&gt;&lt;use x="256.71501" xlink:href="#f" y="-19.95153"&gt;&lt;/use&gt;&lt;use x="260.57551" xlink:href="#b" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="261.20552" xlink:href="#c" y="-16.32198"&gt;&lt;/use&gt;&lt;use x="266.48652" xlink:href="#f" y="-14.82237"&gt;&lt;/use&gt;&lt;use x="270.97336" xlink:href="#r" y="-16.32198"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$\vec{a}_{n+1}={\left(QDQ^{-1}\right)}^{n}\vec{a}_1=QD\underbrace{Q^{-1}Q}_{=1}DQ^{-1}\ldots\vec{a}_1=QD^n Q^{-1}\vec{a}_1.$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;As a next step, we actually diagonalize &lt;span class="math"&gt;&lt;code&gt;$M$&lt;/code&gt;&lt;/span&gt; and determine&lt;/p&gt;
&lt;div class="math"&gt;&lt;svg height="110.56pt" viewbox="0 0 135.62 110.56" width="135.62pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="l"&gt;&lt;/path&gt;&lt;path d="M5.208-1.582c.112 0 .28 0 .28-.168 0-.175-.161-.175-.28-.175H1.036c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h4.172z" id="k"&gt;&lt;/path&gt;&lt;path d="M6.59-2.3c.17 0 .35 0 .35-.2s-.18-.2-.35-.2H1.18c-.17 0-.35 0-.35.2s.18.2.35.2h5.41z" id="f"&gt;&lt;/path&gt;&lt;path d="M7 23.49c0-.04-.02-.06-.04-.09-.37-.37-1.04-1.04-1.71-2.12-1.61-2.58-2.34-5.83-2.34-9.68 0-2.69.36-6.16 2.01-9.14C5.71 1.04 6.53.22 6.97-.22 7-.25 7-.27 7-.3c0-.1-.07-.1-.21-.1s-.16 0-.31.15c-3.35 3.05-4.4 7.63-4.4 11.84 0 3.93.9 7.89 3.44 10.88.2.23.58.64.99 1 .12.12.14.12.28.12s.21 0 .21-.1z" id="d"&gt;&lt;/path&gt;&lt;path d="M5.27 11.6c0-3.93-.9-7.89-3.44-10.88-.2-.23-.58-.64-.99-1C.72-.4.7-.4.56-.4c-.12 0-.21 0-.21.1 0 .04.04.08.06.1C.76.16 1.43.83 2.1 1.91c1.61 2.58 2.34 5.83 2.34 9.68 0 2.69-.36 6.16-2.01 9.14C1.64 22.15.81 22.98.39 23.4c-.02.03-.04.06-.04.09 0 .1.09.1.21.1.14 0 .16 0 .31-.15 3.35-3.05 4.4-7.63 4.4-11.84z" id="i"&gt;&lt;/path&gt;&lt;path d="M4.6-3.2c0-.8-.05-1.6-.4-2.34-.46-.96-1.28-1.12-1.7-1.12-.6 0-1.33.26-1.74 1.19C.44-4.78.39-4 .39-3.2c0 .75.04 1.65.45 2.41C1.27.02 2 .22 2.49.22c.54 0 1.3-.21 1.74-1.16.32-.69.37-1.47.37-2.26ZM2.49 0c-.39 0-.98-.25-1.16-1.21-.11-.6-.11-1.52-.11-2.11 0-.64 0-1.3.08-1.84.19-1.19.94-1.28 1.19-1.28.33 0 .99.18 1.18 1.17.1.56.1 1.32.1 1.95 0 .75 0 1.43-.11 2.07C3.51-.3 2.94 0 2.49 0Z" id="h"&gt;&lt;/path&gt;&lt;path d="M2.94-6.4c0-.24 0-.26-.23-.26-.62.64-1.5.64-1.82.64v.31c.2 0 .79 0 1.31-.26v5.18c0 .36-.03.48-.93.48H.95V0c.35-.03 1.22-.03 1.62-.03s1.27 0 1.62.03v-.31h-.32c-.9 0-.93-.11-.93-.48V-6.4Z" id="e"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="c"&gt;&lt;/path&gt;&lt;path d="M1.7 1.7c-.04.13-.05.15-.05.2 0 .22.19.28.29.28.05 0 .27-.03.37-.26.03-.08.08-.41.35-1.83.09.01.16.02.33.02 1.66 0 3.2-1.57 3.2-3.15 0-.78-.39-1.38-1.14-1.38C3.6-4.42 3-2.48 2.4-.53 1.32-.73.76-1.29.76-2.01c0-.28.23-1.38.83-2.07.08-.09.08-.11.08-.13 0-.04-.02-.1-.12-.1C1.27-4.31.5-2.86.5-1.9c0 .94.66 1.67 1.73 1.92L1.7 1.7zM3.08-.47c-.08 0-.1 0-.18-.01-.12 0-.13-.01-.13-.04 0-.02.17-.93.2-1.08.31-1.28 1.09-2.24 1.98-2.24.69 0 .96.54.96 1.02 0 1.13-1.29 2.35-2.83 2.35z" id="g"&gt;&lt;/path&gt;&lt;path d="M1.59-.78c-.1.39-.12.47-.91.47-.17 0-.28 0-.28.19C.4 0 .49 0 .68 0h3.31c2.08 0 4.05-2.11 4.05-4.3 0-1.41-.85-2.53-2.35-2.53H2.33c-.19 0-.3 0-.3.19 0 .12.09.12.29.12.13 0 .31.01.43.02.16.02.22.05.22.16 0 .04-.01.07-.04.19L1.59-.78zm2.16-5.36c.09-.35.11-.38.54-.38h1.07c.98 0 1.81.53 1.81 1.85 0 .49-.2 2.13-1.05 3.23-.29.37-1.08 1.13-2.31 1.13H2.68c-.14 0-.16 0-.22-.01-.1-.01-.13-.02-.13-.1 0-.03 0-.05.05-.23l1.37-5.49z" id="b"&gt;&lt;/path&gt;&lt;path d="M4.38-.06C5.93-.65 7.4-2.43 7.4-4.36c0-1.61-1.06-2.69-2.55-2.69-2.16 0-4.36 2.27-4.36 4.6C.49-.79 1.61.22 3.05.22c.25 0 .59-.04.98-.15-.04.62-.04.64-.04.77 0 .32 0 1.1.83 1.1C6.01 1.94 6.49.11 6.49 0c0-.07-.07-.1-.11-.1-.08 0-.1.05-.12.11-.24.71-.82.96-1.17.96-.46 0-.61-.27-.71-1.03zM2.49-.14c-.78-.31-1.12-1.09-1.12-1.99 0-.69.26-2.11 1.02-3.19.73-1.02 1.67-1.48 2.4-1.48 1 0 1.73.78 1.73 2.12 0 1-.51 3.34-2.19 4.28-.05-.35-.15-1.08-.88-1.08-.53 0-1.02.5-1.02 1.02 0 .2.06.31.06.32zm.62.11c-.14 0-.46 0-.46-.43 0-.4.38-.8.8-.8s.61.24.61.85c0 .15-.01.16-.11.2-.26.11-.56.18-.84.18z" id="j"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 76.212h347.7V-.003h-347.7z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 76.212) scale(1.00375)"&gt;&lt;use x="2.00047" xlink:href="#b" y="-62.00063"&gt;&lt;/use&gt;&lt;use x="13.33482" xlink:href="#c" y="-62.00063"&gt;&lt;/use&gt;&lt;use x="23.89025" xlink:href="#d" y="-76.10031"&gt;&lt;/use&gt;&lt;use x="31.25176" xlink:href="#e" y="-68.10042"&gt;&lt;/use&gt;&lt;use x="38.47374" xlink:href="#f" y="-68.10042"&gt;&lt;/use&gt;&lt;use x="48.4731" xlink:href="#g" y="-68.10042"&gt;&lt;/use&gt;&lt;use x="65.78578" xlink:href="#h" y="-68.10042"&gt;&lt;/use&gt;&lt;use x="40.6328" xlink:href="#h" y="-56.10059"&gt;&lt;/use&gt;&lt;use x="65.0149" xlink:href="#g" y="-56.10059"&gt;&lt;/use&gt;&lt;use x="71.55633" xlink:href="#i" y="-76.10031"&gt;&lt;/use&gt;&lt;use x="2.00047" xlink:href="#j" y="-37.00023"&gt;&lt;/use&gt;&lt;use x="12.68338" xlink:href="#c" y="-37.00023"&gt;&lt;/use&gt;&lt;use x="23.23882" xlink:href="#d" y="-51.09991"&gt;&lt;/use&gt;&lt;use x="30.60032" xlink:href="#e" y="-43.10002"&gt;&lt;/use&gt;&lt;use x="37.8223" xlink:href="#f" y="-43.10002"&gt;&lt;/use&gt;&lt;use x="47.82166" xlink:href="#g" y="-43.10002"&gt;&lt;/use&gt;&lt;use x="64.36167" xlink:href="#g" y="-43.10002"&gt;&lt;/use&gt;&lt;use x="39.98137" xlink:href="#e" y="-31.10019"&gt;&lt;/use&gt;&lt;use x="65.13137" xlink:href="#e" y="-31.10019"&gt;&lt;/use&gt;&lt;use x="70.9059" xlink:href="#i" y="-51.09991"&gt;&lt;/use&gt;&lt;use x="2.00047" xlink:href="#j" y="-11.99983"&gt;&lt;/use&gt;&lt;use x="9.90601" xlink:href="#k" y="-15.62939"&gt;&lt;/use&gt;&lt;use x="16.15535" xlink:href="#l" y="-15.62939"&gt;&lt;/use&gt;&lt;use x="23.4195" xlink:href="#c" y="-11.99983"&gt;&lt;/use&gt;&lt;use x="33.97493" xlink:href="#d" y="-26.10051"&gt;&lt;/use&gt;&lt;use x="41.33643" xlink:href="#f" y="-18.09962"&gt;&lt;/use&gt;&lt;use x="49.11349" xlink:href="#e" y="-18.09962"&gt;&lt;/use&gt;&lt;use x="72.7247" xlink:href="#g" y="-18.09962"&gt;&lt;/use&gt;&lt;use x="45.22496" xlink:href="#e" y="-6.09979"&gt;&lt;/use&gt;&lt;use x="64.11353" xlink:href="#g" y="-6.09979"&gt;&lt;/use&gt;&lt;use x="72.87727" xlink:href="#f" y="-6.09979"&gt;&lt;/use&gt;&lt;use x="82.87763" xlink:href="#e" y="-6.09979"&gt;&lt;/use&gt;&lt;use x="87.87731" xlink:href="#i" y="-26.10051"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$D=\begin{pmatrix}
  1-\varphi &amp;amp; 0 \\
  0 &amp;amp; \varphi
\end{pmatrix} \\
Q=\begin{pmatrix}
1-\varphi &amp;amp; \varphi \\
1 &amp;amp; 1
\end{pmatrix} \\
Q^{-1}=\begin{pmatrix}
  -1 &amp;amp; \varphi \\
  1 &amp;amp; \varphi-1
\end{pmatrix} \\$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;Interestingly, the eigenvalue&lt;/p&gt;
&lt;div class="math"&gt;&lt;svg height="24.156" viewbox="0 0 94.284 18.117" width="125.712" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M3.89 8.55 2.13 4.66c-.07-.16-.12-.16-.15-.16-.01 0-.06 0-.17.08l-.95.72c-.13.1-.13.13-.13.16 0 .05.03.11.1.11.06 0 .23-.14.34-.22.06-.05.21-.16.32-.24l1.97 4.33c.07.16.12.16.21.16.15 0 .18-.06.25-.2L8.46 0c.07-.14.07-.18.07-.2 0-.1-.08-.2-.2-.2-.08 0-.15.05-.23.21L3.89 8.55Z" id="i"&gt;&lt;/path&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="d"&gt;&lt;/path&gt;&lt;path d="M3.535-1.274h-.238c-.021.154-.091.567-.182.637-.056.042-.595.042-.693.042H1.134c.735-.651.98-.847 1.4-1.176.518-.413 1.001-.847 1.001-1.512 0-.847-.742-1.365-1.638-1.365-.868 0-1.456.609-1.456 1.253 0 .357.301.392.371.392.168 0 .371-.119.371-.371 0-.126-.049-.371-.413-.371.217-.497.693-.651 1.022-.651.7 0 1.064.546 1.064 1.113 0 .609-.434 1.092-.658 1.344L.511-.273C.441-.21.441-.196.441 0h2.884l.21-1.274Z" id="e"&gt;&lt;/path&gt;&lt;path d="M3.31 2.4c0-.03 0-.05-.17-.22C1.89.92 1.57-.97 1.57-2.5c0-1.74.38-3.48 1.61-4.73.13-.12.13-.14.13-.17 0-.07-.04-.1-.1-.1-.1 0-1 .68-1.59 1.95C1.11-4.45.99-3.34.99-2.5c0 .78.11 1.99.66 3.12.6 1.23 1.46 1.88 1.56 1.88.06 0 .1-.03.1-.1z" id="f"&gt;&lt;/path&gt;&lt;path d="M2.89-2.5c0-.78-.11-1.99-.66-3.12C1.63-6.85.77-7.5.67-7.5c-.06 0-.1.04-.1.1 0 .03 0 .05.19.23.98.99 1.55 2.58 1.55 4.67C2.31-.79 1.94.97.7 2.23c-.13.12-.13.14-.13.17 0 .06.04.1.1.1.1 0 1-.68 1.59-1.95.51-1.1.63-2.21.63-3.05z" id="k"&gt;&lt;/path&gt;&lt;path d="M4.09-2.3h2.79c.14 0 .33 0 .33-.2s-.19-.2-.33-.2H4.09v-2.8c0-.14 0-.33-.2-.33s-.2.19-.2.33v2.8H.89c-.14 0-.33 0-.33.2s.19.2.33.2h2.8V.5c0 .14 0 .33.2.33s.2-.19.2-.33v-2.8z" id="h"&gt;&lt;/path&gt;&lt;path d="M2.94-6.4c0-.24 0-.26-.23-.26-.62.64-1.5.64-1.82.64v.31c.2 0 .79 0 1.31-.26v5.18c0 .36-.03.48-.93.48H.95V0c.35-.03 1.22-.03 1.62-.03s1.27 0 1.62.03v-.31h-.32c-.9 0-.93-.11-.93-.48V-6.4Z" id="g"&gt;&lt;/path&gt;&lt;path d="M4.49-2.01c0-1.19-.82-2.19-1.9-2.19-.48 0-.91.16-1.27.51v-1.95c.2.06.53.13.85.13 1.23 0 1.93-.91 1.93-1.04 0-.06-.03-.11-.1-.11-.01 0-.03 0-.08.03-.2.09-.69.29-1.36.29-.4 0-.86-.07-1.33-.28-.08-.03-.1-.03-.12-.03-.1 0-.1.08-.1.24v2.96c0 .18 0 .26.14.26.07 0 .09-.03.13-.09.11-.16.48-.7 1.29-.7.52 0 .77.46.85.64.16.37.18.76.18 1.26 0 .35 0 .95-.24 1.37-.24.39-.61.65-1.07.65-.73 0-1.3-.53-1.47-1.12.03.01.06.02.17.02.33 0 .5-.25.5-.49s-.17-.49-.5-.49c-.14 0-.49.07-.49.53C.5-.75 1.19.22 2.31.22c1.16 0 2.18-.96 2.18-2.23z" id="j"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="c"&gt;&lt;/path&gt;&lt;path d="M1.7 1.7c-.04.13-.05.15-.05.2 0 .22.19.28.29.28.05 0 .27-.03.37-.26.03-.08.08-.41.35-1.83.09.01.16.02.33.02 1.66 0 3.2-1.57 3.2-3.15 0-.78-.39-1.38-1.14-1.38C3.6-4.42 3-2.48 2.4-.53 1.32-.73.76-1.29.76-2.01c0-.28.23-1.38.83-2.07.08-.09.08-.11.08-.13 0-.04-.02-.1-.12-.1C1.27-4.31.5-2.86.5-1.9c0 .94.66 1.67 1.73 1.92L1.7 1.7zM3.08-.47c-.08 0-.1 0-.18-.01-.12 0-.13-.01-.13-.04 0-.02.17-.93.2-1.08.31-1.28 1.09-2.24 1.98-2.24.69 0 .96.54.96 1.02 0 1.13-1.29 2.35-2.83 2.35z" id="b"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.502 12.078h68.338V-.396H-2.502Z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.502 12.078) scale(1.00375)"&gt;&lt;use x="2.00047" xlink:href="#b" y="-3.44889"&gt;&lt;/use&gt;&lt;use x="11.31929" xlink:href="#c" y="-3.44889"&gt;&lt;/use&gt;&lt;use x="23.0752" xlink:href="#d" y="-7.38559"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path class="strokeonly" d="M20.487 6.152h3.971" fill="none"&gt;&lt;/path&gt;&lt;g transform="translate(-2.502 12.078) scale(1.00375)"&gt;&lt;use x="23.0752" xlink:href="#e"&gt;&lt;/use&gt;&lt;use x="28.26058" xlink:href="#f" y="-3.44889"&gt;&lt;/use&gt;&lt;use x="32.15058" xlink:href="#g" y="-3.44889"&gt;&lt;/use&gt;&lt;use x="39.37059" xlink:href="#h" y="-3.44889"&gt;&lt;/use&gt;&lt;use x="49.37246" xlink:href="#i" y="-11.72079"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path class="strokeonly" d="M54.988.202h4.981" fill="none"&gt;&lt;/path&gt;&lt;g transform="translate(-2.502 12.078) scale(1.00375)"&gt;&lt;use x="57.70559" xlink:href="#j" y="-3.44889"&gt;&lt;/use&gt;&lt;use x="62.70559" xlink:href="#k" y="-3.44889"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$\varphi=\frac{1}{2}(1+\sqrt{5})$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;is the golden ratio highlighting the relation of the Fibonacci numbers to this constant.&lt;/p&gt;
&lt;p&gt;Next, we plug these results into our equation for &lt;span class="math"&gt;&lt;code&gt;$\vec{a}_{n+1}$&lt;/code&gt;&lt;/span&gt; in order to obtain&lt;/p&gt;
&lt;div class="math"&gt;&lt;svg height="111.42" viewbox="0 0 368.23 83.565" width="368.23pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M5.208-1.582c.112 0 .28 0 .28-.168 0-.175-.161-.175-.28-.175H1.036c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h4.172z" id="u"&gt;&lt;/path&gt;&lt;path d="M2.71-1.11h1.74c.065 0 .2 0 .2-.14s-.135-.14-.2-.14H2.71v-1.74c0-.07 0-.205-.14-.205s-.14.135-.14.205v1.74H.685c-.065 0-.2 0-.2.14s.135.14.2.14H2.43V.63c0 .07 0 .205.14.205S2.71.7 2.71.63v-1.74z" id="s"&gt;&lt;/path&gt;&lt;path d="M1.99-3.18c0-.15-.015-.15-.18-.15-.355.32-.91.32-1.01.32H.715v.22H.8c.115 0 .44-.015.73-.14v2.5c0 .155 0 .21-.53.21H.75V0c.275-.02.72-.02 1.01-.02s.735 0 1.01.02v-.22h-.25c-.53 0-.53-.055-.53-.21v-2.75Z" id="t"&gt;&lt;/path&gt;&lt;path d="M.975-.49C.945-.365.89-.145.89-.12c0 .11.09.175.185.175.075 0 .185-.04.24-.165.005-.025.065-.26.095-.39.17-.675.17-.685.18-.705.065-.135.425-.835 1.035-.835.245 0 .35.135.35.36 0 .285-.21.8-.325 1.085-.025.06-.05.125-.05.21 0 .26.25.44.545.44.535 0 .81-.65.81-.775 0-.07-.085-.07-.105-.07-.085 0-.09.02-.12.115-.095.3-.325.56-.565.56-.115 0-.15-.08-.15-.19 0-.105.02-.155.065-.265.085-.2.315-.77.315-1.045 0-.37-.265-.595-.74-.595-.455 0-.77.275-.945.495-.025-.41-.425-.495-.61-.495-.5 0-.645.765-.645.775 0 .07.08.07.105.07.085 0 .095-.03.115-.095.075-.29.19-.58.4-.58.17 0 .205.16.205.265 0 .07-.05.26-.08.39-.035.135-.085.34-.11.45L.975-.49Z" id="r"&gt;&lt;/path&gt;&lt;path d="M6.59-2.3c.17 0 .35 0 .35-.2s-.18-.2-.35-.2H1.18c-.17 0-.35 0-.35.2s.18.2.35.2h5.41z" id="j"&gt;&lt;/path&gt;&lt;path d="M7 23.49c0-.04-.02-.06-.04-.09-.37-.37-1.04-1.04-1.71-2.12-1.61-2.58-2.34-5.83-2.34-9.68 0-2.69.36-6.16 2.01-9.14C5.71 1.04 6.53.22 6.97-.22 7-.25 7-.27 7-.3c0-.1-.07-.1-.21-.1s-.16 0-.31.15c-3.35 3.05-4.4 7.63-4.4 11.84 0 3.93.9 7.89 3.44 10.88.2.23.58.64.99 1 .12.12.14.12.28.12s.21 0 .21-.1z" id="h"&gt;&lt;/path&gt;&lt;path d="M5.27 11.6c0-3.93-.9-7.89-3.44-10.88-.2-.23-.58-.64-.99-1C.72-.4.7-.4.56-.4c-.12 0-.21 0-.21.1 0 .04.04.08.06.1C.76.16 1.43.83 2.1 1.91c1.61 2.58 2.34 5.83 2.34 9.68 0 2.69-.36 6.16-2.01 9.14C1.64 22.15.81 22.98.39 23.4c-.02.03-.04.06-.04.09 0 .1.09.1.21.1.14 0 .16 0 .31-.15 3.35-3.05 4.4-7.63 4.4-11.84z" id="l"&gt;&lt;/path&gt;&lt;path d="M7.57 29.49c0-.03 0-.05-.06-.12-.96-1.16-1.76-2.44-2.35-3.83-1.31-3.06-1.83-6.64-1.83-10.94 0-4.26.49-8 1.97-11.28C5.88 2.05 6.64.87 7.53-.21c.02-.03.04-.05.04-.09 0-.1-.07-.1-.22-.1s-.17 0-.19.02c-.01.01-.63.61-1.41 1.71-1.74 2.46-2.62 5.4-3.07 8.38-.24 1.61-.32 3.25-.32 4.88 0 3.74.47 7.56 2.07 10.98.71 1.52 1.66 2.89 2.65 3.93.09.08.1.09.27.09.15 0 .22 0 .22-.1z" id="p"&gt;&lt;/path&gt;&lt;path d="M5.55 14.6c0-3.74-.47-7.56-2.07-10.98C2.77 2.1 1.82.73.83-.31.74-.39.73-.4.56-.4c-.14 0-.22 0-.22.1 0 .04.04.09.06.12.96 1.16 1.76 2.44 2.35 3.83 1.31 3.06 1.83 6.64 1.83 10.94 0 4.26-.49 8-1.97 11.28-.58 1.27-1.34 2.45-2.23 3.53-.01.02-.04.06-.04.09 0 .1.08.1.22.1.15 0 .17 0 .19-.02.01-.01.63-.61 1.41-1.71 1.74-2.46 2.62-5.4 3.07-8.38.24-1.61.32-3.25.32-4.88z" id="y"&gt;&lt;/path&gt;&lt;path d="M2.485-5.25c-1.33.938-1.68 2.422-1.68 3.493 0 .987.294 2.52 1.68 3.5.056 0 .14 0 .14-.084 0-.042-.021-.056-.07-.105-.931-.84-1.274-2.03-1.274-3.304 0-1.89.721-2.814 1.295-3.332.028-.028.049-.049.049-.084 0-.084-.084-.084-.14-.084z" id="v"&gt;&lt;/path&gt;&lt;path d="M.63-5.25c-.049 0-.133 0-.133.084 0 .035.021.056.063.105.602.553 1.274 1.498 1.274 3.304 0 1.463-.455 2.569-1.211 3.255-.119.119-.126.126-.126.161s.021.084.091.084c.084 0 .749-.462 1.211-1.337.308-.581.511-1.337.511-2.156 0-.987-.294-2.52-1.68-3.5Z" id="w"&gt;&lt;/path&gt;&lt;path d="M3.241-1.582h2.142c.091 0 .259 0 .259-.168 0-.175-.161-.175-.259-.175H3.241v-2.149c0-.091 0-.259-.168-.259-.175 0-.175.161-.175.259v2.149H.749c-.091 0-.259 0-.259.168 0 .175.161.175.259.175h2.149V.567c0 .091 0 .259.168.259.175 0 .175-.161.175-.259v-2.149z" id="e"&gt;&lt;/path&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="f"&gt;&lt;/path&gt;&lt;path d="M3.535-1.274h-.238c-.021.154-.091.567-.182.637-.056.042-.595.042-.693.042H1.134c.735-.651.98-.847 1.4-1.176.518-.413 1.001-.847 1.001-1.512 0-.847-.742-1.365-1.638-1.365-.868 0-1.456.609-1.456 1.253 0 .357.301.392.371.392.168 0 .371-.119.371-.371 0-.126-.049-.371-.413-.371.217-.497.693-.651 1.022-.651.7 0 1.064.546 1.064 1.113 0 .609-.434 1.092-.658 1.344L.511-.273C.441-.21.441-.196.441 0h2.884l.21-1.274Z" id="x"&gt;&lt;/path&gt;&lt;path d="M3.31 2.4c0-.03 0-.05-.17-.22C1.89.92 1.57-.97 1.57-2.5c0-1.74.38-3.48 1.61-4.73.13-.12.13-.14.13-.17 0-.07-.04-.1-.1-.1-.1 0-1 .68-1.59 1.95C1.11-4.45.99-3.34.99-2.5c0 .78.11 1.99.66 3.12.6 1.23 1.46 1.88 1.56 1.88.06 0 .1-.03.1-.1z" id="m"&gt;&lt;/path&gt;&lt;path d="M2.89-2.5c0-.78-.11-1.99-.66-3.12C1.63-6.85.77-7.5.67-7.5c-.06 0-.1.04-.1.1 0 .03 0 .05.19.23.98.99 1.55 2.58 1.55 4.67C2.31-.79 1.94.97.7 2.23c-.13.12-.13.14-.13.17 0 .06.04.1.1.1.1 0 1-.68 1.59-1.95.51-1.1.63-2.21.63-3.05z" id="n"&gt;&lt;/path&gt;&lt;path d="M4.6-3.2c0-.8-.05-1.6-.4-2.34-.46-.96-1.28-1.12-1.7-1.12-.6 0-1.33.26-1.74 1.19C.44-4.78.39-4 .39-3.2c0 .75.04 1.65.45 2.41C1.27.02 2 .22 2.49.22c.54 0 1.3-.21 1.74-1.16.32-.69.37-1.47.37-2.26ZM2.49 0c-.39 0-.98-.25-1.16-1.21-.11-.6-.11-1.52-.11-2.11 0-.64 0-1.3.08-1.84.19-1.19.94-1.28 1.19-1.28.33 0 .99.18 1.18 1.17.1.56.1 1.32.1 1.95 0 .75 0 1.43-.11 2.07C3.51-.3 2.94 0 2.49 0Z" id="o"&gt;&lt;/path&gt;&lt;path d="M2.94-6.4c0-.24 0-.26-.23-.26-.62.64-1.5.64-1.82.64v.31c.2 0 .79 0 1.31-.26v5.18c0 .36-.03.48-.93.48H.95V0c.35-.03 1.22-.03 1.62-.03s1.27 0 1.62.03v-.31h-.32c-.9 0-.93-.11-.93-.48V-6.4Z" id="i"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="g"&gt;&lt;/path&gt;&lt;path d="M2.212.063c.077.007.161.007.238.007 1.26 0 2.415-1.029 2.415-2.135 0-.623-.371-1.022-.917-1.022-.966 0-1.477 1.232-1.673 1.757-.091.259-.245.749-.287.882-.77-.105-1.26-.455-1.26-.973 0-.007.042-.791.609-1.421.049-.049.056-.063.056-.091 0-.084-.091-.084-.112-.084-.063 0-.091 0-.224.154C.665-2.38.483-1.652.483-1.351c0 .623.455 1.162 1.358 1.358-.35 1.085-.392 1.218-.392 1.281 0 .189.161.224.238.224s.217-.049.273-.154c.049-.105.112-.462.252-1.295zm.091-.476c.14-.805.196-1.12.532-1.575.315-.427.686-.623 1.036-.623.483 0 .742.322.742.686 0 .707-.882 1.519-2.086 1.519-.063 0-.161 0-.224-.007z" id="q"&gt;&lt;/path&gt;&lt;path d="M.854-.441c-.028.091-.07.266-.07.287 0 .154.126.224.238.224.126 0 .238-.091.273-.154s.091-.287.126-.434c.035-.133.112-.455.154-.63.042-.154.084-.308.119-.469.077-.287.091-.343.294-.63.196-.28.525-.644 1.05-.644.406 0 .413.357.413.49 0 .42-.301 1.197-.413 1.491-.077.196-.105.259-.105.378 0 .371.308.602.665.602.7 0 1.008-.966 1.008-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.042-.133.119-.161.56-.462.847-.742.847-.147 0-.175-.098-.175-.245 0-.161.035-.252.161-.567.084-.217.371-.959.371-1.351 0-.679-.539-.798-.91-.798-.581 0-.973.357-1.183.637-.049-.483-.462-.637-.749-.637-.301 0-.462.217-.553.378-.154.259-.252.658-.252.693 0 .091.098.091.119.091.098 0 .105-.021.154-.21.105-.413.238-.756.511-.756.182 0 .231.154.231.343 0 .133-.063.392-.112.581s-.119.476-.154.63l-.224.896z" id="d"&gt;&lt;/path&gt;&lt;path d="M1.7 1.7c-.04.13-.05.15-.05.2 0 .22.19.28.29.28.05 0 .27-.03.37-.26.03-.08.08-.41.35-1.83.09.01.16.02.33.02 1.66 0 3.2-1.57 3.2-3.15 0-.78-.39-1.38-1.14-1.38C3.6-4.42 3-2.48 2.4-.53 1.32-.73.76-1.29.76-2.01c0-.28.23-1.38.83-2.07.08-.09.08-.11.08-.13 0-.04-.02-.1-.12-.1C1.27-4.31.5-2.86.5-1.9c0 .94.66 1.67 1.73 1.92L1.7 1.7zM3.08-.47c-.08 0-.1 0-.18-.01-.12 0-.13-.01-.13-.04 0-.02.17-.93.2-1.08.31-1.28 1.09-2.24 1.98-2.24.69 0 .96.54.96 1.02 0 1.13-1.29 2.35-2.83 2.35z" id="k"&gt;&lt;/path&gt;&lt;path d="M3.73-3.78c-.18-.37-.47-.64-.92-.64C1.64-4.42.4-2.95.4-1.49.4-.55.95.11 1.73.11c.2 0 .7-.04 1.3-.75.08.42.43.75.91.75.35 0 .58-.23.74-.55.17-.36.3-.97.3-.99 0-.1-.09-.1-.12-.1-.1 0-.11.04-.14.18-.17.65-.35 1.24-.76 1.24-.27 0-.3-.26-.3-.46 0-.22.02-.3.13-.74.11-.42.13-.52.22-.9l.36-1.4c.07-.28.07-.3.07-.34 0-.17-.12-.27-.29-.27-.24 0-.39.22-.42.44zm-.65 2.59c-.05.18-.05.2-.2.37-.44.55-.85.71-1.13.71-.5 0-.64-.55-.64-.94 0-.5.32-1.73.55-2.19.31-.59.76-.96 1.16-.96.65 0 .79.82.79.88s-.02.12-.03.17l-.5 1.96z" id="c"&gt;&lt;/path&gt;&lt;path d="M5.37-5.95c-.14.13-.47.41-.47.59 0 .1.1.2.2.2.09 0 .14-.07.19-.13.12-.15.35-.43.79-.65.07-.04.17-.09.17-.21 0-.1-.07-.15-.14-.2-.22-.15-.33-.33-.41-.57-.02-.09-.06-.22-.2-.22s-.2.13-.2.21c0 .05.08.37.24.58H2.17c-.17 0-.35 0-.35.2s.18.2.35.2h3.2z" id="b"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 55.71h347.7V-.001h-347.7z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 55.71) scale(1.00375)"&gt;&lt;use x="1.37413" xlink:href="#b" y="-41.41974"&gt;&lt;/use&gt;&lt;use x="2.00413" xlink:href="#c" y="-41.41974"&gt;&lt;/use&gt;&lt;use x="7.28622" xlink:href="#d" y="-39.92013"&gt;&lt;/use&gt;&lt;use x="12.22969" xlink:href="#e" y="-39.92013"&gt;&lt;/use&gt;&lt;use x="18.36869" xlink:href="#f" y="-39.92013"&gt;&lt;/use&gt;&lt;use x="25.63176" xlink:href="#g" y="-41.41974"&gt;&lt;/use&gt;&lt;use x="36.1872" xlink:href="#h" y="-55.52042"&gt;&lt;/use&gt;&lt;use x="43.5487" xlink:href="#i" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="50.77068" xlink:href="#j" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="60.77104" xlink:href="#k" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="77.30104" xlink:href="#k" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="52.93075" xlink:href="#i" y="-35.5207"&gt;&lt;/use&gt;&lt;use x="78.08075" xlink:href="#i" y="-35.5207"&gt;&lt;/use&gt;&lt;use x="83.85428" xlink:href="#l" y="-55.52042"&gt;&lt;/use&gt;&lt;use x="92.87429" xlink:href="#h" y="-55.52042"&gt;&lt;/use&gt;&lt;use x="100.24351" xlink:href="#m" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="104.13351" xlink:href="#i" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="111.35402" xlink:href="#j" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="121.35438" xlink:href="#k" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="127.89582" xlink:href="#n" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="131.78431" xlink:href="#d" y="-52.5483"&gt;&lt;/use&gt;&lt;use x="150.72009" xlink:href="#o" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="116.23525" xlink:href="#o" y="-35.5207"&gt;&lt;/use&gt;&lt;use x="147.22804" xlink:href="#k" y="-35.5207"&gt;&lt;/use&gt;&lt;use x="153.76944" xlink:href="#d" y="-39.14925"&gt;&lt;/use&gt;&lt;use x="159.21282" xlink:href="#l" y="-55.52042"&gt;&lt;/use&gt;&lt;use x="168.23282" xlink:href="#h" y="-55.52042"&gt;&lt;/use&gt;&lt;use x="175.60205" xlink:href="#j" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="183.38011" xlink:href="#i" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="206.99032" xlink:href="#k" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="179.49058" xlink:href="#i" y="-35.5207"&gt;&lt;/use&gt;&lt;use x="198.38015" xlink:href="#k" y="-35.5207"&gt;&lt;/use&gt;&lt;use x="207.14389" xlink:href="#j" y="-35.5207"&gt;&lt;/use&gt;&lt;use x="217.14325" xlink:href="#i" y="-35.5207"&gt;&lt;/use&gt;&lt;use x="222.14393" xlink:href="#l" y="-55.52042"&gt;&lt;/use&gt;&lt;use x="231.16393" xlink:href="#h" y="-55.52042"&gt;&lt;/use&gt;&lt;use x="238.53216" xlink:href="#i" y="-47.52054"&gt;&lt;/use&gt;&lt;use x="238.53216" xlink:href="#o" y="-35.5207"&gt;&lt;/use&gt;&lt;use x="243.53284" xlink:href="#l" y="-55.52042"&gt;&lt;/use&gt;&lt;use x="2.00047" xlink:href="#g" y="-12.96042"&gt;&lt;/use&gt;&lt;use x="12.55591" xlink:href="#p" y="-30.0603"&gt;&lt;/use&gt;&lt;use x="21.67196" xlink:href="#q" y="-24.56878"&gt;&lt;/use&gt;&lt;use x="26.93162" xlink:href="#r" y="-27.58706"&gt;&lt;/use&gt;&lt;use x="31.33607" xlink:href="#s" y="-27.58706"&gt;&lt;/use&gt;&lt;use x="36.47607" xlink:href="#t" y="-27.58706"&gt;&lt;/use&gt;&lt;use x="40.37784" xlink:href="#u" y="-24.56878"&gt;&lt;/use&gt;&lt;use x="46.62819" xlink:href="#v" y="-24.56878"&gt;&lt;/use&gt;&lt;use x="49.75019" xlink:href="#f" y="-24.56878"&gt;&lt;/use&gt;&lt;use x="53.73875" xlink:href="#u" y="-24.56878"&gt;&lt;/use&gt;&lt;use x="59.9891" xlink:href="#q" y="-24.56878"&gt;&lt;/use&gt;&lt;use x="65.24875" xlink:href="#w" y="-24.56878"&gt;&lt;/use&gt;&lt;use x="68.37344" xlink:href="#r" y="-27.58706"&gt;&lt;/use&gt;&lt;use x="72.7779" xlink:href="#s" y="-27.58706"&gt;&lt;/use&gt;&lt;use x="77.91789" xlink:href="#t" y="-27.58706"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path class="strokeonly" d="M19.197 33.574H79.12" fill="none"&gt;&lt;/path&gt;&lt;g transform="translate(-2.394 55.71) scale(1.00375)"&gt;&lt;use x="42.00492" xlink:href="#x" y="-16.27078"&gt;&lt;/use&gt;&lt;use x="45.99081" xlink:href="#q" y="-16.27078"&gt;&lt;/use&gt;&lt;use x="51.25046" xlink:href="#u" y="-16.27078"&gt;&lt;/use&gt;&lt;use x="57.50081" xlink:href="#f" y="-16.27078"&gt;&lt;/use&gt;&lt;use x="30.21387" xlink:href="#q" y="-9.65908"&gt;&lt;/use&gt;&lt;use x="35.47353" xlink:href="#r" y="-12.67736"&gt;&lt;/use&gt;&lt;use x="40.37784" xlink:href="#u" y="-9.65908"&gt;&lt;/use&gt;&lt;use x="46.62819" xlink:href="#v" y="-9.65908"&gt;&lt;/use&gt;&lt;use x="49.75019" xlink:href="#f" y="-9.65908"&gt;&lt;/use&gt;&lt;use x="53.73875" xlink:href="#u" y="-9.65908"&gt;&lt;/use&gt;&lt;use x="59.9891" xlink:href="#q" y="-9.65908"&gt;&lt;/use&gt;&lt;use x="65.24875" xlink:href="#w" y="-9.65908"&gt;&lt;/use&gt;&lt;use x="68.37344" xlink:href="#r" y="-12.67736"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path class="strokeonly" d="M27.707 48.428H70.61" fill="none"&gt;&lt;/path&gt;&lt;g transform="translate(-2.394 55.71) scale(1.00375)"&gt;&lt;use x="42.00492" xlink:href="#x" y="-1.36109"&gt;&lt;/use&gt;&lt;use x="45.99081" xlink:href="#q" y="-1.36109"&gt;&lt;/use&gt;&lt;use x="51.25046" xlink:href="#u" y="-1.36109"&gt;&lt;/use&gt;&lt;use x="57.50081" xlink:href="#f" y="-1.36109"&gt;&lt;/use&gt;&lt;use x="83.01916" xlink:href="#y" y="-30.0603"&gt;&lt;/use&gt;&lt;/g&gt;&lt;/g&gt;&lt;title&gt;$\vec{a}_{n+1}=
\begin{pmatrix}
  1-\varphi &amp;amp; \varphi \\
  1 &amp;amp; 1
\end{pmatrix}
\begin{pmatrix}
  {\left(1-\varphi\right)}^n &amp;amp; 0 \\
  0 &amp;amp; \varphi^n
\end{pmatrix}
\begin{pmatrix}
  -1 &amp;amp; \varphi \\
  1 &amp;amp; \varphi-1
\end{pmatrix}
\begin{pmatrix}
1 \\ 0
\end{pmatrix} \\
=\begin{pmatrix}
\frac{\varphi^{n+1}-{(1-\varphi)}^{n+1}}{2\varphi -1} \\
\frac{\varphi^{n}-{(1-\varphi)}^n}{2\varphi -1}
\end{pmatrix}$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;The second component of the resulting vector is the Fibonacci number &lt;span class="math"&gt;&lt;code&gt;$a_n$&lt;/code&gt;&lt;/span&gt;.
We can rewrite this expression as&lt;/p&gt;
&lt;div class="math"&gt;&lt;svg height="30.96" viewbox="0 0 191.52 23.22" width="255.36" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;&lt;defs&gt;&lt;path d="M.975-.49C.945-.365.89-.145.89-.12c0 .11.09.175.185.175.075 0 .185-.04.24-.165.005-.025.065-.26.095-.39.17-.675.17-.685.18-.705.065-.135.425-.835 1.035-.835.245 0 .35.135.35.36 0 .285-.21.8-.325 1.085-.025.06-.05.125-.05.21 0 .26.25.44.545.44.535 0 .81-.65.81-.775 0-.07-.085-.07-.105-.07-.085 0-.09.02-.12.115-.095.3-.325.56-.565.56-.115 0-.15-.08-.15-.19 0-.105.02-.155.065-.265.085-.2.315-.77.315-1.045 0-.37-.265-.595-.74-.595-.455 0-.77.275-.945.495-.025-.41-.425-.495-.61-.495-.5 0-.645.765-.645.775 0 .07.08.07.105.07.085 0 .095-.03.115-.095.075-.29.19-.58.4-.58.17 0 .205.16.205.265 0 .07-.05.26-.08.39-.035.135-.085.34-.11.45L.975-.49Z" id="f"&gt;&lt;/path&gt;&lt;path d="M2.485-5.25c-1.33.938-1.68 2.422-1.68 3.493 0 .987.294 2.52 1.68 3.5.056 0 .14 0 .14-.084 0-.042-.021-.056-.07-.105-.931-.84-1.274-2.03-1.274-3.304 0-1.89.721-2.814 1.295-3.332.028-.028.049-.049.049-.084 0-.084-.084-.084-.14-.084z" id="h"&gt;&lt;/path&gt;&lt;path d="M.63-5.25c-.049 0-.133 0-.133.084 0 .035.021.056.063.105.602.553 1.274 1.498 1.274 3.304 0 1.463-.455 2.569-1.211 3.255-.119.119-.126.126-.126.161s.021.084.091.084c.084 0 .749-.462 1.211-1.337.308-.581.511-1.337.511-2.156 0-.987-.294-2.52-1.68-3.5Z" id="j"&gt;&lt;/path&gt;&lt;path d="M2.345-4.452c0-.189-.014-.196-.21-.196-.448.441-1.085.448-1.372.448v.252c.168 0 .63 0 1.015-.196v3.57c0 .231 0 .322-.7.322H.812V0c.126-.007.987-.028 1.246-.028.217 0 1.099.021 1.253.028v-.252h-.266c-.7 0-.7-.091-.7-.322v-3.878z" id="i"&gt;&lt;/path&gt;&lt;path d="M3.535-1.274h-.238c-.021.154-.091.567-.182.637-.056.042-.595.042-.693.042H1.134c.735-.651.98-.847 1.4-1.176.518-.413 1.001-.847 1.001-1.512 0-.847-.742-1.365-1.638-1.365-.868 0-1.456.609-1.456 1.253 0 .357.301.392.371.392.168 0 .371-.119.371-.371 0-.126-.049-.371-.413-.371.217-.497.693-.651 1.022-.651.7 0 1.064.546 1.064 1.113 0 .609-.434 1.092-.658 1.344L.511-.273C.441-.21.441-.196.441 0h2.884l.21-1.274Z" id="k"&gt;&lt;/path&gt;&lt;path d="M1.085-3.906c.357.091.567.091.679.091.924 0 1.47-.63 1.47-.735 0-.077-.049-.098-.084-.098-.014 0-.028 0-.056.021-.168.063-.539.203-1.057.203-.196 0-.567-.014-1.022-.189-.07-.035-.084-.035-.091-.035-.091 0-.091.077-.091.189v2.065c0 .119 0 .203.112.203.063 0 .07-.014.14-.098.301-.385.728-.441.973-.441.42 0 .609.336.644.392.126.231.168.497.168.903 0 .21 0 .623-.21.931-.175.252-.476.42-.819.42-.455 0-.924-.252-1.099-.714.266.021.399-.154.399-.343 0-.301-.259-.357-.35-.357-.014 0-.35 0-.35.378 0 .63.574 1.26 1.414 1.26.896 0 1.68-.665 1.68-1.547 0-.791-.602-1.519-1.47-1.519-.308 0-.672.077-.98.343v-1.323z" id="n"&gt;&lt;/path&gt;&lt;path d="M5.208-1.582c.112 0 .28 0 .28-.168 0-.175-.161-.175-.28-.175H1.036c-.112 0-.28 0-.28.168 0 .175.161.175.28.175h4.172z" id="g"&gt;&lt;/path&gt;&lt;path d="M3.101 5.894 1.729 3.171c-.035-.07-.056-.112-.112-.112-.028 0-.042 0-.112.056l-.749.497c-.098.063-.098.098-.098.119 0 .042.035.098.098.098.028 0 .042 0 .133-.063.077-.056.28-.196.364-.252l1.533 3.024c.049.105.063.119.161.119.063 0 .14 0 .21-.133L6.678-.028c.056-.091.056-.105.056-.14 0-.112-.091-.175-.168-.175-.105 0-.14.063-.182.147l-3.283 6.09z" id="m"&gt;&lt;/path&gt;&lt;path d="M6.87-3.27c.15 0 .34 0 .34-.2s-.19-.2-.33-.2H.89c-.14 0-.33 0-.33.2s.19.2.34.2h5.97zm.01 1.94c.14 0 .33 0 .33-.2s-.19-.2-.34-.2H.9c-.15 0-.34 0-.34.2s.19.2.33.2h5.99z" id="d"&gt;&lt;/path&gt;&lt;path d="M4.4-1.11c.08 0 .215 0 .215-.14s-.135-.14-.215-.14H1.015c-.08 0-.215 0-.215.14s.135.14.215.14H4.4Z" id="l"&gt;&lt;/path&gt;&lt;path d="M2.212.063c.077.007.161.007.238.007 1.26 0 2.415-1.029 2.415-2.135 0-.623-.371-1.022-.917-1.022-.966 0-1.477 1.232-1.673 1.757-.091.259-.245.749-.287.882-.77-.105-1.26-.455-1.26-.973 0-.007.042-.791.609-1.421.049-.049.056-.063.056-.091 0-.084-.091-.084-.112-.084-.063 0-.091 0-.224.154C.665-2.38.483-1.652.483-1.351c0 .623.455 1.162 1.358 1.358-.35 1.085-.392 1.218-.392 1.281 0 .189.161.224.238.224s.217-.049.273-.154c.049-.105.112-.462.252-1.295zm.091-.476c.14-.805.196-1.12.532-1.575.315-.427.686-.623 1.036-.623.483 0 .742.322.742.686 0 .707-.882 1.519-2.086 1.519-.063 0-.161 0-.224-.007z" id="e"&gt;&lt;/path&gt;&lt;path d="M.854-.441c-.028.091-.07.266-.07.287 0 .154.126.224.238.224.126 0 .238-.091.273-.154s.091-.287.126-.434c.035-.133.112-.455.154-.63.042-.154.084-.308.119-.469.077-.287.091-.343.294-.63.196-.28.525-.644 1.05-.644.406 0 .413.357.413.49 0 .42-.301 1.197-.413 1.491-.077.196-.105.259-.105.378 0 .371.308.602.665.602.7 0 1.008-.966 1.008-1.071 0-.091-.091-.091-.112-.091-.098 0-.105.042-.133.119-.161.56-.462.847-.742.847-.147 0-.175-.098-.175-.245 0-.161.035-.252.161-.567.084-.217.371-.959.371-1.351 0-.679-.539-.798-.91-.798-.581 0-.973.357-1.183.637-.049-.483-.462-.637-.749-.637-.301 0-.462.217-.553.378-.154.259-.252.658-.252.693 0 .091.098.091.119.091.098 0 .105-.021.154-.21.105-.413.238-.756.511-.756.182 0 .231.154.231.343 0 .133-.063.392-.112.581s-.119.476-.154.63l-.224.896z" id="c"&gt;&lt;/path&gt;&lt;path d="M3.73-3.78c-.18-.37-.47-.64-.92-.64C1.64-4.42.4-2.95.4-1.49.4-.55.95.11 1.73.11c.2 0 .7-.04 1.3-.75.08.42.43.75.91.75.35 0 .58-.23.74-.55.17-.36.3-.97.3-.99 0-.1-.09-.1-.12-.1-.1 0-.11.04-.14.18-.17.65-.35 1.24-.76 1.24-.27 0-.3-.26-.3-.46 0-.22.02-.3.13-.74.11-.42.13-.52.22-.9l.36-1.4c.07-.28.07-.3.07-.34 0-.17-.12-.27-.29-.27-.24 0-.39.22-.42.44zm-.65 2.59c-.05.18-.05.2-.2.37-.44.55-.85.71-1.13.71-.5 0-.64-.55-.64-.94 0-.5.32-1.73.55-2.19.31-.59.76-.96 1.16-.96.65 0 .79.82.79.88s-.02.12-.03.17l-.5 1.96z" id="b"&gt;&lt;/path&gt;&lt;clippath id="a"&gt;&lt;path d="M-2.394 15.498h133.25V-1.081H-2.394z"&gt;&lt;/path&gt;&lt;/clippath&gt;&lt;/defs&gt;&lt;g clip-path="url(#a)" transform="scale(1.5)"&gt;&lt;g transform="translate(-2.394 15.498) scale(1.0038)"&gt;&lt;use x="2.00047" xlink:href="#b" y="-5.44032"&gt;&lt;/use&gt;&lt;use x="7.28622" xlink:href="#c" y="-3.93972"&gt;&lt;/use&gt;&lt;use x="15.50693" xlink:href="#d" y="-5.44032"&gt;&lt;/use&gt;&lt;use x="27.26285" xlink:href="#e" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="32.5225" xlink:href="#f" y="-13.30772"&gt;&lt;/use&gt;&lt;use x="37.42581" xlink:href="#g" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="43.67616" xlink:href="#h" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="46.79816" xlink:href="#i" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="50.78773" xlink:href="#g" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="57.03707" xlink:href="#e" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="62.29672" xlink:href="#j" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="65.42242" xlink:href="#f" y="-13.30772"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path class="strokeonly" d="M24.767 7.588H67.67" fill="none"&gt;&lt;/path&gt;&lt;g transform="translate(-2.394 15.498) scale(1.0038)"&gt;&lt;use x="39.05289" xlink:href="#k" y="-1.99144"&gt;&lt;/use&gt;&lt;use x="43.03978" xlink:href="#e" y="-1.99144"&gt;&lt;/use&gt;&lt;use x="48.29943" xlink:href="#g" y="-1.99144"&gt;&lt;/use&gt;&lt;use x="54.54878" xlink:href="#i" y="-1.99144"&gt;&lt;/use&gt;&lt;use x="74.3036" xlink:href="#d" y="-5.44032"&gt;&lt;/use&gt;&lt;use x="86.05949" xlink:href="#e" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="91.31917" xlink:href="#f" y="-13.30772"&gt;&lt;/use&gt;&lt;use x="96.22346" xlink:href="#g" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="102.47281" xlink:href="#h" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="105.59849" xlink:href="#g" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="111.84783" xlink:href="#e" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="117.10748" xlink:href="#j" y="-10.28944"&gt;&lt;/use&gt;&lt;use x="120.23319" xlink:href="#l" y="-13.30772"&gt;&lt;/use&gt;&lt;use x="125.64943" xlink:href="#f" y="-13.30772"&gt;&lt;/use&gt;&lt;/g&gt;&lt;path class="strokeonly" d="M83.344 7.588h44.328" fill="none"&gt;&lt;/path&gt;&lt;use transform="translate(-2.394 15.498) scale(1.0038)" x="103.02889" xlink:href="#m" y="-6.65988"&gt;&lt;/use&gt;&lt;path class="strokeonly" d="M106.8 8.693h3.971" fill="none"&gt;&lt;/path&gt;&lt;use transform="translate(-2.394 15.498) scale(1.0038)" x="109.59843" xlink:href="#n" y="-.86222"&gt;&lt;/use&gt;&lt;/g&gt;&lt;title&gt;$a_{n}=\frac{\varphi^{n}-{(1-\varphi)}^n}{2\varphi -1}=\frac{\varphi^{n}-{(-\varphi)}^{-n}}{\sqrt{5}}$&lt;/title&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;where we exploited (&lt;span class="math"&gt;&lt;code&gt;$1-\varphi={(-\varphi)}^{-1}$&lt;/code&gt;&lt;/span&gt; which is trivial to prove) and identify Binet's formula.&lt;/p&gt;</content><category term="Math"></category><category term="Math"></category><category term="Linear Algebra"></category></entry></feed>